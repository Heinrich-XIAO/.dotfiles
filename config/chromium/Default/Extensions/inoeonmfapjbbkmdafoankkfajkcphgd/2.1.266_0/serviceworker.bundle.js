!function(e,t){if("function"==typeof define&&define.amd)define([],t);else if("undefined"!=typeof exports)t();else{t(),e.unknown={}}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,(function(){function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.apply(this,arguments)}let t=!1,n=!1;chrome.runtime.onInstalled.addListener((async e=>{switch(e.reason){case"install":t=!0,chrome.storage.sync.get(["4160f55e-aea9-45de-96b8-bbfcbcb57b1c"],(e=>{if(null==e["4160f55e-aea9-45de-96b8-bbfcbcb57b1c"]){let e=!0;chrome.storage.sync.set({"4160f55e-aea9-45de-96b8-bbfcbcb57b1c":{bbfcbcb57b1c:e}})}else{let e=!1;chrome.storage.sync.set({"4160f55e-aea9-45de-96b8-bbfcbcb57b1c":{bbfcbcb57b1c:e}})}}));break;case"update":n=!0}}));const r=()=>new Promise((e=>{chrome.storage.sync.get(["4160f55e-aea9-45de-96b8-bbfcbcb57b1c"],(t=>{null==t["4160f55e-aea9-45de-96b8-bbfcbcb57b1c"]&&e(!1),null!=t["4160f55e-aea9-45de-96b8-bbfcbcb57b1c"]&&null!=t["4160f55e-aea9-45de-96b8-bbfcbcb57b1c"].bbfcbcb57b1c&&1==t["4160f55e-aea9-45de-96b8-bbfcbcb57b1c"].bbfcbcb57b1c?e(!0):e(!1)}))}));chrome.storage.local.get(["1540g45e-aea9-45de-12o9-a3rrdgthshr3"],(e=>{if(null==e["1540g45e-aea9-45de-12o9-a3rrdgthshr3"]){let e=!1;chrome.storage.sync.set({"1540g45e-aea9-45de-12o9-a3rrdgthshr3":{a3rrdgthshr3:e}})}}));const i=Object.freeze({GOOGLE:"Google",MICROSOFT:"Microsoft",NYC:"NYC",DEFAULT:"Default"});let a="https://idp.texthelp.com/oauth2";chrome.identity&&(a=chrome.identity.getRedirectURL("oauth2")),Object.freeze(a);class o{constructor(){this.Σ0=function(e){return this.ROTR(2,e)^this.ROTR(13,e)^this.ROTR(22,e)},this.Σ1=function(e){return this.ROTR(6,e)^this.ROTR(11,e)^this.ROTR(25,e)},this.σ0=function(e){return this.ROTR(7,e)^this.ROTR(18,e)^e>>>3},this.σ1=function(e){return this.ROTR(17,e)^this.ROTR(19,e)^e>>>10},this.Ch=function(e,t,n){return e&t^~e&n},this.Maj=function(e,t,n){return e&t^e&n^t&n}}hash(e){e=unescape(encodeURIComponent(e));for(var t=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],n=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],r=(e+=String.fromCharCode(128)).length/4+2,i=Math.ceil(r/16),a=new Array(i),o=0;o<i;o++){a[o]=new Array(16);for(var s=0;s<16;s++)a[o][s]=e.charCodeAt(64*o+4*s)<<24|e.charCodeAt(64*o+4*s+1)<<16|e.charCodeAt(64*o+4*s+2)<<8|e.charCodeAt(64*o+4*s+3)}a[i-1][14]=8*(e.length-1)/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=8*(e.length-1)&4294967295;var c,u,l,h,d,p,f,g,v=new Array(64);for(o=0;o<i;o++){for(var m=0;m<16;m++)v[m]=a[o][m];for(m=16;m<64;m++)v[m]=this.σ1(v[m-2])+v[m-7]+this.σ0(v[m-15])+v[m-16]&4294967295;c=n[0],u=n[1],l=n[2],h=n[3],d=n[4],p=n[5],f=n[6],g=n[7];for(m=0;m<64;m++){var _=g+this.Σ1(d)+this.Ch(d,p,f)+t[m]+v[m],y=this.Σ0(c)+this.Maj(c,u,l);g=f,f=p,p=d,d=h+_&4294967295,h=l,l=u,u=c,c=_+y&4294967295}n[0]=n[0]+c&4294967295,n[1]=n[1]+u&4294967295,n[2]=n[2]+l&4294967295,n[3]=n[3]+h&4294967295,n[4]=n[4]+d&4294967295,n[5]=n[5]+p&4294967295,n[6]=n[6]+f&4294967295,n[7]=n[7]+g&4294967295}return this.toHexStr(n[0])+this.toHexStr(n[1])+this.toHexStr(n[2])+this.toHexStr(n[3])+this.toHexStr(n[4])+this.toHexStr(n[5])+this.toHexStr(n[6])+this.toHexStr(n[7])}ROTR(e,t){return t>>>e|t<<32-e}toHexStr(e){for(var t="",n=7;n>=0;n--)t+=(e>>>4*n&15).toString(16);return t}}class s{constructor(e){const{applicationName:t="",analyticsTrackingCode:n=""}=e;if(t.length<0)throw"The application used when creating an Analytics instance is invalid.";if(!this._isAnalytics(n))throw"The analytics tracking code used when creating an Analytics instance is invalid.";this._applicationName=t,this._analyticsTrackingCode=n,this._analyticsEndpoint="https://www.google-analytics.com/collect",this.AnalyticsAttributes=Object.freeze({TRACKING_CODE:"tid",HIT_TYPE:"t",SCREEN_RESOLUTION:"sr",VIEW_PORT:"vp",APPLICATION_VERSION:"av",LIBRARY_VERSION:"_v",COLOR_DEPTH:"sd",LANGUAGE:"ul",APPLICATION_NAME:"an",PROTOCAL_VERSION:"v",USER_ID:"uid",CLIENT_ID:"cid",SCREEN_NAME:"cd",EVENT_CATEGORY:"ec",EVENT_ACTION:"ea",EVENT_LABEL:"el",EVENT_VALUE:"ev",HOST_NAME:"dh"}),this._libraryVersion=Object.freeze("1.0.95"),this._hasher=new o}sendAppView(e){const{screenName:t="(none)",userId:n=""}=e;if(n.length<1)throw"An analytics screen view must have a user ID.";const r=new URLSearchParams;r.append(this.AnalyticsAttributes.HIT_TYPE,"screenview"),r.append(this.AnalyticsAttributes.LIBRARY_VERSION,this._getLibraryVersion()),r.append(this.AnalyticsAttributes.PROTOCAL_VERSION,"1"),r.append(this.AnalyticsAttributes.APPLICATION_NAME,this._applicationName),r.append(this.AnalyticsAttributes.APPLICATION_VERSION,this._getVersion().toString()),r.append(this.AnalyticsAttributes.TRACKING_CODE,this._analyticsTrackingCode),r.append(this.AnalyticsAttributes.LANGUAGE,this._getLanguage()),r.append(this.AnalyticsAttributes.COLOR_DEPTH,this._getColorDepth()),r.append(this.AnalyticsAttributes.SCREEN_RESOLUTION,this._getScreenResolution()),r.append(this.AnalyticsAttributes.VIEW_PORT,this._getViewportSize()),r.append(this.AnalyticsAttributes.USER_ID,n),r.append(this.AnalyticsAttributes.CLIENT_ID,n),r.append(this.AnalyticsAttributes.SCREEN_NAME,t);try{fetch(this._analyticsEndpoint,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",DNT:1,Accept:"application/json"},body:r})}catch(e){}}sendEvent(e){const{eventCategory:t="",eventAction:n="",eventLabel:r="",eventValue:i=-1,userId:a="",screenName:o="(none)",hostName:s="(none)",customAttributes:c=[]}=e;if(t.length<1)throw"An analytics event must have a category.";if(n.length<1)throw"An analytics event must have an action.";if(a.length<1)throw"An analytics event must have a user ID.";const u=new URLSearchParams;u.append(this.AnalyticsAttributes.EVENT_CATEGORY,t),u.append(this.AnalyticsAttributes.EVENT_ACTION,n),r.length>0&&u.append(this.AnalyticsAttributes.EVENT_LABEL,r),i>-1&&u.append(this.AnalyticsAttributes.EVENT_VALUE,i.toString()),u.append(this.AnalyticsAttributes.HIT_TYPE,"event"),u.append(this.AnalyticsAttributes.LIBRARY_VERSION,this._getLibraryVersion()),u.append(this.AnalyticsAttributes.PROTOCAL_VERSION,"1"),u.append(this.AnalyticsAttributes.APPLICATION_NAME,this._applicationName),u.append(this.AnalyticsAttributes.APPLICATION_VERSION,this._getVersion().toString()),u.append(this.AnalyticsAttributes.TRACKING_CODE,this._analyticsTrackingCode),u.append(this.AnalyticsAttributes.LANGUAGE,this._getLanguage()),u.append(this.AnalyticsAttributes.COLOR_DEPTH,this._getColorDepth()),u.append(this.AnalyticsAttributes.SCREEN_RESOLUTION,this._getScreenResolution()),u.append(this.AnalyticsAttributes.SCREEN_NAME,o),u.append(this.AnalyticsAttributes.HOST_NAME,s),u.append(this.AnalyticsAttributes.VIEW_PORT,this._getViewportSize()),u.append(this.AnalyticsAttributes.USER_ID,a),u.append(this.AnalyticsAttributes.CLIENT_ID,a),c.forEach(((e,t)=>{let n="cd";"m"==e.t&&(n="cm"),u.append(n+e.i.toString(),e.value)}));try{fetch(this._analyticsEndpoint,{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",DNT:1,Accept:"application/json"},body:u})}catch(e){}}hash(e){const{stringToHash:t="",salt:n="hfdu9b89';JHK7898hbh;';[/"}=e;if(t.length<1)throw"The string to hash is invalid.";return this._hasher.hash(t+n)}hashEmail(e){let t=(e=e.toLowerCase()).split("@")[0].replace("%",""),n=e.substring(t.length+1);return{email:e,userIemailNamedName:t,emailDomain:n,deIdentifiedEmail:this.hash({stringToHash:t})+"@"+n}}getUTCTimeStamp(){let e=new Date;function t(e){return("0"+e).slice(-2)}return e.getUTCFullYear().toString()+":"+t((e.getUTCMonth()+1).toString())+":"+t(e.getUTCDate().toString())+"    "+t(e.getUTCHours().toString())+":"+t(e.getUTCMinutes().toString())+":"+t(e.getUTCSeconds().toString())}_isAnalytics(e){return/^ua-\d{4,9}-\d{1,4}$/i.test(e.toString())}_getScreenResolution(){throw"virtual function that must have a derived implementation"}_getViewportSize(){throw"virtual function that must have a derived implementation"}_getVersion(){throw"virtual function that must have a derived implementation"}_getColorDepth(){throw"virtual function that must have a derived implementation"}_getLanguage(){throw"virtual function that must have a derived implementation"}_getLibraryVersion(){return this._libraryVersion}}class c extends s{constructor(e){super(e)}_getScreenResolution(){try{return(window.screen.width*window.devicePixelRatio).toString()+"x"+(window.screen.height*window.devicePixelRatio).toString()}catch(e){return"0x0"}}_getViewportSize(){try{return Math.max(document.documentElement.clientWidth,window.innerWidth||0).toString()+"x"+Math.max(document.documentElement.clientHeight,window.innerHeight||0).toString()}catch(e){return"0x0"}}_getVersion(){try{return chrome.runtime.getManifest().version}catch(e){return 0}}_getColorDepth(){try{return window.screen.colorDepth+"-bit"}catch(e){return"0-bit"}}_getLanguage(){try{return navigator.slice(0,5)}catch(e){return""}}}function u(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}}function h(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var d={};function p(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:d}var f=Object.assign,g=Object.getOwnPropertyDescriptor,v=Object.defineProperty,m=Object.prototype,_=[];Object.freeze(_);var y={};Object.freeze(y);var b="undefined"!=typeof Proxy,w=Object.toString();function O(){b||h("Proxy not available")}function S(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var A=function(){};function E(e){return"function"==typeof e}function T(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function k(e){return null!==e&&"object"==typeof e}function C(e){if(!k(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===w}function I(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function P(e,t,n){v(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function R(e,t,n){v(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function L(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return k(e)&&!0===e[n]}}function N(e){return e instanceof Map}function D(e){return e instanceof Set}var x=void 0!==Object.getOwnPropertySymbols;var j="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:x?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function U(e){return null===e?null:"object"==typeof e?""+e:e}function M(e,t){return m.hasOwnProperty.call(e,t)}var B=Object.getOwnPropertyDescriptors||function(e){var t={};return j(e).forEach((function(n){t[n]=g(e,n)})),t};function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?a:String(a)),r)}var i,a}function G(e,t,n){return t&&V(e.prototype,t),n&&V(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F.apply(this,arguments)}function Y(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,K(e,t)}function K(e,t){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},K(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var q=Symbol("mobx-stored-annotations");function J(e){return Object.assign((function(t,n){if(X(n))return e.decorate_20223_(t,n);$(t,n,e)}),e)}function $(e,t,n){M(e,q)||P(e,q,F({},e[q])),function(e){return e.annotationType_===ae}(n)||(e[q][t]=n)}function X(e){return"object"==typeof e&&"string"==typeof e.kind}var Q=Symbol("mobx administration"),Z=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=it.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return kt(this)},t.reportChanged=function(){Et(),Ct(this),Tt()},t.toString=function(){return this.name_},e}(),ee=L("Atom",Z);function te(e,t,n){void 0===t&&(t=A),void 0===n&&(n=A);var r,i=new Z(e);return t!==A&&$t(Ht,i,t,r),n!==A&&Jt(i,n),i}var ne={identity:function(e,t){return e===t},structural:function(e,t){return gr(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return gr(e,t,1)}};function re(e,t,n){return on(e)?e:Array.isArray(e)?Fe.array(e,{name:n}):C(e)?Fe.object(e,void 0,{name:n}):N(e)?Fe.map(e,{name:n}):D(e)?Fe.set(e,{name:n}):"function"!=typeof e||Kt(e)||an(e)?e:I(e)?nn(e):Yt(n,e)}function ie(e){return e}var ae="override";function oe(e,t){return{annotationType_:e,options_:t,make_:se,extend_:ce,decorate_20223_:ue}}function se(e,t,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Kt(n.value))return 1;var a=le(e,this,t,n,!1);return v(r,t,a),2}function ce(e,t,n,r){var i=le(e,this,t,n);return e.defineProperty_(t,i,r)}function ue(e,t){var n=t.kind,r=t.name,i=t.addInitializer,a=this;if("field"!=n){var o,s,c,u,l,d;if("method"==n)return Kt(e)||(s=e,e=Qe(null!=(c=null==(u=a.options_)?void 0:u.name)?c:r.toString(),s,null!=(l=null==(d=a.options_)?void 0:d.autoAction)&&l)),null!=(o=this.options_)&&o.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobxAction=!0,e[r]=t})),e;h("Cannot apply '"+a.annotationType_+"' to '"+String(r)+"' (kind: "+n+"):\n'"+a.annotationType_+"' can only be used on properties with a function value.")}else i((function(){$(this,r,a)}))}function le(e,t,n,r,i){var a,o,s,c,u,l,h,d;void 0===i&&(i=wt.safeDescriptors),d=r,t.annotationType_,d.value;var p,f=r.value;null!=(a=t.options_)&&a.bound&&(f=f.bind(null!=(p=e.proxy_)?p:e.target_));return{value:Qe(null!=(o=null==(s=t.options_)?void 0:s.name)?o:n.toString(),f,null!=(c=null==(u=t.options_)?void 0:u.autoAction)&&c,null!=(l=t.options_)&&l.bound?null!=(h=e.proxy_)?h:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function he(e,t){return{annotationType_:e,options_:t,make_:de,extend_:pe,decorate_20223_:fe}}function de(e,t,n,r){var i;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!M(e.target_,t)||!an(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(an(n.value))return 1;var a=ge(e,this,t,n,!1,!1);return v(r,t,a),2}function pe(e,t,n,r){var i,a=ge(e,this,t,n,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,a,r)}function fe(e,t){var n,r=t.name,i=t.addInitializer;return an(e)||(e=nn(e)),null!=(n=this.options_)&&n.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobXFlow=!0,e[r]=t})),e}function ge(e,t,n,r,i,a){var o;void 0===a&&(a=wt.safeDescriptors),o=r,t.annotationType_,o.value;var s,c=r.value;(an(c)||(c=nn(c)),i)&&((c=c.bind(null!=(s=e.proxy_)?s:e.target_)).isMobXFlow=!0);return{value:c,configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function ve(e,t){return{annotationType_:e,options_:t,make_:me,extend_:_e,decorate_20223_:ye}}function me(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function _e(e,t,n,r){var i;return i=n,this.annotationType_,i.get,e.defineComputedProperty_(t,F({},this.options_,{get:n.get,set:n.set}),r)}function ye(e,t){var n=this,r=t.name;return(0,t.addInitializer)((function(){var t=qn(this)[Q],i=F({},n.options_,{get:e,context:this});i.name||(i.name="ObservableObject."+r.toString()),t.values_.set(r,new ot(i))})),function(){return this[Q].getObservablePropValue_(r)}}function be(e,t){return{annotationType_:e,options_:t,make_:we,extend_:Oe,decorate_20223_:Se}}function we(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Oe(e,t,n,r){var i,a;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(i=null==(a=this.options_)?void 0:a.enhancer)?i:re,r)}function Se(e,t){var n=this,r=t.kind,i=t.name,a=new WeakSet;function o(e,t){var r,o,s=qn(e)[Q],c=new nt(t,null!=(r=null==(o=n.options_)?void 0:o.enhancer)?r:re,"ObservableObject."+i.toString(),!1);s.values_.set(i,c),a.add(e)}if("accessor"==r)return{get:function(){return a.has(this)||o(this,e.get.call(this)),this[Q].getObservablePropValue_(i)},set:function(e){return a.has(this)||o(this,e),this[Q].setObservablePropValue_(i,e)},init:function(e){return a.has(this)||o(this,e),e}}}var Ae="true",Ee=Te();function Te(e){return{annotationType_:Ae,options_:e,make_:ke,extend_:Ce,decorate_20223_:Ie}}function ke(e,t,n,r){var i,a,o,s;if(n.get)return We.make_(e,t,n,r);if(n.set){var c=Qe(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!wt.safeDescriptors||e.isPlainObject_,set:c})?0:2:(v(r,t,{configurable:!0,set:c}),2)}if(r!==e.target_&&"function"==typeof n.value)return I(n.value)?(null!=(s=this.options_)&&s.autoBind?nn.bound:nn).make_(e,t,n,r):(null!=(o=this.options_)&&o.autoBind?Yt.bound:Yt).make_(e,t,n,r);var u,l=!1===(null==(i=this.options_)?void 0:i.deep)?Fe.ref:Fe;"function"==typeof n.value&&null!=(a=this.options_)&&a.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return l.make_(e,t,n,r)}function Ce(e,t,n,r){var i,a,o;if(n.get)return We.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!wt.safeDescriptors||e.isPlainObject_,set:Qe(t.toString(),n.set)},r);"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(o=e.proxy_)?o:e.target_));return(!1===(null==(a=this.options_)?void 0:a.deep)?Fe.ref:Fe).extend_(e,t,n,r)}function Ie(e,t){h("'"+this.annotationType_+"' cannot be used as a decorator")}var Pe={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Re(e){return e||Pe}Object.freeze(Pe);var Le=be("observable"),Ne=be("observable.ref",{enhancer:ie}),De=be("observable.shallow",{enhancer:function(e,t,n){return null==e||Xn(e)||Dn(e)||Gn(e)||Kn(e)?e:Array.isArray(e)?Fe.array(e,{name:n,deep:!1}):C(e)?Fe.object(e,void 0,{name:n,deep:!1}):N(e)?Fe.map(e,{name:n,deep:!1}):D(e)?Fe.set(e,{name:n,deep:!1}):void 0}}),xe=be("observable.struct",{enhancer:function(e,t){return gr(e,t)?t:e}}),je=J(Le);function Ue(e){return!0===e.deep?re:!1===e.deep?ie:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:re;var t,n,r}function Me(e,t,n){return X(t)?Le.decorate_20223_(e,t):T(t)?void $(e,t,Le):on(e)?e:C(e)?Fe.object(e,t,n):Array.isArray(e)?Fe.array(e,t):N(e)?Fe.map(e,t):D(e)?Fe.set(e,t):"object"==typeof e&&null!==e?e:Fe.box(e,t)}f(Me,je);var Be,Ve,Ge={box:function(e,t){var n=Re(t);return new nt(e,Ue(n),n.name,!0,n.equals)},array:function(e,t){var n=Re(t);return(!1===wt.useProxies||!1===n.proxy?ur:En)(e,Ue(n),n.name)},map:function(e,t){var n=Re(t);return new Vn(e,Ue(n),n.name)},set:function(e,t){var n=Re(t);return new Yn(e,Ue(n),n.name)},object:function(e,t,n){return pr((function(){return Xt(!1===wt.useProxies||!1===(null==n?void 0:n.proxy)?qn({},n):function(e,t){var n,r;return O(),e=qn(e,t),null!=(r=(n=e[Q]).proxy_)?r:n.proxy_=new Proxy(e,dn)}({},n),e,t)}))},ref:J(Ne),shallow:J(De),deep:je,struct:J(xe)},Fe=f(Me,Ge),Ye="computed",Ke=ve(Ye),ze=ve("computed.struct",{equals:ne.structural}),We=function(e,t){if(X(t))return Ke.decorate_20223_(e,t);if(T(t))return $(e,t,Ke);if(C(e))return J(ve(Ye,e));var n=C(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new ot(n)};Object.assign(We,Ke),We.struct=J(ze);var He,qe=0,Je=1,$e=null!=(Be=null==(Ve=g((function(){}),"name"))?void 0:Ve.configurable)&&Be,Xe={value:"action",configurable:!0,writable:!1,enumerable:!1};function Qe(e,t,n,r){function i(){return function(e,t,n,r,i){var a=function(e,t,n,r){var i=!1,a=0,o=wt.trackingDerivation,s=!t||!o;Et();var c=wt.allowStateChanges;s&&(ft(),c=Ze(!0));var u=vt(!0),l={runAsAction_:s,prevDerivation_:o,prevAllowStateChanges_:c,prevAllowStateReads_:u,notifySpy_:i,startTime_:a,actionId_:Je++,parentActionId_:qe};return qe=l.actionId_,l}(0,t);try{return n.apply(r,i)}catch(e){throw a.error_=e,e}finally{!function(e){qe!==e.actionId_&&h(30);qe=e.parentActionId_,void 0!==e.error_&&(wt.suppressReactionErrors=!0);et(e.prevAllowStateChanges_),mt(e.prevAllowStateReads_),Tt(),e.runAsAction_&&gt(e.prevDerivation_);wt.suppressReactionErrors=!1}(a)}}(0,n,t,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,i.toString=function(){return t.toString()},$e&&(Xe.value=e,v(i,"name",Xe)),i}function Ze(e){var t=wt.allowStateChanges;return wt.allowStateChanges=e,t}function et(e){wt.allowStateChanges=e}He=Symbol.toPrimitive;var tt,nt=function(e){function t(t,n,r,i,a){var o;return void 0===r&&(r="ObservableValue"),void 0===a&&(a=ne.default),(o=e.call(this,r)||this).enhancer=void 0,o.name_=void 0,o.equals=void 0,o.hasUnreportedChange_=!1,o.interceptors_=void 0,o.changeListeners_=void 0,o.value_=void 0,o.dehancer=void 0,o.enhancer=n,o.name_=r,o.equals=a,o.value_=n(t,void 0,r),o}Y(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==wt.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(pn(this)){var t=gn(this,{object:this,type:On,newValue:e});if(!t)return wt.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?wt.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),vn(this)&&_n(this,{type:On,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return fn(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:On,newValue:this.value_,oldValue:void 0}),mn(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return U(this.get())},n[He]=function(){return this.valueOf()},t}(Z),rt=L("ObservableValue",nt);tt=Symbol.toPrimitive;var it,at,ot=function(){function e(e){this.dependenciesState_=it.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=it.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new ct(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=at.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||h(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Qe("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?ne.structural:ne.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==it.UP_TO_DATE_)return;e.lowestObserverState_=it.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===it.UP_TO_DATE_&&(e.dependenciesState_=it.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&h(32,this.name_,this.derivation),0!==wt.inBatch||0!==this.observers_.size||this.keepAlive_){if(kt(this),lt(this)){var e=wt.trackingContext;this.keepAlive_&&!e&&(wt.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===it.STALE_)return;e.lowestObserverState_=it.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===it.POSSIBLY_STALE_?t.dependenciesState_=it.STALE_:t.dependenciesState_===it.UP_TO_DATE_&&(e.lowestObserverState_=it.UP_TO_DATE_)}))}(this),wt.trackingContext=e}}else lt(this)&&(this.warnAboutUntrackedRead_(),Et(),this.value_=this.computeValue_(!1),Tt());var t=this.value_;if(ut(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&h(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else h(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===it.NOT_TRACKING_,n=this.computeValue_(!0),r=t||ut(e)||ut(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing_=!0;var t,n=Ze(!1);if(e)t=ht(this,this.derivation,this.scope_);else if(!0===wt.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new ct(e)}return et(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(dt(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,i=void 0;return zt((function(){var a=n.get();if(!r||t){var o=ft();e({observableKind:"computed",debugObjectName:n.name_,type:On,object:n,newValue:a,oldValue:i}),gt(o)}r=!1,i=a}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return U(this.get())},t[tt]=function(){return this.valueOf()},e}(),st=L("ComputedValue",ot);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(it||(it={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(at||(at={}));var ct=function(e){this.cause=void 0,this.cause=e};function ut(e){return e instanceof ct}function lt(e){switch(e.dependenciesState_){case it.UP_TO_DATE_:return!1;case it.NOT_TRACKING_:case it.STALE_:return!0;case it.POSSIBLY_STALE_:for(var t=vt(!0),n=ft(),r=e.observing_,i=r.length,a=0;a<i;a++){var o=r[a];if(st(o)){if(wt.disableErrorBoundaries)o.get();else try{o.get()}catch(e){return gt(n),mt(t),!0}if(e.dependenciesState_===it.STALE_)return gt(n),mt(t),!0}}return _t(e),gt(n),mt(t),!1}}function ht(e,t,n){var r=vt(!0);_t(e),e.newObserving_=new Array(0===e.runId_?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++wt.runId;var i,a=wt.trackingDerivation;if(wt.trackingDerivation=e,wt.inBatch++,!0===wt.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new ct(e)}return wt.inBatch--,wt.trackingDerivation=a,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=it.UP_TO_DATE_,i=0,a=e.unboundDepsCount_,o=0;o<a;o++){var s=n[o];0===s.diffValue_&&(s.diffValue_=1,i!==o&&(n[i]=s),i++),s.dependenciesState_>r&&(r=s.dependenciesState_)}n.length=i,e.newObserving_=null,a=t.length;for(;a--;){var c=t[a];0===c.diffValue_&&St(c,e),c.diffValue_=0}for(;i--;){var u=n[i];1===u.diffValue_&&(u.diffValue_=0,Ot(u,e))}r!==it.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),mt(r),i}function dt(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)St(t[n],e);e.dependenciesState_=it.NOT_TRACKING_}function pt(e){var t=ft();try{return e()}finally{gt(t)}}function ft(){var e=wt.trackingDerivation;return wt.trackingDerivation=null,e}function gt(e){wt.trackingDerivation=e}function vt(e){var t=wt.allowStateReads;return wt.allowStateReads=e,t}function mt(e){wt.allowStateReads=e}function _t(e){if(e.dependenciesState_!==it.UP_TO_DATE_){e.dependenciesState_=it.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=it.UP_TO_DATE_}}var yt=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},bt=!0,wt=function(){var e=p();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(bt=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new yt).version&&(bt=!1),bt?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new yt):(setTimeout((function(){h(35)}),1),new yt)}();function Ot(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function St(e,t){e.observers_.delete(t),0===e.observers_.size&&At(e)}function At(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,wt.pendingUnobservations.push(e))}function Et(){wt.inBatch++}function Tt(){if(0==--wt.inBatch){Lt();for(var e=wt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof ot&&n.suspend_())}wt.pendingUnobservations=[]}}function kt(e){var t=wt.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&wt.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&wt.inBatch>0&&At(e),!1)}function Ct(e){e.lowestObserverState_!==it.STALE_&&(e.lowestObserverState_=it.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===it.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=it.STALE_})))}var It=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=it.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=at.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,wt.pendingReactions.push(this),Lt())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){Et(),this.isScheduled_=!1;var e=wt.trackingContext;if(wt.trackingContext=this,lt(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}wt.trackingContext=e,Tt()}},t.track=function(e){if(!this.isDisposed_){Et(),this.isRunning_=!0;var t=wt.trackingContext;wt.trackingContext=this;var n=ht(this,e,void 0);wt.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&dt(this),ut(n)&&this.reportExceptionInDerivation_(n.cause),Tt()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(wt.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";wt.suppressReactionErrors||console.error(n,e),wt.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Et(),dt(this),Tt()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[Q]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){},e}(),Pt=100,Rt=function(e){return e()};function Lt(){wt.inBatch>0||wt.isRunningReactions||Rt(Nt)}function Nt(){wt.isRunningReactions=!0;for(var e=wt.pendingReactions,t=0;e.length>0;){++t===Pt&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}wt.isRunningReactions=!1}var Dt=L("Reaction",It);var xt="action",jt="autoAction",Ut=oe(xt),Mt=oe("action.bound",{bound:!0}),Bt=oe(jt,{autoAction:!0}),Vt=oe("autoAction.bound",{autoAction:!0,bound:!0});function Gt(e){return function(t,n){return E(t)?Qe(t.name||"<unnamed action>",t,e):E(n)?Qe(t,n,e):X(n)?(e?Bt:Ut).decorate_20223_(t,n):T(n)?$(t,n,e?Bt:Ut):T(t)?J(oe(e?jt:xt,{name:t,autoAction:e})):void 0}}var Ft=Gt(!1);Object.assign(Ft,Ut);var Yt=Gt(!0);function Kt(e){return E(e)&&!0===e.isMobxAction}function zt(e,t){var n,r,i,a,o;void 0===t&&(t=y);var s,c=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(!t.scheduler&&!t.delay)s=new It(c,(function(){this.track(h)}),t.onError,t.requiresObservable);else{var u=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Wt}(t),l=!1;s=new It(c,(function(){l||(l=!0,u((function(){l=!1,s.isDisposed_||s.track(h)})))}),t.onError,t.requiresObservable)}function h(){e(s)}return null!=(i=t)&&null!=(a=i.signal)&&a.aborted||s.schedule_(),s.getDisposer_(null==(o=t)?void 0:o.signal)}Object.assign(Yt,Bt),Ft.bound=J(Mt),Yt.bound=J(Vt);var Wt=function(e){return e()};var Ht="onBO",qt="onBUO";function Jt(e,t,n){return $t(qt,e,t,n)}function $t(e,t,n,r){var i="function"==typeof r?lr(t,n):lr(t),a=E(r)?r:n,o=e+"L";return i[o]?i[o].add(a):i[o]=new Set([a]),function(){var e=i[o];e&&(e.delete(a),0===e.size&&delete i[o])}}function Xt(e,t,n,r){var i=B(t);return pr((function(){var t=qn(e,r)[Q];j(i).forEach((function(e){t.extend_(e,i[e],!n||(!(e in n)||n[e]))}))})),e}var Qt=0;function Zt(){this.message="FLOW_CANCELLED"}Zt.prototype=Object.create(Error.prototype);var en=he("flow"),tn=he("flow.bound",{bound:!0}),nn=Object.assign((function(e,t){if(X(t))return en.decorate_20223_(e,t);if(T(t))return $(e,t,en);var n=e,r=n.name||"<unnamed flow>",i=function(){var e,t=arguments,i=++Qt,a=Ft(r+" - runid: "+i+" - init",n).apply(this,t),o=void 0,s=new Promise((function(t,n){var s=0;function c(e){var t;o=void 0;try{t=Ft(r+" - runid: "+i+" - yield "+s++,a.next).call(a,e)}catch(e){return n(e)}l(t)}function u(e){var t;o=void 0;try{t=Ft(r+" - runid: "+i+" - yield "+s++,a.throw).call(a,e)}catch(e){return n(e)}l(t)}function l(e){if(!E(null==e?void 0:e.then))return e.done?t(e.value):(o=Promise.resolve(e.value)).then(c,u);e.then(l,n)}e=n,c(void 0)}));return s.cancel=Ft(r+" - runid: "+i+" - cancel",(function(){try{o&&rn(o);var t=a.return(void 0),n=Promise.resolve(t.value);n.then(A,A),rn(n),e(new Zt)}catch(t){e(t)}})),s};return i.isMobXFlow=!0,i}),en);function rn(e){E(e.cancel)&&e.cancel()}function an(e){return!0===(null==e?void 0:e.isMobXFlow)}function on(e){return function(e,t){return!!e&&(void 0!==t?!!Xn(e)&&e[Q].values_.has(t):Xn(e)||!!e[Q]||ee(e)||Dt(e)||st(e))}(e)}function sn(e,t,n){return e.set(t,n),n}function cn(e,t){if(null==e||"object"!=typeof e||e instanceof Date||!on(e))return e;if(rt(e)||st(e))return cn(e.get(),t);if(t.has(e))return t.get(e);if(Dn(e)){var n=sn(t,e,new Array(e.length));return e.forEach((function(e,r){n[r]=cn(e,t)})),n}if(Kn(e)){var r=sn(t,e,new Set);return e.forEach((function(e){r.add(cn(e,t))})),r}if(Gn(e)){var i=sn(t,e,new Map);return e.forEach((function(e,n){i.set(n,cn(e,t))})),i}var a=sn(t,e,{});return function(e){if(Xn(e))return e[Q].ownKeys_();h(38)}(e).forEach((function(n){m.propertyIsEnumerable.call(e,n)&&(a[n]=cn(e[n],t))})),a}function un(e,t){return cn(e,new Map)}function ln(e,t){void 0===t&&(t=void 0),Et();try{return e.apply(t)}finally{Tt()}}function hn(e){return e[Q]}nn.bound=J(tn);var dn={has:function(e,t){return hn(e).has_(t)},get:function(e,t){return hn(e).get_(t)},set:function(e,t,n){var r;return!!T(t)&&(null==(r=hn(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!T(t)&&(null==(n=hn(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=hn(e).defineProperty_(t,n))||r},ownKeys:function(e){return hn(e).ownKeys_()},preventExtensions:function(e){h(13)}};function pn(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function fn(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),S((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function gn(e,t){var n=ft();try{for(var r=[].concat(e.interceptors_||[]),i=0,a=r.length;i<a&&((t=r[i](t))&&!t.type&&h(14),t);i++);return t}finally{gt(n)}}function vn(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function mn(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),S((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function _n(e,t){var n=ft(),r=e.changeListeners_;if(r){for(var i=0,a=(r=r.slice()).length;i<a;i++)r[i](t);gt(n)}}var yn=Symbol("mobx-keys");function bn(e,t,n){return C(e)?Xt(e,e,t,n):(pr((function(){var r=qn(e,n)[Q];if(!e[yn]){var i=Object.getPrototypeOf(e),a=new Set([].concat(j(e),j(i)));a.delete("constructor"),a.delete(Q),P(i,yn,a)}e[yn].forEach((function(e){return r.make_(e,!t||(!(e in t)||t[e]))}))})),e)}var wn="splice",On="update",Sn={get:function(e,t){var n=e[Q];return t===Q?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?M(Tn,t)?Tn[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[Q];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){h(15)}},An=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new Z(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return fn(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),mn(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&h("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&h(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&cr(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=_),pn(this)){var a=gn(this,{object:this.proxy_,type:wn,index:e,removedCount:t,added:n});if(!a)return _;t=a.removedCount,n=a.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var o=n.length-t;this.updateArrayLength_(i,o)}var s=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,s),this.dehanceValues_(s)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var i=this.values_.slice(e,e+t),a=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var o=0;o<n.length;o++)this.values_[e+o]=n[o];for(var s=0;s<a.length;s++)this.values_[e+n.length+s]=a[s];return i},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,i=vn(this),a=i||r?{observableKind:"array",object:this.proxy_,type:On,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),i&&_n(this,a)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,i=vn(this),a=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:wn,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&_n(this,a)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&h(17,e,n.length),e<n.length){this.atom_;var r=n[e];if(pn(this)){var i=gn(this,{type:On,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,r))!==r&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,r))}else{for(var a=new Array(e+1-n.length),o=0;o<a.length-1;o++)a[o]=void 0;a[a.length-1]=t,this.spliceWithArray_(n.length,0,a)}},e}();function En(e,t,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),O(),pr((function(){var i=new An(n,t,r,!1);R(i.values_,Q,i);var a=new Proxy(i.values_,Sn);return i.proxy_=a,e&&e.length&&i.spliceWithArray_(0,0,e),a}))}var Tn={clear:function(){return this.splice(0)},replace:function(e){var t=this[Q];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=this[Q];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[Q].spliceWithArray_(e,t,n)},push:function(){for(var e=this[Q],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[Q].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Q],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return wt.trackingDerivation&&h(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){wt.trackingDerivation&&h(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Q],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function kn(e,t){"function"==typeof Array.prototype[e]&&(Tn[e]=t(e))}function Cn(e){return function(){var t=this[Q];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function In(e){return function(t,n){var r=this,i=this[Q];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e]((function(e,i){return t.call(n,e,i,r)}))}}function Pn(e){return function(){var t=this,n=this[Q];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(e,n,r){return i(e,n,r,t)},r[e].apply(r,arguments)}}kn("at",Cn),kn("concat",Cn),kn("flat",Cn),kn("includes",Cn),kn("indexOf",Cn),kn("join",Cn),kn("lastIndexOf",Cn),kn("slice",Cn),kn("toString",Cn),kn("toLocaleString",Cn),kn("toSorted",Cn),kn("toSpliced",Cn),kn("with",Cn),kn("every",In),kn("filter",In),kn("find",In),kn("findIndex",In),kn("findLast",In),kn("findLastIndex",In),kn("flatMap",In),kn("forEach",In),kn("map",In),kn("some",In),kn("toReversed",In),kn("reduce",Pn),kn("reduceRight",Pn);var Rn,Ln,Nn=L("ObservableArrayAdministration",An);function Dn(e){return k(e)&&Nn(e[Q])}var xn={},jn="add",Un="delete";Rn=Symbol.iterator,Ln=Symbol.toStringTag;var Mn,Bn,Vn=function(){function e(e,t,n){var r=this;void 0===t&&(t=re),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Q]=xn,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,E(Map)||h(18),pr((function(){r.keysAtom_=te("ObservableMap.keys()"),r.data_=new Map,r.hasMap_=new Map,e&&r.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!wt.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new nt(this.has_(e),ie,"ObservableMap.key?",!1);this.hasMap_.set(e,r),Jt(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(pn(this)){var r=gn(this,{type:n?On:jn,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,pn(this))&&!gn(this,{type:Un,object:this,name:e}))return!1;if(this.has_(e)){var n=vn(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:Un,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return ln((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&_n(this,r),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==wt.UNCHANGED){var r=vn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:On,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&_n(this,i)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,ln((function(){var r,i=new nt(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,i),t=i.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=vn(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:jn,object:this,name:e,newValue:t}:null;r&&_n(this,i)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return _r({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},t.entries=function(){var e=this,t=this.keys();return _r({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},t[Rn]=function(){return this.entries()},t.forEach=function(e,t){for(var n,r=H(this);!(n=r()).done;){var i=n.value,a=i[0],o=i[1];e.call(t,o,a,this)}},t.merge=function(e){var t=this;return Gn(e)&&(e=new Map(e)),ln((function(){C(e)?function(e){var t=Object.keys(e);if(!x)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return m.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):N(e)?(e.constructor!==Map&&h(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&h(20,e)})),this},t.clear=function(){var e=this;ln((function(){pt((function(){for(var t,n=H(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.replace=function(e){var t=this;return ln((function(){for(var n,r=function(e){if(N(e)||Gn(e))return e;if(Array.isArray(e))return new Map(e);if(C(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return h(21,e)}(e),i=new Map,a=!1,o=H(t.data_.keys());!(n=o()).done;){var s=n.value;if(!r.has(s))if(t.delete(s))a=!0;else{var c=t.data_.get(s);i.set(s,c)}}for(var u,l=H(r.entries());!(u=l()).done;){var d=u.value,p=d[0],f=d[1],g=t.data_.has(p);if(t.set(p,f),t.data_.has(p)){var v=t.data_.get(p);i.set(p,v),g||(a=!0)}}if(!a)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var m=t.data_.keys(),_=i.keys(),y=m.next(),b=_.next();!y.done;){if(y.value!==b.value){t.keysAtom_.reportChanged();break}y=m.next(),b=_.next()}t.data_=i})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return mn(this,e)},t.intercept_=function(e){return fn(this,e)},G(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Ln,get:function(){return"Map"}}]),e}(),Gn=L("ObservableMap",Vn);var Fn={};Mn=Symbol.iterator,Bn=Symbol.toStringTag;var Yn=function(){function e(e,t,n){var r=this;void 0===t&&(t=re),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[Q]=Fn,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,E(Set)||h(22),this.enhancer_=function(e,r){return t(e,r,n)},pr((function(){r.atom_=te(r.name_),e&&r.replace(e)}))}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;ln((function(){pt((function(){for(var t,n=H(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.forEach=function(e,t){for(var n,r=H(this);!(n=r()).done;){var i=n.value;e.call(t,i,i,this)}},t.add=function(e){var t=this;if((this.atom_,pn(this))&&!gn(this,{type:jn,object:this,newValue:e}))return this;if(!this.has(e)){ln((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=vn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:jn,object:this,newValue:e}:null;n&&_n(this,r)}return this},t.delete=function(e){var t=this;if(pn(this)&&!gn(this,{type:Un,object:this,oldValue:e}))return!1;if(this.has(e)){var n=vn(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Un,object:this,oldValue:e}:null;return ln((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&_n(this,r),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return _r({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return _r({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return Kn(e)&&(e=new Set(e)),ln((function(){Array.isArray(e)||D(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&h("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return mn(this,e)},t.intercept_=function(e){return fn(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Mn]=function(){return this.values()},G(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Bn,get:function(){return"Set"}}]),e}(),Kn=L("ObservableSet",Yn),zn=Object.create(null),Wn="remove",Hn=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=Ee),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new Z("ObservableObject.keys"),this.isPlainObject_=C(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof ot)return n.set(t),!0;if(pn(this)){var r=gn(this,{type:On,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==wt.UNCHANGED){var i=vn(this),a=i?{type:On,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&_n(this,a)}return!0},t.get_=function(e){return wt.trackingDerivation&&!M(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),M(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!wt.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new nt(e in this.target_,ie,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[q])&&n[e])return;h(1,t.annotationType_,this.name_+"."+e.toString())}for(var r=this.target_;r&&r!==m;){var i=g(r,e);if(i){var a=t.make_(this,e,i,r);if(0===a)return;if(1===a)break}r=Object.getPrototypeOf(r)}Qn(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);var i=n.extend_(this,e,t,r);return i&&Qn(this,n,e),i},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{Et();var r=this.delete_(e);if(!r)return r;if(pn(this)){var i=gn(this,{object:this.proxy_||this.target_,name:e,type:jn,newValue:t.value});if(!i)return null;var a=i.newValue;t.value!==a&&(t=F({},t,{value:a}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else v(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{Tt()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1),this.keysAtom_;try{Et();var i=this.delete_(e);if(!i)return i;if(pn(this)){var a=gn(this,{object:this.proxy_||this.target_,name:e,type:jn,newValue:t});if(!a)return null;t=a.newValue}var o=$n(e),s={configurable:!wt.safeDescriptors||this.isPlainObject_,enumerable:!0,get:o.get,set:o.set};if(r){if(!Reflect.defineProperty(this.target_,e,s))return!1}else v(this.target_,e,s);var c=new nt(t,n,"ObservableObject.key",!1);this.values_.set(e,c),this.notifyPropertyAddition_(e,c.value_)}finally{Tt()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{Et();var r=this.delete_(e);if(!r)return r;if(pn(this))if(!gn(this,{object:this.proxy_||this.target_,name:e,type:jn,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=$n(e),a={configurable:!wt.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,e,a))return!1}else v(this.target_,e,a);this.values_.set(e,new ot(t)),this.notifyPropertyAddition_(e,void 0)}finally{Tt()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!M(this.target_,e))return!0;if(pn(this)&&!gn(this,{object:this.proxy_||this.target_,name:e,type:Wn}))return null;try{var n,r;Et();var i,a=vn(this),o=this.values_.get(e),s=void 0;if(!o&&a)s=null==(i=g(this.target_,e))?void 0:i.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(o&&(this.values_.delete(e),o instanceof nt&&(s=o.value_),Ct(o)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),a){var c={type:Wn,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:s,name:e};0,a&&_n(this,c)}}finally{Tt()}return!0},t.observe_=function(e,t){return mn(this,e)},t.intercept_=function(e){return fn(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,i=vn(this);if(i){var a=i?{type:jn,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;i&&_n(this,a)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),j(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function qn(e,t){var n;if(M(e,Q))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",i=new Hn(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:Te(e):void 0}(t));return P(e,Q,i),e}var Jn=L("ObservableObjectAdministration",Hn);function $n(e){return zn[e]||(zn[e]={get:function(){return this[Q].getObservablePropValue_(e)},set:function(t){return this[Q].setObservablePropValue_(e,t)}})}function Xn(e){return!!k(e)&&Jn(e[Q])}function Qn(e,t,n){var r;null==(r=e.target_[q])||delete r[n]}var Zn,er,tr=or(0),nr=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),rr=0,ir=function(){};Zn=ir,er=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Zn.prototype,er):void 0!==Zn.prototype.__proto__?Zn.prototype.__proto__=er:Zn.prototype=er;var ar=function(e,t,n){function r(t,n,r,i){var a;return void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),a=e.call(this)||this,pr((function(){var e=new An(r,n,i,!0);e.proxy_=z(a),R(z(a),Q,e),t&&t.length&&a.spliceWithArray(0,0,t),nr&&Object.defineProperty(z(a),"0",tr)})),a}Y(r,e);var i=r.prototype;return i.concat=function(){this[Q].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return Dn(e)?e.slice():e})))},i[n]=function(){var e=this,t=0;return _r({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},G(r,[{key:"length",get:function(){return this[Q].getArrayLength_()},set:function(e){this[Q].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(ir,Symbol.toStringTag,Symbol.iterator);function or(e){return{enumerable:!1,configurable:!0,get:function(){return this[Q].get_(e)},set:function(t){this[Q].set_(e,t)}}}function sr(e){v(ar.prototype,""+e,or(e))}function cr(e){if(e>rr){for(var t=rr;t<e+100;t++)sr(t);rr=e}}function ur(e,t,n){return new ar(e,t,n)}function lr(e,t){if("object"==typeof e&&null!==e){if(Dn(e))return void 0!==t&&h(23),e[Q].atom_;if(Kn(e))return e.atom_;if(Gn(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||h(25,t,dr(e)),n}if(Xn(e)){if(!t)return h(26);var r=e[Q].values_.get(t);return r||h(27,t,dr(e)),r}if(ee(e)||st(e)||Dt(e))return e}else if(E(e)&&Dt(e[Q]))return e[Q];h(28)}function hr(e,t){return e||h(29),void 0!==t?hr(lr(e,t)):ee(e)||st(e)||Dt(e)||Gn(e)||Kn(e)?e:e[Q]?e[Q]:void h(24,e)}function dr(e,t){var n;if(void 0!==t)n=lr(e,t);else{if(Kt(e))return e.name;n=Xn(e)||Gn(e)||Kn(e)?hr(e):lr(e)}return n.name_}function pr(e){var t=ft(),n=Ze(!0);Et();try{return e()}finally{Tt(),et(n),gt(t)}}Object.entries(Tn).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&P(ar.prototype,t,n)})),cr(1e3);var fr=m.toString;function gr(e,t,n){return void 0===n&&(n=-1),vr(e,t,n)}function vr(e,t,n,r,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof t)return!1;var o=fr.call(e);if(o!==fr.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=mr(e),t=mr(t);var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,u=t.constructor;if(c!==u&&!(E(c)&&c instanceof c&&E(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var l=(r=r||[]).length;l--;)if(r[l]===e)return i[l]===t;if(r.push(e),i.push(t),s){if((l=e.length)!==t.length)return!1;for(;l--;)if(!vr(e[l],t[l],n-1,r,i))return!1}else{var h,d=Object.keys(e);if(l=d.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!M(t,h=d[l])||!vr(e[h],t[h],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function mr(e){return Dn(e)?e.slice():N(e)||Gn(e)||D(e)||Kn(e)?Array.from(e.entries()):e}function _r(e){return e[Symbol.iterator]=yr,e}function yr(){return this}function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wr(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}["Symbol","Map","Set"].forEach((function(e){void 0===p()[e]&&h("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:dr},$mobx:Q});let Or=class{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}},Sr=class{static encode(e){var t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);var t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}};var Ar=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(!r.length)return t;var a=r.shift();if(Tr(t)&&Tr(a)){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(Tr(a[s])&&Tr(o[s])?o[s]=e(o[s],a[s]):Array.isArray(a[s])&&Array.isArray(o[s])?o[s]=Er(o[s],a[s]):o[s]=a[s]);return e(o,...r)}return e(t,...r)},Er=(e,t)=>{var n=[...t],r=((e,t)=>{if(e.hasOwnProperty("name")&&t.hasOwnProperty("name"))return"name";if(e.length>0&&t.length>0){var n,r=e[0],i=t[0],a=function(n){if(r.hasOwnProperty(n)&&i.hasOwnProperty(n)){var a=e.map((e=>e[n])),o=t.map((e=>e[n])),s=new Set(a),c=new Set(o);if("string"==typeof r[n]&&s.size===e.length&&c.size===t.length)return{v:n}}};for(var o in r)if(n=a(o))return n.v}return null})(e,t),i=t.map((e=>e[r])),a=e.map((e=>e[r])),o=[];for(var s in t[0])o.push(s);var c=[];for(var u in e[0])c.push(u);var l=c.filter((e=>!o.some((t=>t===e))));if(l.length>0)for(var h=function(t){for(var i=e.find((e=>e[r]===n[t][r])),a=0;a<l.length;a++)n[t][l[a]]=i[l[a]]},d=0;d<n.length;d++)h(d);return a.filter((e=>!i.some((t=>t===e)))).forEach((t=>{var i=e.find((e=>{if(e[r]===t)return!0})),a=e.findIndex((e=>e===i)),o=e[a-1>=0?a-1:a][r],s=n.findIndex((e=>e[r]===o));n.splice(s+1,0,i)})),n},Tr=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),kr="local";let Cr=class extends Or{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(this._event&&t===this._syncType&&this._keys.has(Object.keys(e)[0])){var n=JSON.parse(Sr.decode(Object.values(e)[0].newValue));this._event(n)}}))}onUpdate(e){this._event=e}store(e,t,n){var r=this;return new Promise(function(){var n=l((function*(n,i){try{if("none"===r._syncType)return void n(!0);var a=Sr.encode(t),o=yield r._retrieve(e,r._syncType);if(o&&o[e]===a)return void n(!0);r._store(e,a,r._syncType),r._keys.add(e),n(!0)}catch(e){i(e)}}));return function(e,t){return n.apply(this,arguments)}}())}retrieve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;return new Promise(function(){var r=l((function*(r,i){try{if("none"===n._syncType)return void r(t);var a={};if(Object.keys(e).length>0){var o=yield n._retrieve(e,n._syncType);if(o){if(a=Sr.decode(o[e]),n._keys.add(e),!t)return void r(JSON.parse(a));r(Ar(t,JSON.parse(a)))}else n._keys.add(e),r(t)}else n._keys.add(e),r(t)}catch(e){i(e)}}));return function(e,t){return r.apply(this,arguments)}}())}remove(e){var t=this;return new Promise(function(){var n=l((function*(n,r){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){yield t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){r(e)}}));return function(e,t){return n.apply(this,arguments)}}())}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,r)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}},Ir=class extends EventTarget{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kr,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];super(),this.isInitialised=!1,this._instance!==this&&(this._instance=this,this.state=e,this.storageType=t,this.storageKey=n,this.merge=r,this._persistentStore=null,this._persistOn=i)}initialise(){var e=this;return l((function*(){return new Promise(function(){var t=l((function*(t,n){if(!0===e.isInitialised)t(e.state);else if(null===e._persistentStore){e._persistentStore=new Cr(e.storageType),e._persistentStore.onUpdate(function(){var t=l((function*(t){JSON.stringify(e.state)!==JSON.stringify(t)&&(e.state=t)}));return function(e){return t.apply(this,arguments)}}());var r=yield e._persistentStore.retrieve(e.storageKey,un(e.state));e.state&&(e.state=r),bn(e),e._startAutoSaving(e,e.storageKey),t(r),e.isInitialised=!0}else bn(e),t(e.state),e.isInitialised=!0}));return function(e,n){return t.apply(this,arguments)}}())}))()}waitForInit(){var e=this;return l((function*(){if(!0===e.isInitialised)return!0;if(!1===e.isInitialised){for(;!0!==e.isInitialised;)yield new Promise((e=>{setTimeout(e,100)}));return!0}return!1}))()}set persist(e){this._persistOn=e,e&&this.save()}save(){this._storeOnSave(this,this.storageKey,!0)}get stateJSON(){return un(this.state)}get initialStateJSON(){return un(this.initialState)}_startAutoSaving(e,t){var n=this;zt(l((function*(){n._storeOnSave(e,t),n.dispatchEvent(new CustomEvent("onStoreUpdated"))})))}_storeOnSave(e,t){var n=arguments,r=this;return l((function*(){var i=n.length>2&&void 0!==n[2]&&n[2];(r._persistOn||i)&&(yield r._persistentStore.store(t,un(e.state),r.merge))}))()}};var Pr=1,Rr=2,Lr=3,Nr=4,Dr=5,xr=6,jr=7,Ur=8;class Mr extends EventTarget{constructor(){super(),this.FRAMEKEY="texthelp-cfe-9828",this.SESSIONKEY="texthelp-cfe-9829",this._frameId=null,this._sessionId=null}getSessionId(){return l((function*(){return new Promise(((e,t)=>{"undefined"!=typeof window?chrome.runtime.sendMessage({command:"th-getWindowId"},(t=>{chrome.runtime.lastError,e(null==t?"serviceworkerId":t.toString())})):e("serviceworkerId")}))}))()}initialise(){var e=this;return l((function*(){return new Promise(function(){var t=l((function*(t,n){e._frameId=Mr.getGuid(),e._sessionId=yield e.getSessionId(),chrome.storage.onChanged.addListener(((t,n)=>{var r=function(){if(i==e.FRAMEKEY){var n=JSON.parse(t[e.FRAMEKEY].newValue);switch(n.data.source={},n.data.source.sessionId=n.sessionId,n.data.source.frameId=n.frameId,n.type){case jr:"undefined"!=typeof WorkerGlobalScope&&"function"==typeof importScripts&&navigator instanceof WorkerNavigator&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case Pr:e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case Lr:n.sessionId===e._sessionId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case Rr:chrome.storage.local.get(["activeFrame"],function(){var t=l((function*(t){t.activeFrame&&t.activeFrame===e._frameId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}))}));return function(e){return t.apply(this,arguments)}}());break;case Nr:chrome.storage.local.get(["activeFrame"],function(){var t=l((function*(t){t.activeFrame&&t.activeFrame===e._frameId&&n.sessionId===e._sessionId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}))}));return function(e){return t.apply(this,arguments)}}());break;case Dr:"undefined"!=typeof window&&window.self===window.top&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case xr:"undefined"!=typeof window&&window.self===window.top&&n.sessionId===e._sessionId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}));break;case Ur:n.sessionId===e._sessionId&&n.frameId===e._frameId&&e.dispatchEvent(new CustomEvent(n.name,{detail:n.data}))}}};for(var i in t)r()})),t({frameId:e._frameId,sessionId:e._sessionId})}));return function(e,n){return t.apply(this,arguments)}}())}))()}dispatchStorageEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rr,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._sessionId,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._frameId;try{var a={name:e,time:Date.now(),type:t,data:n,sessionId:r,frameId:i};chrome.storage.local.set({[this.FRAMEKEY]:JSON.stringify(a)})}catch(e){}}static getGuid(){var e=function(){return Math.floor(65536*Math.random()).toString(16)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}function Br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vr(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Gr=class{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}},Fr=class{static encode(e){const t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);const t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}};const Yr=(e,...t)=>{if(!t.length)return e;const n=t.shift();if(zr(e)&&zr(n)){const r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(n),!0).forEach((function(t){Vr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(zr(n[e])&&zr(r[e])?r[e]=Yr(r[e],n[e]):Array.isArray(n[e])&&Array.isArray(r[e])?r[e]=Kr(r[e],n[e]):r[e]=n[e]);return Yr(r,...t)}return Yr(e,...t)},Kr=(e,t)=>{let n=[...t];const r=((e,t)=>{if(e.hasOwnProperty("name")&&t.hasOwnProperty("name"))return"name";if(e.length>0&&t.length>0){const n=e[0],r=t[0];for(const i in n)if(n.hasOwnProperty(i)&&r.hasOwnProperty(i)){const r=e.map((e=>e[i])),a=t.map((e=>e[i])),o=new Set(r),s=new Set(a);if("string"==typeof n[i]&&o.size===e.length&&s.size===t.length)return i}}return null})(e,t),i=t.map((e=>e[r])),a=e.map((e=>e[r]));let o=[];for(let e in t[0])o.push(e);let s=[];for(let t in e[0])s.push(t);let c=s.filter((e=>!o.some((t=>t===e))));if(c.length>0)for(let t=0;t<n.length;t++){let i=e.find((e=>e[r]===n[t][r]));for(let e=0;e<c.length;e++)n[t][c[e]]=i[c[e]]}return a.filter((e=>!i.some((t=>t===e)))).forEach((t=>{const i=e.find((e=>{if(e[r]===t)return!0})),a=e.findIndex((e=>e===i)),o=e[a-1>=0?a-1:a][r],s=n.findIndex((e=>e[r]===o));n.splice(s+1,0,i)})),n},zr=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),Wr="sync",Hr="local";let qr=class extends Gr{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(!this._event)return;if(t!==this._syncType)return;if(!this._keys.has(Object.keys(e)[0]))return;let n=JSON.parse(Fr.decode(Object.values(e)[0].newValue));this._event(n)}))}onUpdate(e){this._event=e}store(e,t,n){var r=this;return new Promise((async function(n,i){try{if("none"===r._syncType)return void n(!0);const i=Fr.encode(t),a=await r._retrieve(e,r._syncType);if(a&&a[e]===i)return void n(!0);r._store(e,i,r._syncType),r._keys.add(e),n(!0)}catch(e){i(e)}}))}retrieve(e,t=null){var n=this;return new Promise((async function(r,i){try{if("none"===n._syncType)return void r(t);let i={};if(Object.keys(e).length>0){let a=await n._retrieve(e,n._syncType);if(a){if(i=Fr.decode(a[e]),n._keys.add(e),!t)return void r(JSON.parse(i));r(Yr(t,JSON.parse(i)))}else n._keys.add(e),r(t)}else n._keys.add(e),r(t)}catch(e){i(e)}}))}remove(e){var t=this;return new Promise((async function(n,r){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){await t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){r(e)}}))}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,r)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}};const Jr=Object.freeze({PLAY:"play",PAUSE:"pause",STOP:"stop",PREDICTION:"prediction",DICTIONARY:"dictionary",PICTUREDICTIONARY:"picturedictionary",SCREENSHOTREADER:"screenshotreader",AUDIOMAKER:"audiomaker",WEBSEARCH:"websearch",SCREENMASKING:"screenmasking",TALKANDTYPE:"talkandtype",TRANSLATOR:"translator",STUDYBLUE:"studyblue",STUDYPINK:"studypink",STUDYYELLOW:"studyyellow",STUDYGREEN:"studygreen",STUDYCLEAR:"studyclear",STUDYCOLLECT:"studycollect",VOCABLIST:"vocablist",VOICENOTE:"voicenote",CHECKIT:"checkit",PRACTICEREADINGALOUD:"practicereadingaloud",CLICKTOSPEAK:"clicktospeak",SIMPLIFY:"simplify",REWORDIFY:"rewordify"}),$r=Object.freeze({TOP:"docked-top",FLOAT:"float",SELECTOR:"selector"});Object.freeze({"https://docs.google.com/document/*https://assignments.google.com*":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.VOICENOTE,Jr.CHECKIT,Jr.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/document/*edit":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.VOICENOTE,Jr.CHECKIT,Jr.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/document/*preview*":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.VOICENOTE,Jr.CHECKIT,Jr.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/document/*pub":{dock:$r.FLOAT,supported:[Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/document/*classroom.google.com":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.VOICENOTE,Jr.CHECKIT,Jr.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/presentation/*edit":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.VOICENOTE,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/forms/*edit":{dock:$r.FLOAT,supported:[Jr.PREDICTION,Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/forms/*startquiz":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,"settings","help","logo","optionsmenu","minimise","maximise","options-menuitem"]},"https://docs.google.com/forms/*viewform":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/forms/*formresponse":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://onedrive.live.com/redir*":{dock:$r.SELECTOR,selector:["#WacFrame_Word_0","#WebApplicationFrame[allow*=UKC-word-edit]","#WebApplicationFrame[allow*=UKC-onenote]","#WebApplicationFrame[allow*=onenote]"],supported:[Jr.PREDICTION,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://onedrive.live.com/edit.aspx*":{dock:$r.SELECTOR,selector:["#WacFrame_Word_0","#WebApplicationFrame[allow*=UKC-word-edit]","#WebApplicationFrame[allow*=UKC-onenote]","#WebApplicationFrame[allow*=onenote]"],supported:[Jr.PREDICTION,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://onedrive.live.com/edit?*":{dock:$r.SELECTOR,selector:["#WacFrame_Word_0","#WebApplicationFrame[allow*=UKC-word-edit]","#WebApplicationFrame[allow*=UKC-onenote]","#WebApplicationFrame[allow*=onenote]"],supported:[Jr.PREDICTION,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://docs.google.com/forms/*":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*word-edit.officeapps.live.com":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.sharepoint.com/:w:/*":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.sharepoint.com/:o:/*":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.sharepoint.com/*doc.aspx*":{dock:$r.SELECTOR,selector:["#WacFrame_Word_0","#WebApplicationFrame[allow*=UKC-word-edit]","#WebApplicationFrame[allow*=UKC-onenote]"],supported:[Jr.PREDICTION,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.sharepoint.com/*doc.aspx*.xls*":{dock:$r.FLOAT,supported:[Jr.PREDICTION,Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.SIMPLIFY,Jr.REWORDIFY,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*onenote.officeapps.live.com/o/onenoteframe.aspx":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://reading.texthelp.com/readwrite":{dock:$r.TOP,supported:[Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TRANSLATOR,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://fluency.texthelp.com/readwrite":{dock:$r.TOP,supported:[Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TRANSLATOR,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://pra.dev.texthelp.com/*":{dock:$r.TOP,supported:[Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TRANSLATOR,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://pra.texthelp.com/*":{dock:$r.TOP,supported:[Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TRANSLATOR,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"http://localhost:10901/*":{dock:$r.TOP,supported:[Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TRANSLATOR,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://newsela.com/":{dock:$r.FLOAT,supported:[Jr.PREDICTION,Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.SIMPLIFY,Jr.REWORDIFY,"settings","help","logo","optionsmenu","close","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://www.dogonews.com":{dock:$r.FLOAT,supported:[Jr.PREDICTION,Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.SIMPLIFY,Jr.REWORDIFY,"settings","help","logo","optionsmenu","close","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://rw4gc-simplify.texthelp.com":{dock:$r.TOP,supported:[Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.PRACTICEREADINGALOUD,Jr.REWORDIFY,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://rw4gc-simplify-qa.texthelp.com":{dock:$r.TOP,supported:[Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.PRACTICEREADINGALOUD,Jr.REWORDIFY,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://rw4gc-simplify.dev.texthelp.com":{dock:$r.TOP,supported:[Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.PRACTICEREADINGALOUD,Jr.REWORDIFY,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://epub.texthelp.com/":{dock:$r.TOP,supported:[Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://rw4gc-epub-qa.texthelp.com/":{dock:$r.TOP,supported:[Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://epub.dev.texthelp.com":{dock:$r.TOP,supported:[Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,"settings","help","logo","optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.instructure.com":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.SIMPLIFY,Jr.REWORDIFY,Jr.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},"https://*.awinfosys.com":{dock:$r.TOP,supported:[Jr.PREDICTION,Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.SIMPLIFY,Jr.REWORDIFY,Jr.PRACTICEREADINGALOUD,"optionsmenu","close","minimise","maximise","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]},default:{dock:$r.FLOAT,supported:[Jr.PLAY,Jr.PAUSE,Jr.STOP,Jr.PREDICTION,Jr.CLICKTOSPEAK,Jr.DICTIONARY,Jr.PICTUREDICTIONARY,Jr.SCREENSHOTREADER,Jr.AUDIOMAKER,Jr.WEBSEARCH,Jr.SCREENMASKING,Jr.TALKANDTYPE,Jr.TRANSLATOR,Jr.STUDYBLUE,Jr.STUDYPINK,Jr.STUDYYELLOW,Jr.STUDYGREEN,Jr.STUDYCLEAR,Jr.STUDYCOLLECT,Jr.VOCABLIST,Jr.SIMPLIFY,Jr.REWORDIFY,Jr.PRACTICEREADINGALOUD,"settings","help","logo","optionsmenu","close","options-menuitem","help-menuitem","feedback-menuitem","texthelp-menuitem"]}});const Xr=Object.freeze({GROUP:"group",DOMAIN:"domain",SINGLE:"single"}),Qr=Object.freeze({FREEMIUM:"freemium",PREMIUM:"premium",TRIAL:"trial"});const Zr=new class extends Ir{constructor(){const e=new Date;e.setDate(e.getDate()-1);const t={audiomaker:!1,checkit:!1,dictionary:!1,studyclear:!1,picturedictionary:!1,play:!0,practicereadingaloud:!0,prediction:!1,screenmasking:!1,screenshotreader:!1,simplify:!1,rewordify:!1,talkandtype:!1,translator:!0,vocablist:!1,websearch:!1,studyyellow:!1,studygreen:!1,studyblue:!1,studypink:!1,studycollect:!1,pause:!0,stop:!0,clicktospeak:!0,voicenote:!1},n={lastupdated:void 0,licensetype:Xr.SINGLE,licensesubscription:Qr.FREEMIUM,expiry:e.toISOString().split("T")[0],authcode:void 0,features:t,meta:{},bytebotLicenseEnabled:!1};super({license:{lastupdated:void 0,licensetype:Xr.SINGLE,licensesubscription:Qr.FREEMIUM,expiry:e.toISOString().split("T")[0],authcode:void 0,features:t,market:"education",meta:{},bytebotLicenseEnabled:!1},lastlicense:void 0},Hr,"th.rw4gc.license.store",!1,!0),this.defaultFeatures=t,this.defaultLicense=n,this.bytebotEnabledFeatures={audiomaker:!0,checkit:!0,dictionary:!0,studyclear:!0,picturedictionary:!0,play:!0,practicereadingaloud:!0,prediction:!0,screenmasking:!0,screenshotreader:!0,simplify:!0,rewordify:!0,talkandtype:!0,translator:!0,vocablist:!0,websearch:!0,studyyellow:!0,studygreen:!0,studyblue:!0,studypink:!0,studycollect:!0,pause:!0,stop:!0,clicktospeak:!0,voicenote:!0}}set license(e){let t=JSON.stringify(e,((e,t)=>"currentDateTime"===e||"lastUpdated"===e?"null":t));if(this.state.lastlicense&&this.state.lastlicense===t)return;this.state.lastlicense=t;let n=!1;void 0!==e.trial&&(n=e.trial);let r=!1;void 0!==e.unlimited&&(r=e.unlimited),e.licensesubscription=Qr.FREEMIUM,e.licensetype=Xr.SINGLE,e.daysleft>0&&!n?e.licensesubscription=Qr.PREMIUM:e.daysleft>0&&n&&(e.licensesubscription=Qr.TRIAL),r?e.licensetype=Xr.DOMAIN:"group"==e.licence_type.toLowerCase()&&(e.licensetype=Xr.GROUP),this.state.license=e,this._mapLicense(e)}set authcode(e){void 0!==e&&(this.state.license.authcode=e)}get nextDay(){const e=new Date,t=1e4*e.getFullYear()+100*e.getMonth()+e.getDate(),n=this.state.license.expiry;return 1e4*n.getFullYear()+100*n.getMonth()+n.getDate()!==t}get lastUpdate(){return this.state.license.lastupdated?this.state.license.lastupdated.toString().split("T")[0]:void 0}get licenseObject(){return e({},this.state.license)}resetLicense(){this.state.lastlicense=void 0,this.state.license=JSON.parse(JSON.stringify(this.defaultLicense))}_mapLicense(t){let n={"Check It":Jr.CHECKIT,Prediction:Jr.PREDICTION,Dictionary:Jr.DICTIONARY,"Picture Dictionary":Jr.PICTUREDICTIONARY,Play:Jr.PLAY,"Screenshot Reader":Jr.SCREENSHOTREADER,"Audio Maker":Jr.AUDIOMAKER,"Screen Masking":Jr.SCREENMASKING,"Web Search":Jr.WEBSEARCH,"Talk&Type":Jr.TALKANDTYPE,Translator:Jr.TRANSLATOR,"Vocabulary List":Jr.VOCABLIST,"Voice Note":Jr.VOICENOTE,"Simplify Page":Jr.SIMPLIFY,Rewordify:Jr.REWORDIFY,"Practice Reading Aloud":Jr.PRACTICEREADINGALOUD,"Erase Highlights":Jr.STUDYCLEAR},r=t.features,i=Object.keys(r).reduce(((e,t)=>(void 0!==n[t]&&(e[n[t]]=r[t]),e)),{}),a=e({},this.defaultFeatures,i);void 0===r.Highlights&&(r.Highlights=!1),a[Jr.STUDYYELLOW]=r.Highlights,a[Jr.STUDYGREEN]=r.Highlights,a[Jr.STUDYBLUE]=r.Highlights,a[Jr.STUDYPINK]=r.Highlights,a[Jr.STUDYCOLLECT]=r.Highlights,a[Jr.STUDYCLEAR]=r.Highlights,void 0===r.Play&&(r.Play=!0),a[Jr.PAUSE]=r.Play,a[Jr.STOP]=r.Play,a[Jr.CLICKTOSPEAK]=r.Play,void 0===r["Practice Reading Aloud"]&&(a[Jr.PRACTICEREADINGALOUD]=!0),void 0===r.Translator&&(a[Jr.TRANSLATOR]=!0),this.state.license.features=JSON.parse(JSON.stringify(a))}setBytebotLicensed(e=!1){this.state.license.bytebotLicenseEnabled=e,this.state.license.bytebotDate=new Date,this.state.license.features=e?this.bytebotEnabledFeatures:this.defaultFeatures}};const ei=new class extends Ir{constructor(){const e={audiomaker:!0,checkit:!0,dictionary:!0,studyclear:!0,picturedictionary:!0,play:!0,practicereadingaloud:!0,prediction:!0,screenmasking:!0,screenshotreader:!0,simplify:!0,rewordify:!0,talkandtype:!0,translator:!0,vocablist:!0,websearch:!0,studyyellow:!0,studygreen:!0,studyblue:!0,studypink:!0,studycollect:!0,pause:!0,stop:!0,clicktospeak:!0,voicenote:!0};super({features:e},Hr,"th.rw4gc.datadesk.store"),this.defaultFeatures=e}set features(e){this._mapFeatures(e)}resetFeatures(){this.state.features=this.defaultFeatures}_mapFeatures(e){let t={"Check It":Jr.CHECKIT,Prediction:Jr.PREDICTION,Dictionary:Jr.DICTIONARY,"Picture Dictionary":Jr.PICTUREDICTIONARY,"Hover Speech":Jr.CLICKTOSPEAK,Play:Jr.PLAY,"Screenshot Reader":Jr.SCREENSHOTREADER,"Audio Maker":Jr.AUDIOMAKER,"Screen Masking":Jr.SCREENMASKING,"Web Search":Jr.WEBSEARCH,"Talk&Type":Jr.TALKANDTYPE,Translator:Jr.TRANSLATOR,"Vocabulary List":Jr.VOCABLIST,"Simplify Page":Jr.SIMPLIFY,Rewordify:Jr.REWORDIFY,"Practice Reading Aloud":Jr.PRACTICEREADINGALOUD,"Erase Highlights":Jr.STUDYCLEAR,"Voice Note":Jr.VOICENOTE},n=JSON.parse(JSON.stringify(this.defaultFeatures)),r=Object.keys(e).reduce(((n,r)=>(void 0!==t[r]&&(n[t[r]]=this._parseBoolean(e[r])),n)),{});Object.keys(r).forEach((e=>{n[e]=r[e]}));let i=!1;i=void 0===e.Highlights||this._parseBoolean(e.Highlights),n[Jr.STUDYYELLOW]=i,n[Jr.STUDYGREEN]=i,n[Jr.STUDYBLUE]=i,n[Jr.STUDYPINK]=i,n[Jr.STUDYCOLLECT]=i,n[Jr.STUDYCLEAR]=i,i=void 0===e.Play||this._parseBoolean(e.Play),n[Jr.PAUSE]=i,n[Jr.STOP]=i,this.state.features=n}_parseBoolean(e){switch(e){case!0:case"true":case 1:case"1":case"on":case"yes":return!0;default:return!1}}};const ti=new class extends Ir{constructor(){super({market:"education",notificationVersion:20230910,showNotification:!1,onBoardingFinished:!1,driveInstall:!1,notificationVersion:0},Wr,"th.rw4gc.Application.store")}setNotificationVersion(e){this.state.notificationVersion!==e&&(this.state.notificationVersion=e)}setShowNotification(e){this.state.showNotification!==e&&(this.state.showNotification=e)}setMarket(e){this.state.market!==e&&(this.state.market=e)}setOnBoardingFinished(e){this.state.onBoardingFinished!==e&&(this.state.onBoardingFinished=e)}setMarketAndOnBoardingFinished(t,n){if(this.state.market!==t){this.state.market=t;let r=e({},this.state);r.market=t,r.onBoardingFinished=n,this.state=r}else if(this.state.onBoardingFinished!==n){this.state.market=t;let r=e({},this.state);r.market=t,r.onBoardingFinished=n,this.state=r}}setDriveInstall(e){this.state.driveInstall=e}setNotifcationVersion(e){this.state.notificationVersion=e}};const ni=new class extends Ir{constructor(){super({extensionUpdate:!1,licenseType:"Default",accounts:{email:"",google:!0,microsoft:!1,nyc:!1}},Hr,"th.rw4gc.Application.local.store")}setLicenseType(e){this.state.licenseType!==e&&(this.state.licenseType=e)}setLoginType(e){"google"===(e=e.toLowerCase())&&(this.state.accounts.google=!0,this.state.accounts.microsoft=!1,this.state.accounts.nyc=!1),"microsoft"===e&&(this.state.accounts.microsoft=!0,this.state.accounts.google=!1,this.state.accounts.nyc=!1),"nyc"===e&&(this.state.accounts.microsoft=!1,this.state.accounts.google=!1,this.state.accounts.nyc=!0)}setExtensionUpdate(e){this.state.extensionUpdate!==e&&(this.state.extensionUpdate=e)}resetUser(e){this.state.accounts.email=e,this.save()}};function ri(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var ii={};function ai(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:ii}var oi=Object.assign,si=Object.getOwnPropertyDescriptor,ci=Object.defineProperty,ui=Object.prototype,li=[];Object.freeze(li);var hi={};Object.freeze(hi);var di="undefined"!=typeof Proxy,pi=Object.toString();function fi(){di||ri("Proxy not available")}function gi(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var vi=function(){};function mi(e){return"function"==typeof e}function _i(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function yi(e){return null!==e&&"object"==typeof e}function bi(e){if(!yi(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===pi}function wi(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function Oi(e,t,n){ci(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Si(e,t,n){ci(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Ai(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return yi(e)&&!0===e[n]}}function Ei(e){return e instanceof Map}function Ti(e){return e instanceof Set}var ki=void 0!==Object.getOwnPropertySymbols;var Ci="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:ki?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function Ii(e){return null===e?null:"object"==typeof e?""+e:e}function Pi(e,t){return ui.hasOwnProperty.call(e,t)}var Ri=Object.getOwnPropertyDescriptors||function(e){var t={};return Ci(e).forEach((function(n){t[n]=si(e,n)})),t};function Li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?a:String(a)),r)}var i,a}function Ni(e,t,n){return t&&Li(e.prototype,t),n&&Li(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Di(){return Di=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Di.apply(this,arguments)}function xi(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ji(e,t)}function ji(e,t){return ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ji(e,t)}function Ui(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bi(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Mi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Vi=Symbol("mobx-stored-annotations");function Gi(e){return Object.assign((function(t,n){if(Yi(n))return e.decorate_20223_(t,n);Fi(t,n,e)}),e)}function Fi(e,t,n){Pi(e,Vi)||Oi(e,Vi,Di({},e[Vi])),function(e){return e.annotationType_===Xi}(n)||(e[Vi][t]=n)}function Yi(e){return"object"==typeof e&&"string"==typeof e.kind}var Ki=Symbol("mobx administration"),zi=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=$a.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return bo(this)},t.reportChanged=function(){_o(),wo(this),yo()},t.toString=function(){return this.name_},e}(),Wi=Ai("Atom",zi);function Hi(e,t,n){void 0===t&&(t=vi),void 0===n&&(n=vi);var r,i=new zi(e);return t!==vi&&Yo(Vo,i,t,r),n!==vi&&Fo(i,n),i}var qi={identity:function(e,t){return e===t},structural:function(e,t){return ac(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return ac(e,t,1)}};function Ji(e,t,n){return Qo(e)?e:Array.isArray(e)?Da.array(e,{name:n}):bi(e)?Da.object(e,void 0,{name:n}):Ei(e)?Da.map(e,{name:n}):Ti(e)?Da.set(e,{name:n}):"function"!=typeof e||Uo(e)||Xo(e)?e:wi(e)?Jo(e):jo(n,e)}function $i(e){return e}var Xi="override";function Qi(e,t){return{annotationType_:e,options_:t,make_:Zi,extend_:ea,decorate_20223_:ta}}function Zi(e,t,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Uo(n.value))return 1;var a=na(e,this,t,n,!1);return ci(r,t,a),2}function ea(e,t,n,r){var i=na(e,this,t,n);return e.defineProperty_(t,i,r)}function ta(e,t){var n=t.kind,r=t.name,i=t.addInitializer,a=this;if("field"!=n){var o,s,c,u,l,h;if("method"==n)return Uo(e)||(s=e,e=Ka(null!=(c=null==(u=a.options_)?void 0:u.name)?c:r.toString(),s,null!=(l=null==(h=a.options_)?void 0:h.autoAction)&&l)),null!=(o=this.options_)&&o.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobxAction=!0,e[r]=t})),e;ri("Cannot apply '"+a.annotationType_+"' to '"+String(r)+"' (kind: "+n+"):\n'"+a.annotationType_+"' can only be used on properties with a function value.")}else i((function(){Fi(this,r,a)}))}function na(e,t,n,r,i){var a,o,s,c,u,l,h,d;void 0===i&&(i=fo.safeDescriptors),d=r,t.annotationType_,d.value;var p,f=r.value;null!=(a=t.options_)&&a.bound&&(f=f.bind(null!=(p=e.proxy_)?p:e.target_));return{value:Ka(null!=(o=null==(s=t.options_)?void 0:s.name)?o:n.toString(),f,null!=(c=null==(u=t.options_)?void 0:u.autoAction)&&c,null!=(l=t.options_)&&l.bound?null!=(h=e.proxy_)?h:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function ra(e,t){return{annotationType_:e,options_:t,make_:ia,extend_:aa,decorate_20223_:oa}}function ia(e,t,n,r){var i;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!Pi(e.target_,t)||!Xo(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(Xo(n.value))return 1;var a=sa(e,this,t,n,!1,!1);return ci(r,t,a),2}function aa(e,t,n,r){var i,a=sa(e,this,t,n,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,a,r)}function oa(e,t){var n,r=t.name,i=t.addInitializer;return Xo(e)||(e=Jo(e)),null!=(n=this.options_)&&n.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobXFlow=!0,e[r]=t})),e}function sa(e,t,n,r,i,a){var o;void 0===a&&(a=fo.safeDescriptors),o=r,t.annotationType_,o.value;var s,c=r.value;(Xo(c)||(c=Jo(c)),i)&&((c=c.bind(null!=(s=e.proxy_)?s:e.target_)).isMobXFlow=!0);return{value:c,configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function ca(e,t){return{annotationType_:e,options_:t,make_:ua,extend_:la,decorate_20223_:ha}}function ua(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function la(e,t,n,r){var i;return i=n,this.annotationType_,i.get,e.defineComputedProperty_(t,Di({},this.options_,{get:n.get,set:n.set}),r)}function ha(e,t){var n=this,r=t.name;return(0,t.addInitializer)((function(){var t=Vs(this)[Ki],i=Di({},n.options_,{get:e,context:this});i.name||(i.name="ObservableObject."+r.toString()),t.values_.set(r,new Qa(i))})),function(){return this[Ki].getObservablePropValue_(r)}}function da(e,t){return{annotationType_:e,options_:t,make_:pa,extend_:fa,decorate_20223_:ga}}function pa(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function fa(e,t,n,r){var i,a;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(i=null==(a=this.options_)?void 0:a.enhancer)?i:Ji,r)}function ga(e,t){var n=this,r=t.kind,i=t.name,a=new WeakSet;function o(e,t){var r,o,s=Vs(e)[Ki],c=new qa(t,null!=(r=null==(o=n.options_)?void 0:o.enhancer)?r:Ji,"ObservableObject."+i.toString(),!1);s.values_.set(i,c),a.add(e)}if("accessor"==r)return{get:function(){return a.has(this)||o(this,e.get.call(this)),this[Ki].getObservablePropValue_(i)},set:function(e){return a.has(this)||o(this,e),this[Ki].setObservablePropValue_(i,e)},init:function(e){return a.has(this)||o(this,e),e}}}var va="true",ma=_a();function _a(e){return{annotationType_:va,options_:e,make_:ya,extend_:ba,decorate_20223_:wa}}function ya(e,t,n,r){var i,a,o,s;if(n.get)return Ma.make_(e,t,n,r);if(n.set){var c=Ka(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!fo.safeDescriptors||e.isPlainObject_,set:c})?0:2:(ci(r,t,{configurable:!0,set:c}),2)}if(r!==e.target_&&"function"==typeof n.value)return wi(n.value)?(null!=(s=this.options_)&&s.autoBind?Jo.bound:Jo).make_(e,t,n,r):(null!=(o=this.options_)&&o.autoBind?jo.bound:jo).make_(e,t,n,r);var u,l=!1===(null==(i=this.options_)?void 0:i.deep)?Da.ref:Da;"function"==typeof n.value&&null!=(a=this.options_)&&a.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return l.make_(e,t,n,r)}function ba(e,t,n,r){var i,a,o;if(n.get)return Ma.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!fo.safeDescriptors||e.isPlainObject_,set:Ka(t.toString(),n.set)},r);"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(o=e.proxy_)?o:e.target_));return(!1===(null==(a=this.options_)?void 0:a.deep)?Da.ref:Da).extend_(e,t,n,r)}function wa(e,t){ri("'"+this.annotationType_+"' cannot be used as a decorator")}var Oa={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Sa(e){return e||Oa}Object.freeze(Oa);var Aa=da("observable"),Ea=da("observable.ref",{enhancer:$i}),Ta=da("observable.shallow",{enhancer:function(e,t,n){return null==e||Ys(e)||Ts(e)||Ns(e)||js(e)?e:Array.isArray(e)?Da.array(e,{name:n,deep:!1}):bi(e)?Da.object(e,void 0,{name:n,deep:!1}):Ei(e)?Da.map(e,{name:n,deep:!1}):Ti(e)?Da.set(e,{name:n,deep:!1}):void 0}}),ka=da("observable.struct",{enhancer:function(e,t){return ac(e,t)?t:e}}),Ca=Gi(Aa);function Ia(e){return!0===e.deep?Ji:!1===e.deep?$i:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:Ji;var t,n,r}function Pa(e,t,n){return Yi(t)?Aa.decorate_20223_(e,t):_i(t)?void Fi(e,t,Aa):Qo(e)?e:bi(e)?Da.object(e,t,n):Array.isArray(e)?Da.array(e,t):Ei(e)?Da.map(e,t):Ti(e)?Da.set(e,t):"object"==typeof e&&null!==e?e:Da.box(e,t)}oi(Pa,Ca);var Ra,La,Na={box:function(e,t){var n=Sa(t);return new qa(e,Ia(n),n.name,!0,n.equals)},array:function(e,t){var n=Sa(t);return(!1===fo.useProxies||!1===n.proxy?Zs:ms)(e,Ia(n),n.name)},map:function(e,t){var n=Sa(t);return new Ls(e,Ia(n),n.name)},set:function(e,t){var n=Sa(t);return new xs(e,Ia(n),n.name)},object:function(e,t,n){return rc((function(){return Ko(!1===fo.useProxies||!1===(null==n?void 0:n.proxy)?Vs({},n):function(e,t){var n,r;return fi(),e=Vs(e,t),null!=(r=(n=e[Ki]).proxy_)?r:n.proxy_=new Proxy(e,is)}({},n),e,t)}))},ref:Gi(Ea),shallow:Gi(Ta),deep:Ca,struct:Gi(ka)},Da=oi(Pa,Na),xa="computed",ja=ca(xa),Ua=ca("computed.struct",{equals:qi.structural}),Ma=function(e,t){if(Yi(t))return ja.decorate_20223_(e,t);if(_i(t))return Fi(e,t,ja);if(bi(e))return Gi(ca(xa,e));var n=bi(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Qa(n)};Object.assign(Ma,ja),Ma.struct=Gi(Ua);var Ba,Va=0,Ga=1,Fa=null!=(Ra=null==(La=si((function(){}),"name"))?void 0:La.configurable)&&Ra,Ya={value:"action",configurable:!0,writable:!1,enumerable:!1};function Ka(e,t,n,r){function i(){return function(e,t,n,r,i){var a=function(e,t,n,r){var i=!1,a=0,o=fo.trackingDerivation,s=!t||!o;_o();var c=fo.allowStateChanges;s&&(oo(),c=za(!0));var u=co(!0),l={runAsAction_:s,prevDerivation_:o,prevAllowStateChanges_:c,prevAllowStateReads_:u,notifySpy_:i,startTime_:a,actionId_:Ga++,parentActionId_:Va};return Va=l.actionId_,l}(0,t);try{return n.apply(r,i)}catch(e){throw a.error_=e,e}finally{!function(e){Va!==e.actionId_&&ri(30);Va=e.parentActionId_,void 0!==e.error_&&(fo.suppressReactionErrors=!0);Wa(e.prevAllowStateChanges_),uo(e.prevAllowStateReads_),yo(),e.runAsAction_&&so(e.prevDerivation_);fo.suppressReactionErrors=!1}(a)}}(0,n,t,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,i.toString=function(){return t.toString()},Fa&&(Ya.value=e,ci(i,"name",Ya)),i}function za(e){var t=fo.allowStateChanges;return fo.allowStateChanges=e,t}function Wa(e){fo.allowStateChanges=e}Ba=Symbol.toPrimitive;var Ha,qa=function(e){function t(t,n,r,i,a){var o;return void 0===r&&(r="ObservableValue"),void 0===a&&(a=qi.default),(o=e.call(this,r)||this).enhancer=void 0,o.name_=void 0,o.equals=void 0,o.hasUnreportedChange_=!1,o.interceptors_=void 0,o.changeListeners_=void 0,o.value_=void 0,o.dehancer=void 0,o.enhancer=n,o.name_=r,o.equals=a,o.value_=n(t,void 0,r),o}xi(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==fo.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(as(this)){var t=ss(this,{object:this,type:fs,newValue:e});if(!t)return fo.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?fo.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),cs(this)&&ls(this,{type:fs,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return os(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:fs,newValue:this.value_,oldValue:void 0}),us(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return Ii(this.get())},n[Ba]=function(){return this.valueOf()},t}(zi),Ja=Ai("ObservableValue",qa);Ha=Symbol.toPrimitive;var $a,Xa,Qa=function(){function e(e){this.dependenciesState_=$a.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=$a.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new eo(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Xa.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||ri(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Ka("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?qi.structural:qi.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==$a.UP_TO_DATE_)return;e.lowestObserverState_=$a.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===$a.UP_TO_DATE_&&(e.dependenciesState_=$a.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&ri(32,this.name_,this.derivation),0!==fo.inBatch||0!==this.observers_.size||this.keepAlive_){if(bo(this),no(this)){var e=fo.trackingContext;this.keepAlive_&&!e&&(fo.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===$a.STALE_)return;e.lowestObserverState_=$a.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===$a.POSSIBLY_STALE_?t.dependenciesState_=$a.STALE_:t.dependenciesState_===$a.UP_TO_DATE_&&(e.lowestObserverState_=$a.UP_TO_DATE_)}))}(this),fo.trackingContext=e}}else no(this)&&(this.warnAboutUntrackedRead_(),_o(),this.value_=this.computeValue_(!1),yo());var t=this.value_;if(to(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&ri(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else ri(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===$a.NOT_TRACKING_,n=this.computeValue_(!0),r=t||to(e)||to(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing_=!0;var t,n=za(!1);if(e)t=ro(this,this.derivation,this.scope_);else if(!0===fo.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new eo(e)}return Wa(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(io(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,i=void 0;return Mo((function(){var a=n.get();if(!r||t){var o=oo();e({observableKind:"computed",debugObjectName:n.name_,type:fs,object:n,newValue:a,oldValue:i}),so(o)}r=!1,i=a}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return Ii(this.get())},t[Ha]=function(){return this.valueOf()},e}(),Za=Ai("ComputedValue",Qa);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}($a||($a={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(Xa||(Xa={}));var eo=function(e){this.cause=void 0,this.cause=e};function to(e){return e instanceof eo}function no(e){switch(e.dependenciesState_){case $a.UP_TO_DATE_:return!1;case $a.NOT_TRACKING_:case $a.STALE_:return!0;case $a.POSSIBLY_STALE_:for(var t=co(!0),n=oo(),r=e.observing_,i=r.length,a=0;a<i;a++){var o=r[a];if(Za(o)){if(fo.disableErrorBoundaries)o.get();else try{o.get()}catch(e){return so(n),uo(t),!0}if(e.dependenciesState_===$a.STALE_)return so(n),uo(t),!0}}return lo(e),so(n),uo(t),!1}}function ro(e,t,n){var r=co(!0);lo(e),e.newObserving_=new Array(0===e.runId_?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++fo.runId;var i,a=fo.trackingDerivation;if(fo.trackingDerivation=e,fo.inBatch++,!0===fo.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new eo(e)}return fo.inBatch--,fo.trackingDerivation=a,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=$a.UP_TO_DATE_,i=0,a=e.unboundDepsCount_,o=0;o<a;o++){var s=n[o];0===s.diffValue_&&(s.diffValue_=1,i!==o&&(n[i]=s),i++),s.dependenciesState_>r&&(r=s.dependenciesState_)}n.length=i,e.newObserving_=null,a=t.length;for(;a--;){var c=t[a];0===c.diffValue_&&vo(c,e),c.diffValue_=0}for(;i--;){var u=n[i];1===u.diffValue_&&(u.diffValue_=0,go(u,e))}r!==$a.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),uo(r),i}function io(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)vo(t[n],e);e.dependenciesState_=$a.NOT_TRACKING_}function ao(e){var t=oo();try{return e()}finally{so(t)}}function oo(){var e=fo.trackingDerivation;return fo.trackingDerivation=null,e}function so(e){fo.trackingDerivation=e}function co(e){var t=fo.allowStateReads;return fo.allowStateReads=e,t}function uo(e){fo.allowStateReads=e}function lo(e){if(e.dependenciesState_!==$a.UP_TO_DATE_){e.dependenciesState_=$a.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=$a.UP_TO_DATE_}}var ho=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},po=!0,fo=function(){var e=ai();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(po=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new ho).version&&(po=!1),po?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new ho):(setTimeout((function(){ri(35)}),1),new ho)}();function go(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function vo(e,t){e.observers_.delete(t),0===e.observers_.size&&mo(e)}function mo(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,fo.pendingUnobservations.push(e))}function _o(){fo.inBatch++}function yo(){if(0==--fo.inBatch){Eo();for(var e=fo.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Qa&&n.suspend_())}fo.pendingUnobservations=[]}}function bo(e){var t=fo.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&fo.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&fo.inBatch>0&&mo(e),!1)}function wo(e){e.lowestObserverState_!==$a.STALE_&&(e.lowestObserverState_=$a.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===$a.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=$a.STALE_})))}var Oo=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=$a.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Xa.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,fo.pendingReactions.push(this),Eo())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){_o(),this.isScheduled_=!1;var e=fo.trackingContext;if(fo.trackingContext=this,no(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}fo.trackingContext=e,yo()}},t.track=function(e){if(!this.isDisposed_){_o(),this.isRunning_=!0;var t=fo.trackingContext;fo.trackingContext=this;var n=ro(this,e,void 0);fo.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&io(this),to(n)&&this.reportExceptionInDerivation_(n.cause),yo()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(fo.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";fo.suppressReactionErrors||console.error(n,e),fo.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(_o(),io(this),yo()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[Ki]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){},e}(),So=100,Ao=function(e){return e()};function Eo(){fo.inBatch>0||fo.isRunningReactions||Ao(To)}function To(){fo.isRunningReactions=!0;for(var e=fo.pendingReactions,t=0;e.length>0;){++t===So&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}fo.isRunningReactions=!1}var ko=Ai("Reaction",Oo);var Co="action",Io="autoAction",Po=Qi(Co),Ro=Qi("action.bound",{bound:!0}),Lo=Qi(Io,{autoAction:!0}),No=Qi("autoAction.bound",{autoAction:!0,bound:!0});function Do(e){return function(t,n){return mi(t)?Ka(t.name||"<unnamed action>",t,e):mi(n)?Ka(t,n,e):Yi(n)?(e?Lo:Po).decorate_20223_(t,n):_i(n)?Fi(t,n,e?Lo:Po):_i(t)?Gi(Qi(e?Io:Co,{name:t,autoAction:e})):void 0}}var xo=Do(!1);Object.assign(xo,Po);var jo=Do(!0);function Uo(e){return mi(e)&&!0===e.isMobxAction}function Mo(e,t){var n,r,i,a,o;void 0===t&&(t=hi);var s,c=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(!t.scheduler&&!t.delay)s=new Oo(c,(function(){this.track(h)}),t.onError,t.requiresObservable);else{var u=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Bo}(t),l=!1;s=new Oo(c,(function(){l||(l=!0,u((function(){l=!1,s.isDisposed_||s.track(h)})))}),t.onError,t.requiresObservable)}function h(){e(s)}return null!=(i=t)&&null!=(a=i.signal)&&a.aborted||s.schedule_(),s.getDisposer_(null==(o=t)?void 0:o.signal)}Object.assign(jo,Lo),xo.bound=Gi(Ro),jo.bound=Gi(No);var Bo=function(e){return e()};var Vo="onBO",Go="onBUO";function Fo(e,t,n){return Yo(Go,e,t,n)}function Yo(e,t,n,r){var i="function"==typeof r?ec(t,n):ec(t),a=mi(r)?r:n,o=e+"L";return i[o]?i[o].add(a):i[o]=new Set([a]),function(){var e=i[o];e&&(e.delete(a),0===e.size&&delete i[o])}}function Ko(e,t,n,r){var i=Ri(t);return rc((function(){var t=Vs(e,r)[Ki];Ci(i).forEach((function(e){t.extend_(e,i[e],!n||(!(e in n)||n[e]))}))})),e}var zo=0;function Wo(){this.message="FLOW_CANCELLED"}Wo.prototype=Object.create(Error.prototype);var Ho=ra("flow"),qo=ra("flow.bound",{bound:!0}),Jo=Object.assign((function(e,t){if(Yi(t))return Ho.decorate_20223_(e,t);if(_i(t))return Fi(e,t,Ho);var n=e,r=n.name||"<unnamed flow>",i=function(){var e,t=arguments,i=++zo,a=xo(r+" - runid: "+i+" - init",n).apply(this,t),o=void 0,s=new Promise((function(t,n){var s=0;function c(e){var t;o=void 0;try{t=xo(r+" - runid: "+i+" - yield "+s++,a.next).call(a,e)}catch(e){return n(e)}l(t)}function u(e){var t;o=void 0;try{t=xo(r+" - runid: "+i+" - yield "+s++,a.throw).call(a,e)}catch(e){return n(e)}l(t)}function l(e){if(!mi(null==e?void 0:e.then))return e.done?t(e.value):(o=Promise.resolve(e.value)).then(c,u);e.then(l,n)}e=n,c(void 0)}));return s.cancel=xo(r+" - runid: "+i+" - cancel",(function(){try{o&&$o(o);var t=a.return(void 0),n=Promise.resolve(t.value);n.then(vi,vi),$o(n),e(new Wo)}catch(t){e(t)}})),s};return i.isMobXFlow=!0,i}),Ho);function $o(e){mi(e.cancel)&&e.cancel()}function Xo(e){return!0===(null==e?void 0:e.isMobXFlow)}function Qo(e){return function(e,t){return!!e&&(void 0!==t?!!Ys(e)&&e[Ki].values_.has(t):Ys(e)||!!e[Ki]||Wi(e)||ko(e)||Za(e))}(e)}function Zo(e,t,n){return e.set(t,n),n}function es(e,t){if(null==e||"object"!=typeof e||e instanceof Date||!Qo(e))return e;if(Ja(e)||Za(e))return es(e.get(),t);if(t.has(e))return t.get(e);if(Ts(e)){var n=Zo(t,e,new Array(e.length));return e.forEach((function(e,r){n[r]=es(e,t)})),n}if(js(e)){var r=Zo(t,e,new Set);return e.forEach((function(e){r.add(es(e,t))})),r}if(Ns(e)){var i=Zo(t,e,new Map);return e.forEach((function(e,n){i.set(n,es(e,t))})),i}var a=Zo(t,e,{});return function(e){if(Ys(e))return e[Ki].ownKeys_();ri(38)}(e).forEach((function(n){ui.propertyIsEnumerable.call(e,n)&&(a[n]=es(e[n],t))})),a}function ts(e,t){return es(e,new Map)}function ns(e,t){void 0===t&&(t=void 0),_o();try{return e.apply(t)}finally{yo()}}function rs(e){return e[Ki]}Jo.bound=Gi(qo);var is={has:function(e,t){return rs(e).has_(t)},get:function(e,t){return rs(e).get_(t)},set:function(e,t,n){var r;return!!_i(t)&&(null==(r=rs(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!_i(t)&&(null==(n=rs(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=rs(e).defineProperty_(t,n))||r},ownKeys:function(e){return rs(e).ownKeys_()},preventExtensions:function(e){ri(13)}};function as(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function os(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),gi((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function ss(e,t){var n=oo();try{for(var r=[].concat(e.interceptors_||[]),i=0,a=r.length;i<a&&((t=r[i](t))&&!t.type&&ri(14),t);i++);return t}finally{so(n)}}function cs(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function us(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),gi((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function ls(e,t){var n=oo(),r=e.changeListeners_;if(r){for(var i=0,a=(r=r.slice()).length;i<a;i++)r[i](t);so(n)}}var hs=Symbol("mobx-keys");function ds(e,t,n){return bi(e)?Ko(e,e,t,n):(rc((function(){var r=Vs(e,n)[Ki];if(!e[hs]){var i=Object.getPrototypeOf(e),a=new Set([].concat(Ci(e),Ci(i)));a.delete("constructor"),a.delete(Ki),Oi(i,hs,a)}e[hs].forEach((function(e){return r.make_(e,!t||(!(e in t)||t[e]))}))})),e)}var ps="splice",fs="update",gs={get:function(e,t){var n=e[Ki];return t===Ki?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?Pi(_s,t)?_s[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[Ki];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){ri(15)}},vs=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new zi(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return os(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),us(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&ri("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&ri(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&Qs(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=li),as(this)){var a=ss(this,{object:this.proxy_,type:ps,index:e,removedCount:t,added:n});if(!a)return li;t=a.removedCount,n=a.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var o=n.length-t;this.updateArrayLength_(i,o)}var s=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,s),this.dehanceValues_(s)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var i=this.values_.slice(e,e+t),a=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var o=0;o<n.length;o++)this.values_[e+o]=n[o];for(var s=0;s<a.length;s++)this.values_[e+n.length+s]=a[s];return i},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,i=cs(this),a=i||r?{observableKind:"array",object:this.proxy_,type:fs,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),i&&ls(this,a)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,i=cs(this),a=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:ps,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&ls(this,a)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&ri(17,e,n.length),e<n.length){this.atom_;var r=n[e];if(as(this)){var i=ss(this,{type:fs,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,r))!==r&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,r))}else{for(var a=new Array(e+1-n.length),o=0;o<a.length-1;o++)a[o]=void 0;a[a.length-1]=t,this.spliceWithArray_(n.length,0,a)}},e}();function ms(e,t,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),fi(),rc((function(){var i=new vs(n,t,r,!1);Si(i.values_,Ki,i);var a=new Proxy(i.values_,gs);return i.proxy_=a,e&&e.length&&i.spliceWithArray_(0,0,e),a}))}var _s={clear:function(){return this.splice(0)},replace:function(e){var t=this[Ki];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=this[Ki];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[Ki].spliceWithArray_(e,t,n)},push:function(){for(var e=this[Ki],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[Ki].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Ki],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return fo.trackingDerivation&&ri(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){fo.trackingDerivation&&ri(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Ki],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function ys(e,t){"function"==typeof Array.prototype[e]&&(_s[e]=t(e))}function bs(e){return function(){var t=this[Ki];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function ws(e){return function(t,n){var r=this,i=this[Ki];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e]((function(e,i){return t.call(n,e,i,r)}))}}function Os(e){return function(){var t=this,n=this[Ki];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(e,n,r){return i(e,n,r,t)},r[e].apply(r,arguments)}}ys("at",bs),ys("concat",bs),ys("flat",bs),ys("includes",bs),ys("indexOf",bs),ys("join",bs),ys("lastIndexOf",bs),ys("slice",bs),ys("toString",bs),ys("toLocaleString",bs),ys("toSorted",bs),ys("toSpliced",bs),ys("with",bs),ys("every",ws),ys("filter",ws),ys("find",ws),ys("findIndex",ws),ys("findLast",ws),ys("findLastIndex",ws),ys("flatMap",ws),ys("forEach",ws),ys("map",ws),ys("some",ws),ys("toReversed",ws),ys("reduce",Os),ys("reduceRight",Os);var Ss,As,Es=Ai("ObservableArrayAdministration",vs);function Ts(e){return yi(e)&&Es(e[Ki])}var ks={},Cs="add",Is="delete";Ss=Symbol.iterator,As=Symbol.toStringTag;var Ps,Rs,Ls=function(){function e(e,t,n){var r=this;void 0===t&&(t=Ji),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Ki]=ks,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,mi(Map)||ri(18),rc((function(){r.keysAtom_=Hi("ObservableMap.keys()"),r.data_=new Map,r.hasMap_=new Map,e&&r.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!fo.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new qa(this.has_(e),$i,"ObservableMap.key?",!1);this.hasMap_.set(e,r),Fo(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(as(this)){var r=ss(this,{type:n?fs:Cs,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,as(this))&&!ss(this,{type:Is,object:this,name:e}))return!1;if(this.has_(e)){var n=cs(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:Is,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return ns((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&ls(this,r),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==fo.UNCHANGED){var r=cs(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:fs,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&ls(this,i)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,ns((function(){var r,i=new qa(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,i),t=i.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=cs(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:Cs,object:this,name:e,newValue:t}:null;r&&ls(this,i)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return cc({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},t.entries=function(){var e=this,t=this.keys();return cc({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},t[Ss]=function(){return this.entries()},t.forEach=function(e,t){for(var n,r=Bi(this);!(n=r()).done;){var i=n.value,a=i[0],o=i[1];e.call(t,o,a,this)}},t.merge=function(e){var t=this;return Ns(e)&&(e=new Map(e)),ns((function(){bi(e)?function(e){var t=Object.keys(e);if(!ki)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return ui.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):Ei(e)?(e.constructor!==Map&&ri(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&ri(20,e)})),this},t.clear=function(){var e=this;ns((function(){ao((function(){for(var t,n=Bi(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.replace=function(e){var t=this;return ns((function(){for(var n,r=function(e){if(Ei(e)||Ns(e))return e;if(Array.isArray(e))return new Map(e);if(bi(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return ri(21,e)}(e),i=new Map,a=!1,o=Bi(t.data_.keys());!(n=o()).done;){var s=n.value;if(!r.has(s))if(t.delete(s))a=!0;else{var c=t.data_.get(s);i.set(s,c)}}for(var u,l=Bi(r.entries());!(u=l()).done;){var h=u.value,d=h[0],p=h[1],f=t.data_.has(d);if(t.set(d,p),t.data_.has(d)){var g=t.data_.get(d);i.set(d,g),f||(a=!0)}}if(!a)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var v=t.data_.keys(),m=i.keys(),_=v.next(),y=m.next();!_.done;){if(_.value!==y.value){t.keysAtom_.reportChanged();break}_=v.next(),y=m.next()}t.data_=i})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return us(this,e)},t.intercept_=function(e){return os(this,e)},Ni(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:As,get:function(){return"Map"}}]),e}(),Ns=Ai("ObservableMap",Ls);var Ds={};Ps=Symbol.iterator,Rs=Symbol.toStringTag;var xs=function(){function e(e,t,n){var r=this;void 0===t&&(t=Ji),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[Ki]=Ds,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,mi(Set)||ri(22),this.enhancer_=function(e,r){return t(e,r,n)},rc((function(){r.atom_=Hi(r.name_),e&&r.replace(e)}))}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;ns((function(){ao((function(){for(var t,n=Bi(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.forEach=function(e,t){for(var n,r=Bi(this);!(n=r()).done;){var i=n.value;e.call(t,i,i,this)}},t.add=function(e){var t=this;if((this.atom_,as(this))&&!ss(this,{type:Cs,object:this,newValue:e}))return this;if(!this.has(e)){ns((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=cs(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Cs,object:this,newValue:e}:null;n&&ls(this,r)}return this},t.delete=function(e){var t=this;if(as(this)&&!ss(this,{type:Is,object:this,oldValue:e}))return!1;if(this.has(e)){var n=cs(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Is,object:this,oldValue:e}:null;return ns((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&ls(this,r),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return cc({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return cc({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return js(e)&&(e=new Set(e)),ns((function(){Array.isArray(e)||Ti(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&ri("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return us(this,e)},t.intercept_=function(e){return os(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Ps]=function(){return this.values()},Ni(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Rs,get:function(){return"Set"}}]),e}(),js=Ai("ObservableSet",xs),Us=Object.create(null),Ms="remove",Bs=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=ma),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new zi("ObservableObject.keys"),this.isPlainObject_=bi(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof Qa)return n.set(t),!0;if(as(this)){var r=ss(this,{type:fs,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==fo.UNCHANGED){var i=cs(this),a=i?{type:fs,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&ls(this,a)}return!0},t.get_=function(e){return fo.trackingDerivation&&!Pi(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),Pi(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!fo.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new qa(e in this.target_,$i,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[Vi])&&n[e])return;ri(1,t.annotationType_,this.name_+"."+e.toString())}for(var r=this.target_;r&&r!==ui;){var i=si(r,e);if(i){var a=t.make_(this,e,i,r);if(0===a)return;if(1===a)break}r=Object.getPrototypeOf(r)}Ks(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);var i=n.extend_(this,e,t,r);return i&&Ks(this,n,e),i},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{_o();var r=this.delete_(e);if(!r)return r;if(as(this)){var i=ss(this,{object:this.proxy_||this.target_,name:e,type:Cs,newValue:t.value});if(!i)return null;var a=i.newValue;t.value!==a&&(t=Di({},t,{value:a}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else ci(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{yo()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1),this.keysAtom_;try{_o();var i=this.delete_(e);if(!i)return i;if(as(this)){var a=ss(this,{object:this.proxy_||this.target_,name:e,type:Cs,newValue:t});if(!a)return null;t=a.newValue}var o=Fs(e),s={configurable:!fo.safeDescriptors||this.isPlainObject_,enumerable:!0,get:o.get,set:o.set};if(r){if(!Reflect.defineProperty(this.target_,e,s))return!1}else ci(this.target_,e,s);var c=new qa(t,n,"ObservableObject.key",!1);this.values_.set(e,c),this.notifyPropertyAddition_(e,c.value_)}finally{yo()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{_o();var r=this.delete_(e);if(!r)return r;if(as(this))if(!ss(this,{object:this.proxy_||this.target_,name:e,type:Cs,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=Fs(e),a={configurable:!fo.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,e,a))return!1}else ci(this.target_,e,a);this.values_.set(e,new Qa(t)),this.notifyPropertyAddition_(e,void 0)}finally{yo()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!Pi(this.target_,e))return!0;if(as(this)&&!ss(this,{object:this.proxy_||this.target_,name:e,type:Ms}))return null;try{var n,r;_o();var i,a=cs(this),o=this.values_.get(e),s=void 0;if(!o&&a)s=null==(i=si(this.target_,e))?void 0:i.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(o&&(this.values_.delete(e),o instanceof qa&&(s=o.value_),wo(o)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),a){var c={type:Ms,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:s,name:e};0,a&&ls(this,c)}}finally{yo()}return!0},t.observe_=function(e,t){return us(this,e)},t.intercept_=function(e){return os(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,i=cs(this);if(i){var a=i?{type:Cs,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;i&&ls(this,a)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Ci(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function Vs(e,t){var n;if(Pi(e,Ki))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",i=new Bs(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:_a(e):void 0}(t));return Oi(e,Ki,i),e}var Gs=Ai("ObservableObjectAdministration",Bs);function Fs(e){return Us[e]||(Us[e]={get:function(){return this[Ki].getObservablePropValue_(e)},set:function(t){return this[Ki].setObservablePropValue_(e,t)}})}function Ys(e){return!!yi(e)&&Gs(e[Ki])}function Ks(e,t,n){var r;null==(r=e.target_[Vi])||delete r[n]}var zs=$s(0),Ws=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),Hs=0,qs=function(){};!function(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):void 0!==e.prototype.__proto__?e.prototype.__proto__=t:e.prototype=t}(qs,Array.prototype);var Js=function(e,t,n){function r(t,n,r,i){var a;return void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),a=e.call(this)||this,rc((function(){var e=new vs(r,n,i,!0);e.proxy_=Ui(a),Si(Ui(a),Ki,e),t&&t.length&&a.spliceWithArray(0,0,t),Ws&&Object.defineProperty(Ui(a),"0",zs)})),a}xi(r,e);var i=r.prototype;return i.concat=function(){this[Ki].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return Ts(e)?e.slice():e})))},i[n]=function(){var e=this,t=0;return cc({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},Ni(r,[{key:"length",get:function(){return this[Ki].getArrayLength_()},set:function(e){this[Ki].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(qs,Symbol.toStringTag,Symbol.iterator);function $s(e){return{enumerable:!1,configurable:!0,get:function(){return this[Ki].get_(e)},set:function(t){this[Ki].set_(e,t)}}}function Xs(e){ci(Js.prototype,""+e,$s(e))}function Qs(e){if(e>Hs){for(var t=Hs;t<e+100;t++)Xs(t);Hs=e}}function Zs(e,t,n){return new Js(e,t,n)}function ec(e,t){if("object"==typeof e&&null!==e){if(Ts(e))return void 0!==t&&ri(23),e[Ki].atom_;if(js(e))return e.atom_;if(Ns(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||ri(25,t,nc(e)),n}if(Ys(e)){if(!t)return ri(26);var r=e[Ki].values_.get(t);return r||ri(27,t,nc(e)),r}if(Wi(e)||Za(e)||ko(e))return e}else if(mi(e)&&ko(e[Ki]))return e[Ki];ri(28)}function tc(e,t){return e||ri(29),void 0!==t?tc(ec(e,t)):Wi(e)||Za(e)||ko(e)||Ns(e)||js(e)?e:e[Ki]?e[Ki]:void ri(24,e)}function nc(e,t){var n;if(void 0!==t)n=ec(e,t);else{if(Uo(e))return e.name;n=Ys(e)||Ns(e)||js(e)?tc(e):ec(e)}return n.name_}function rc(e){var t=oo(),n=za(!0);_o();try{return e()}finally{yo(),Wa(n),so(t)}}Object.entries(_s).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&Oi(Js.prototype,t,n)})),Qs(1e3);var ic=ui.toString;function ac(e,t,n){return void 0===n&&(n=-1),oc(e,t,n)}function oc(e,t,n,r,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof t)return!1;var o=ic.call(e);if(o!==ic.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=sc(e),t=sc(t);var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,u=t.constructor;if(c!==u&&!(mi(c)&&c instanceof c&&mi(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var l=(r=r||[]).length;l--;)if(r[l]===e)return i[l]===t;if(r.push(e),i.push(t),s){if((l=e.length)!==t.length)return!1;for(;l--;)if(!oc(e[l],t[l],n-1,r,i))return!1}else{var h,d=Object.keys(e);if(l=d.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!Pi(t,h=d[l])||!oc(e[h],t[h],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function sc(e){return Ts(e)?e.slice():Ei(e)||Ns(e)||Ti(e)||js(e)?Array.from(e.entries()):e}function cc(e){return e[Symbol.iterator]=uc,e}function uc(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===ai()[e]&&ri("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:nc},$mobx:Ki});let lc=class extends EventTarget{constructor(e={},t=Hr,n=null,r=!0,i=!0){super(),this.isInitialised=!1,this._instance!==this&&(this._instance=this,this.state=e,this.storageType=t,this.storageKey=n,this.merge=r,this._persistentStore=null,this._persistOn=i)}async initialise(){var e=this;return new Promise((async function(t,n){if(!0===e.isInitialised)t(e.state);else if(null===e._persistentStore){e._persistentStore=new qr(e.storageType),e._persistentStore.onUpdate((async function(t){JSON.stringify(e.state)!==JSON.stringify(t)&&(e.state=t)}));let n=await e._persistentStore.retrieve(e.storageKey,ts(e.state));e.state&&(e.state=n),ds(e),e._startAutoSaving(e,e.storageKey),t(n),e.isInitialised=!0}else ds(e),t(e.state),e.isInitialised=!0}))}async waitForInit(){if(!0===this.isInitialised)return!0;if(!1===this.isInitialised){for(;!0!==this.isInitialised;)await new Promise((e=>{setTimeout(e,100)}));return!0}return!1}set persist(e){this._persistOn=e,e&&this.save()}save(){this._storeOnSave(this,this.storageKey,!0)}get stateJSON(){return ts(this.state)}get initialStateJSON(){return ts(this.initialState)}_startAutoSaving(e,t){var n=this;Mo((async function(){n._storeOnSave(e,t),n.dispatchEvent(new CustomEvent("onStoreUpdated"))}))}async _storeOnSave(e,t,n=!1){(this._persistOn||n)&&await this._persistentStore.store(t,ts(e.state),this.merge)}};const hc=new class extends lc{constructor(){super({token:""},Wr,"th.rw4gc.token.store")}setToken(e){this.state.token=e}};function dc(){return dc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dc.apply(this,arguments)}class pc{setWholeState(e){throw Error("The store does not implelemt setWholeState")}setDefaultState(){throw Error("The store does not implelemt setDefaultState")}setNotifcationVersion(e){throw Error("The store does not implelemt setNotifcationVersion")}setScreenMaskingState(e){throw Error("The store does not implelemt setScreenMaskingState")}setDriveInstall(e){throw Error("The store does not implelemt setDriveInstall")}setFirstLoadSettings(e,t,n,r,i,a,o,s,c){throw Error("The store does not implelemt setFirstLoadSettings")}setPolicySettings(e){throw Error("The store does not implelemt setPolicySettings")}addCheckitDictionaryItem(e){throw Error("The store does not implelemt addCheckitDictionaryItem")}setPredictAheadPolicy(e){throw Error("The store does not implelemt predictAheadPolicy")}setActiveSettingsTab(e){throw Error("The store does not implelemt setActiveSettingsTab")}setSpeechVoice(e,t){throw Error("The store does not implelemt setSpeechVoice")}setSpeechTranslation(e){throw Error("The store does not implelemt setSpeechTranslation")}setSpeechSpeed(e){throw Error("The store does not implelemt setSpeechSpeed")}setSpeechReading(e){throw Error("The store does not implelemt setSpeechReading")}setPredictionNumberOfResults(e){throw Error("The store does not implelemt setPredictionNumberOfResults")}setPredictionfontSize(e){throw Error("The store does not implelemt setPredictionfontSize")}setfollowCursor(e){throw Error("The store does not implelemt setfollowCursor")}setPredictAhead(e){throw Error("The store does not implelemt setPredictAhead")}setpredictOnHover(e){throw Error("The store does not implelemt setpredictOnHover")}setCheckItOnHover(e){throw Error("The store does not implelemt setCheckItOnHover")}setSpeechOnEachWord(e){throw Error("The store does not implelemt setSpeechOnEachWord")}setSpeechOnEachSentence(e){throw Error("The store does not implelemt setSpeechOnEachSentence")}removeFromCheckItDictionary(e){throw Error("The store does not implelemt removeFromCheckItDictionary")}setBackgroundOpacity(e){throw Error("The store does not implelemt setBackgroundOpacity")}setReadingLightOpacity(e){throw Error("The store does not implelemt setReadingLightOpacity")}setReadingLightHeight(e){throw Error("The store does not implelemt setReadingLightHeight")}setReadingLight(e){throw Error("The store does not implelemt setReadingLight")}setLanguage(e){throw Error("The store does not implelemt setLanguage")}setFeaturesLanguage(e){throw Error("The store does not implelemt setFeaturesLanguage")}setFeatures(e,t){throw Error("The store does not implelemt setFeatures")}setFeaturesDragging(e,t){throw Error("The store does not implelemt setFeaturesDragging")}setFeaturesOrder(e){throw Error("The store does not implelemt setFeaturesOrder")}setFeaturesHidden(e,t){throw Error("The store does not implelemt setFeaturesHidden")}setScreenMaskingBackgroundColor(e){throw Error("The store does not implelemt setScreenMaskingBackgroundColor")}setScreenMaskingReadingLightColor(e){throw Error("The store does not implelemt setScreenMaskingReadingLightColor")}setScreenMaskingDefaults(){throw Error("The store does not implelemt setScreenMaskingDefaults")}setTheme(e){throw Error("The store does not implelemt setTheme")}setVoiceInput(e){throw Error("The store does not implelemt setVoiceInput")}setLicenceData(e,t,n){throw Error("The store does not implelemt setLicenceData")}setUserEmail(e){throw Error("The store does not implelemt setUserEmail")}setLoginType(e){throw Error("The store does not implelemt setLoginType")}setAuthCode(e){throw Error("The store does not implelemt setAuthCode")}setFluencyLevel(e){throw Error("The store does not implelemt setFluencyLevel")}resetUser(e){throw Error("The store does not implelemt resetUser")}setV1Settings(e){throw Error("The store does not implelemt setV1Settings")}setV1ToolbarFeatures(e){throw Error("The store does not implelemt setV1ToolbarFeatures")}importV1Settings(e,t,n){throw Error("The store does not implelemt importV1Settings")}fixVoice(){throw Error("The store does not implelemt fixVoice")}setMarketFeatures(e){throw Error("The store does not implelemt setMarketFeatures")}}const fc="sync",gc="none";function vc(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function mc(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){vc(a,r,i,o,s,"next",e)}function s(e){vc(a,r,i,o,s,"throw",e)}o(void 0)}))}}function _c(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var yc={};function bc(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:yc}var wc=Object.assign,Oc=Object.getOwnPropertyDescriptor,Sc=Object.defineProperty,Ac=Object.prototype,Ec=[];Object.freeze(Ec);var Tc={};Object.freeze(Tc);var kc="undefined"!=typeof Proxy,Cc=Object.toString();function Ic(){kc||_c("Proxy not available")}function Pc(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Rc=function(){};function Lc(e){return"function"==typeof e}function Nc(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function Dc(e){return null!==e&&"object"==typeof e}function xc(e){if(!Dc(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===Cc}function jc(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function Uc(e,t,n){Sc(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Mc(e,t,n){Sc(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function Bc(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return Dc(e)&&!0===e[n]}}function Vc(e){return e instanceof Map}function Gc(e){return e instanceof Set}var Fc=void 0!==Object.getOwnPropertySymbols;var Yc="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:Fc?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function Kc(e){return null===e?null:"object"==typeof e?""+e:e}function zc(e,t){return Ac.hasOwnProperty.call(e,t)}var Wc=Object.getOwnPropertyDescriptors||function(e){var t={};return Yc(e).forEach((function(n){t[n]=Oc(e,n)})),t};function Hc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?a:String(a)),r)}var i,a}function qc(e,t,n){return t&&Hc(e.prototype,t),n&&Hc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jc(){return Jc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jc.apply(this,arguments)}function $c(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Xc(e,t)}function Xc(e,t){return Xc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xc(e,t)}function Qc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eu(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Zc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var tu=Symbol("mobx-stored-annotations");function nu(e){return Object.assign((function(t,n){if(iu(n))return e.decorate_20223_(t,n);ru(t,n,e)}),e)}function ru(e,t,n){zc(e,tu)||Uc(e,tu,Jc({},e[tu])),function(e){return e.annotationType_===du}(n)||(e[tu][t]=n)}function iu(e){return"object"==typeof e&&"string"==typeof e.kind}var au=Symbol("mobx administration"),ou=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=hl.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return Dl(this)},t.reportChanged=function(){Ll(),xl(this),Nl()},t.toString=function(){return this.name_},e}(),su=Bc("Atom",ou);function cu(e,t,n){void 0===t&&(t=Rc),void 0===n&&(n=Rc);var r,i=new ou(e);return t!==Rc&&rh(eh,i,t,r),n!==Rc&&nh(i,n),i}var uu={identity:function(e,t){return e===t},structural:function(e,t){return yd(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return yd(e,t,1)}};function lu(e,t,n){return dh(e)?e:Array.isArray(e)?Ju.array(e,{name:n}):xc(e)?Ju.object(e,void 0,{name:n}):Vc(e)?Ju.map(e,{name:n}):Gc(e)?Ju.set(e,{name:n}):"function"!=typeof e||Xl(e)||hh(e)?e:jc(e)?uh(e):$l(n,e)}function hu(e){return e}var du="override";function pu(e,t){return{annotationType_:e,options_:t,make_:fu,extend_:gu,decorate_20223_:vu}}function fu(e,t,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(Xl(n.value))return 1;var a=mu(e,this,t,n,!1);return Sc(r,t,a),2}function gu(e,t,n,r){var i=mu(e,this,t,n);return e.defineProperty_(t,i,r)}function vu(e,t){var n=t.kind,r=t.name,i=t.addInitializer,a=this;if("field"!=n){var o,s,c,u,l,h;if("method"==n)return Xl(e)||(s=e,e=al(null!=(c=null==(u=a.options_)?void 0:u.name)?c:r.toString(),s,null!=(l=null==(h=a.options_)?void 0:h.autoAction)&&l)),null!=(o=this.options_)&&o.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobxAction=!0,e[r]=t})),e;_c("Cannot apply '"+a.annotationType_+"' to '"+String(r)+"' (kind: "+n+"):\n'"+a.annotationType_+"' can only be used on properties with a function value.")}else i((function(){ru(this,r,a)}))}function mu(e,t,n,r,i){var a,o,s,c,u,l,h,d;void 0===i&&(i=Cl.safeDescriptors),d=r,t.annotationType_,d.value;var p,f=r.value;null!=(a=t.options_)&&a.bound&&(f=f.bind(null!=(p=e.proxy_)?p:e.target_));return{value:al(null!=(o=null==(s=t.options_)?void 0:s.name)?o:n.toString(),f,null!=(c=null==(u=t.options_)?void 0:u.autoAction)&&c,null!=(l=t.options_)&&l.bound?null!=(h=e.proxy_)?h:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function _u(e,t){return{annotationType_:e,options_:t,make_:yu,extend_:bu,decorate_20223_:wu}}function yu(e,t,n,r){var i;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!zc(e.target_,t)||!hh(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(hh(n.value))return 1;var a=Ou(e,this,t,n,!1,!1);return Sc(r,t,a),2}function bu(e,t,n,r){var i,a=Ou(e,this,t,n,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,a,r)}function wu(e,t){var n,r=t.name,i=t.addInitializer;return hh(e)||(e=uh(e)),null!=(n=this.options_)&&n.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobXFlow=!0,e[r]=t})),e}function Ou(e,t,n,r,i,a){var o;void 0===a&&(a=Cl.safeDescriptors),o=r,t.annotationType_,o.value;var s,c=r.value;(hh(c)||(c=uh(c)),i)&&((c=c.bind(null!=(s=e.proxy_)?s:e.target_)).isMobXFlow=!0);return{value:c,configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function Su(e,t){return{annotationType_:e,options_:t,make_:Au,extend_:Eu,decorate_20223_:Tu}}function Au(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Eu(e,t,n,r){var i;return i=n,this.annotationType_,i.get,e.defineComputedProperty_(t,Jc({},this.options_,{get:n.get,set:n.set}),r)}function Tu(e,t){var n=this,r=t.name;return(0,t.addInitializer)((function(){var t=ed(this)[au],i=Jc({},n.options_,{get:e,context:this});i.name||(i.name="ObservableObject."+r.toString()),t.values_.set(r,new pl(i))})),function(){return this[au].getObservablePropValue_(r)}}function ku(e,t){return{annotationType_:e,options_:t,make_:Cu,extend_:Iu,decorate_20223_:Pu}}function Cu(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Iu(e,t,n,r){var i,a;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(i=null==(a=this.options_)?void 0:a.enhancer)?i:lu,r)}function Pu(e,t){var n=this,r=t.kind,i=t.name,a=new WeakSet;function o(e,t){var r,o,s=ed(e)[au],c=new ul(t,null!=(r=null==(o=n.options_)?void 0:o.enhancer)?r:lu,"ObservableObject."+i.toString(),!1);s.values_.set(i,c),a.add(e)}if("accessor"==r)return{get:function(){return a.has(this)||o(this,e.get.call(this)),this[au].getObservablePropValue_(i)},set:function(e){return a.has(this)||o(this,e),this[au].setObservablePropValue_(i,e)},init:function(e){return a.has(this)||o(this,e),e}}}var Ru="true",Lu=Nu();function Nu(e){return{annotationType_:Ru,options_:e,make_:Du,extend_:xu,decorate_20223_:ju}}function Du(e,t,n,r){var i,a,o,s;if(n.get)return Zu.make_(e,t,n,r);if(n.set){var c=al(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!Cl.safeDescriptors||e.isPlainObject_,set:c})?0:2:(Sc(r,t,{configurable:!0,set:c}),2)}if(r!==e.target_&&"function"==typeof n.value)return jc(n.value)?(null!=(s=this.options_)&&s.autoBind?uh.bound:uh).make_(e,t,n,r):(null!=(o=this.options_)&&o.autoBind?$l.bound:$l).make_(e,t,n,r);var u,l=!1===(null==(i=this.options_)?void 0:i.deep)?Ju.ref:Ju;"function"==typeof n.value&&null!=(a=this.options_)&&a.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return l.make_(e,t,n,r)}function xu(e,t,n,r){var i,a,o;if(n.get)return Zu.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!Cl.safeDescriptors||e.isPlainObject_,set:al(t.toString(),n.set)},r);"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(o=e.proxy_)?o:e.target_));return(!1===(null==(a=this.options_)?void 0:a.deep)?Ju.ref:Ju).extend_(e,t,n,r)}function ju(e,t){_c("'"+this.annotationType_+"' cannot be used as a decorator")}var Uu={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Mu(e){return e||Uu}Object.freeze(Uu);var Bu=ku("observable"),Vu=ku("observable.ref",{enhancer:hu}),Gu=ku("observable.shallow",{enhancer:function(e,t,n){return null==e||rd(e)||Vh(e)||Hh(e)||$h(e)?e:Array.isArray(e)?Ju.array(e,{name:n,deep:!1}):xc(e)?Ju.object(e,void 0,{name:n,deep:!1}):Vc(e)?Ju.map(e,{name:n,deep:!1}):Gc(e)?Ju.set(e,{name:n,deep:!1}):void 0}}),Fu=ku("observable.struct",{enhancer:function(e,t){return yd(e,t)?t:e}}),Yu=nu(Bu);function Ku(e){return!0===e.deep?lu:!1===e.deep?hu:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:lu;var t,n,r}function zu(e,t,n){return iu(t)?Bu.decorate_20223_(e,t):Nc(t)?void ru(e,t,Bu):dh(e)?e:xc(e)?Ju.object(e,t,n):Array.isArray(e)?Ju.array(e,t):Vc(e)?Ju.map(e,t):Gc(e)?Ju.set(e,t):"object"==typeof e&&null!==e?e:Ju.box(e,t)}wc(zu,Yu);var Wu,Hu,qu={box:function(e,t){var n=Mu(t);return new ul(e,Ku(n),n.name,!0,n.equals)},array:function(e,t){var n=Mu(t);return(!1===Cl.useProxies||!1===n.proxy?pd:Rh)(e,Ku(n),n.name)},map:function(e,t){var n=Mu(t);return new Wh(e,Ku(n),n.name)},set:function(e,t){var n=Mu(t);return new Jh(e,Ku(n),n.name)},object:function(e,t,n){return md((function(){return ih(!1===Cl.useProxies||!1===(null==n?void 0:n.proxy)?ed({},n):function(e,t){var n,r;return Ic(),e=ed(e,t),null!=(r=(n=e[au]).proxy_)?r:n.proxy_=new Proxy(e,_h)}({},n),e,t)}))},ref:nu(Vu),shallow:nu(Gu),deep:Yu,struct:nu(Fu)},Ju=wc(zu,qu),$u="computed",Xu=Su($u),Qu=Su("computed.struct",{equals:uu.structural}),Zu=function(e,t){if(iu(t))return Xu.decorate_20223_(e,t);if(Nc(t))return ru(e,t,Xu);if(xc(e))return nu(Su($u,e));var n=xc(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new pl(n)};Object.assign(Zu,Xu),Zu.struct=nu(Qu);var el,tl=0,nl=1,rl=null!=(Wu=null==(Hu=Oc((function(){}),"name"))?void 0:Hu.configurable)&&Wu,il={value:"action",configurable:!0,writable:!1,enumerable:!1};function al(e,t,n,r){function i(){return function(e,t,n,r,i){var a=function(e,t,n,r){var i=!1,a=0,o=Cl.trackingDerivation,s=!t||!o;Ll();var c=Cl.allowStateChanges;s&&(wl(),c=ol(!0));var u=Sl(!0),l={runAsAction_:s,prevDerivation_:o,prevAllowStateChanges_:c,prevAllowStateReads_:u,notifySpy_:i,startTime_:a,actionId_:nl++,parentActionId_:tl};return tl=l.actionId_,l}(0,t);try{return n.apply(r,i)}catch(e){throw a.error_=e,e}finally{!function(e){tl!==e.actionId_&&_c(30);tl=e.parentActionId_,void 0!==e.error_&&(Cl.suppressReactionErrors=!0);sl(e.prevAllowStateChanges_),Al(e.prevAllowStateReads_),Nl(),e.runAsAction_&&Ol(e.prevDerivation_);Cl.suppressReactionErrors=!1}(a)}}(0,n,t,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,i.toString=function(){return t.toString()},rl&&(il.value=e,Sc(i,"name",il)),i}function ol(e){var t=Cl.allowStateChanges;return Cl.allowStateChanges=e,t}function sl(e){Cl.allowStateChanges=e}el=Symbol.toPrimitive;var cl,ul=function(e){function t(t,n,r,i,a){var o;return void 0===r&&(r="ObservableValue"),void 0===a&&(a=uu.default),(o=e.call(this,r)||this).enhancer=void 0,o.name_=void 0,o.equals=void 0,o.hasUnreportedChange_=!1,o.interceptors_=void 0,o.changeListeners_=void 0,o.value_=void 0,o.dehancer=void 0,o.enhancer=n,o.name_=r,o.equals=a,o.value_=n(t,void 0,r),o}$c(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==Cl.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(yh(this)){var t=wh(this,{object:this,type:Ch,newValue:e});if(!t)return Cl.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?Cl.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),Oh(this)&&Ah(this,{type:Ch,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return bh(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:Ch,newValue:this.value_,oldValue:void 0}),Sh(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return Kc(this.get())},n[el]=function(){return this.valueOf()},t}(ou),ll=Bc("ObservableValue",ul);cl=Symbol.toPrimitive;var hl,dl,pl=function(){function e(e){this.dependenciesState_=hl.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=hl.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new gl(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=dl.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||_c(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=al("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?uu.structural:uu.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==hl.UP_TO_DATE_)return;e.lowestObserverState_=hl.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===hl.UP_TO_DATE_&&(e.dependenciesState_=hl.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&_c(32,this.name_,this.derivation),0!==Cl.inBatch||0!==this.observers_.size||this.keepAlive_){if(Dl(this),ml(this)){var e=Cl.trackingContext;this.keepAlive_&&!e&&(Cl.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===hl.STALE_)return;e.lowestObserverState_=hl.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===hl.POSSIBLY_STALE_?t.dependenciesState_=hl.STALE_:t.dependenciesState_===hl.UP_TO_DATE_&&(e.lowestObserverState_=hl.UP_TO_DATE_)}))}(this),Cl.trackingContext=e}}else ml(this)&&(this.warnAboutUntrackedRead_(),Ll(),this.value_=this.computeValue_(!1),Nl());var t=this.value_;if(vl(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&_c(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else _c(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===hl.NOT_TRACKING_,n=this.computeValue_(!0),r=t||vl(e)||vl(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing_=!0;var t,n=ol(!1);if(e)t=_l(this,this.derivation,this.scope_);else if(!0===Cl.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new gl(e)}return sl(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(yl(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,i=void 0;return Ql((function(){var a=n.get();if(!r||t){var o=wl();e({observableKind:"computed",debugObjectName:n.name_,type:Ch,object:n,newValue:a,oldValue:i}),Ol(o)}r=!1,i=a}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return Kc(this.get())},t[cl]=function(){return this.valueOf()},e}(),fl=Bc("ComputedValue",pl);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(hl||(hl={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(dl||(dl={}));var gl=function(e){this.cause=void 0,this.cause=e};function vl(e){return e instanceof gl}function ml(e){switch(e.dependenciesState_){case hl.UP_TO_DATE_:return!1;case hl.NOT_TRACKING_:case hl.STALE_:return!0;case hl.POSSIBLY_STALE_:for(var t=Sl(!0),n=wl(),r=e.observing_,i=r.length,a=0;a<i;a++){var o=r[a];if(fl(o)){if(Cl.disableErrorBoundaries)o.get();else try{o.get()}catch(e){return Ol(n),Al(t),!0}if(e.dependenciesState_===hl.STALE_)return Ol(n),Al(t),!0}}return El(e),Ol(n),Al(t),!1}}function _l(e,t,n){var r=Sl(!0);El(e),e.newObserving_=new Array(0===e.runId_?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++Cl.runId;var i,a=Cl.trackingDerivation;if(Cl.trackingDerivation=e,Cl.inBatch++,!0===Cl.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new gl(e)}return Cl.inBatch--,Cl.trackingDerivation=a,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=hl.UP_TO_DATE_,i=0,a=e.unboundDepsCount_,o=0;o<a;o++){var s=n[o];0===s.diffValue_&&(s.diffValue_=1,i!==o&&(n[i]=s),i++),s.dependenciesState_>r&&(r=s.dependenciesState_)}n.length=i,e.newObserving_=null,a=t.length;for(;a--;){var c=t[a];0===c.diffValue_&&Pl(c,e),c.diffValue_=0}for(;i--;){var u=n[i];1===u.diffValue_&&(u.diffValue_=0,Il(u,e))}r!==hl.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),Al(r),i}function yl(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)Pl(t[n],e);e.dependenciesState_=hl.NOT_TRACKING_}function bl(e){var t=wl();try{return e()}finally{Ol(t)}}function wl(){var e=Cl.trackingDerivation;return Cl.trackingDerivation=null,e}function Ol(e){Cl.trackingDerivation=e}function Sl(e){var t=Cl.allowStateReads;return Cl.allowStateReads=e,t}function Al(e){Cl.allowStateReads=e}function El(e){if(e.dependenciesState_!==hl.UP_TO_DATE_){e.dependenciesState_=hl.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=hl.UP_TO_DATE_}}var Tl=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},kl=!0,Cl=function(){var e=bc();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(kl=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new Tl).version&&(kl=!1),kl?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Tl):(setTimeout((function(){_c(35)}),1),new Tl)}();function Il(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Pl(e,t){e.observers_.delete(t),0===e.observers_.size&&Rl(e)}function Rl(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,Cl.pendingUnobservations.push(e))}function Ll(){Cl.inBatch++}function Nl(){if(0==--Cl.inBatch){Bl();for(var e=Cl.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof pl&&n.suspend_())}Cl.pendingUnobservations=[]}}function Dl(e){var t=Cl.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&Cl.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&Cl.inBatch>0&&Rl(e),!1)}function xl(e){e.lowestObserverState_!==hl.STALE_&&(e.lowestObserverState_=hl.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===hl.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=hl.STALE_})))}var jl=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=hl.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=dl.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Cl.pendingReactions.push(this),Bl())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){Ll(),this.isScheduled_=!1;var e=Cl.trackingContext;if(Cl.trackingContext=this,ml(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}Cl.trackingContext=e,Nl()}},t.track=function(e){if(!this.isDisposed_){Ll(),this.isRunning_=!0;var t=Cl.trackingContext;Cl.trackingContext=this;var n=_l(this,e,void 0);Cl.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&yl(this),vl(n)&&this.reportExceptionInDerivation_(n.cause),Nl()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(Cl.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";Cl.suppressReactionErrors||console.error(n,e),Cl.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Ll(),yl(this),Nl()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[au]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){},e}(),Ul=100,Ml=function(e){return e()};function Bl(){Cl.inBatch>0||Cl.isRunningReactions||Ml(Vl)}function Vl(){Cl.isRunningReactions=!0;for(var e=Cl.pendingReactions,t=0;e.length>0;){++t===Ul&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}Cl.isRunningReactions=!1}var Gl=Bc("Reaction",jl);var Fl="action",Yl="autoAction",Kl=pu(Fl),zl=pu("action.bound",{bound:!0}),Wl=pu(Yl,{autoAction:!0}),Hl=pu("autoAction.bound",{autoAction:!0,bound:!0});function ql(e){return function(t,n){return Lc(t)?al(t.name||"<unnamed action>",t,e):Lc(n)?al(t,n,e):iu(n)?(e?Wl:Kl).decorate_20223_(t,n):Nc(n)?ru(t,n,e?Wl:Kl):Nc(t)?nu(pu(e?Yl:Fl,{name:t,autoAction:e})):void 0}}var Jl=ql(!1);Object.assign(Jl,Kl);var $l=ql(!0);function Xl(e){return Lc(e)&&!0===e.isMobxAction}function Ql(e,t){var n,r,i,a,o;void 0===t&&(t=Tc);var s,c=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(!t.scheduler&&!t.delay)s=new jl(c,(function(){this.track(h)}),t.onError,t.requiresObservable);else{var u=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Zl}(t),l=!1;s=new jl(c,(function(){l||(l=!0,u((function(){l=!1,s.isDisposed_||s.track(h)})))}),t.onError,t.requiresObservable)}function h(){e(s)}return null!=(i=t)&&null!=(a=i.signal)&&a.aborted||s.schedule_(),s.getDisposer_(null==(o=t)?void 0:o.signal)}Object.assign($l,Wl),Jl.bound=nu(zl),$l.bound=nu(Hl);var Zl=function(e){return e()};var eh="onBO",th="onBUO";function nh(e,t,n){return rh(th,e,t,n)}function rh(e,t,n,r){var i="function"==typeof r?fd(t,n):fd(t),a=Lc(r)?r:n,o=e+"L";return i[o]?i[o].add(a):i[o]=new Set([a]),function(){var e=i[o];e&&(e.delete(a),0===e.size&&delete i[o])}}function ih(e,t,n,r){var i=Wc(t);return md((function(){var t=ed(e,r)[au];Yc(i).forEach((function(e){t.extend_(e,i[e],!n||(!(e in n)||n[e]))}))})),e}var ah=0;function oh(){this.message="FLOW_CANCELLED"}oh.prototype=Object.create(Error.prototype);var sh=_u("flow"),ch=_u("flow.bound",{bound:!0}),uh=Object.assign((function(e,t){if(iu(t))return sh.decorate_20223_(e,t);if(Nc(t))return ru(e,t,sh);var n=e,r=n.name||"<unnamed flow>",i=function(){var e,t=arguments,i=++ah,a=Jl(r+" - runid: "+i+" - init",n).apply(this,t),o=void 0,s=new Promise((function(t,n){var s=0;function c(e){var t;o=void 0;try{t=Jl(r+" - runid: "+i+" - yield "+s++,a.next).call(a,e)}catch(e){return n(e)}l(t)}function u(e){var t;o=void 0;try{t=Jl(r+" - runid: "+i+" - yield "+s++,a.throw).call(a,e)}catch(e){return n(e)}l(t)}function l(e){if(!Lc(null==e?void 0:e.then))return e.done?t(e.value):(o=Promise.resolve(e.value)).then(c,u);e.then(l,n)}e=n,c(void 0)}));return s.cancel=Jl(r+" - runid: "+i+" - cancel",(function(){try{o&&lh(o);var t=a.return(void 0),n=Promise.resolve(t.value);n.then(Rc,Rc),lh(n),e(new oh)}catch(t){e(t)}})),s};return i.isMobXFlow=!0,i}),sh);function lh(e){Lc(e.cancel)&&e.cancel()}function hh(e){return!0===(null==e?void 0:e.isMobXFlow)}function dh(e){return function(e,t){return!!e&&(void 0!==t?!!rd(e)&&e[au].values_.has(t):rd(e)||!!e[au]||su(e)||Gl(e)||fl(e))}(e)}function ph(e,t,n){return e.set(t,n),n}function fh(e,t){if(null==e||"object"!=typeof e||e instanceof Date||!dh(e))return e;if(ll(e)||fl(e))return fh(e.get(),t);if(t.has(e))return t.get(e);if(Vh(e)){var n=ph(t,e,new Array(e.length));return e.forEach((function(e,r){n[r]=fh(e,t)})),n}if($h(e)){var r=ph(t,e,new Set);return e.forEach((function(e){r.add(fh(e,t))})),r}if(Hh(e)){var i=ph(t,e,new Map);return e.forEach((function(e,n){i.set(n,fh(e,t))})),i}var a=ph(t,e,{});return function(e){if(rd(e))return e[au].ownKeys_();_c(38)}(e).forEach((function(n){Ac.propertyIsEnumerable.call(e,n)&&(a[n]=fh(e[n],t))})),a}function gh(e,t){return fh(e,new Map)}function vh(e,t){void 0===t&&(t=void 0),Ll();try{return e.apply(t)}finally{Nl()}}function mh(e){return e[au]}uh.bound=nu(ch);var _h={has:function(e,t){return mh(e).has_(t)},get:function(e,t){return mh(e).get_(t)},set:function(e,t,n){var r;return!!Nc(t)&&(null==(r=mh(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!Nc(t)&&(null==(n=mh(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=mh(e).defineProperty_(t,n))||r},ownKeys:function(e){return mh(e).ownKeys_()},preventExtensions:function(e){_c(13)}};function yh(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function bh(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),Pc((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function wh(e,t){var n=wl();try{for(var r=[].concat(e.interceptors_||[]),i=0,a=r.length;i<a&&((t=r[i](t))&&!t.type&&_c(14),t);i++);return t}finally{Ol(n)}}function Oh(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function Sh(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),Pc((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Ah(e,t){var n=wl(),r=e.changeListeners_;if(r){for(var i=0,a=(r=r.slice()).length;i<a;i++)r[i](t);Ol(n)}}var Eh=Symbol("mobx-keys");function Th(e,t,n){return xc(e)?ih(e,e,t,n):(md((function(){var r=ed(e,n)[au];if(!e[Eh]){var i=Object.getPrototypeOf(e),a=new Set([].concat(Yc(e),Yc(i)));a.delete("constructor"),a.delete(au),Uc(i,Eh,a)}e[Eh].forEach((function(e){return r.make_(e,!t||(!(e in t)||t[e]))}))})),e)}var kh="splice",Ch="update",Ih={get:function(e,t){var n=e[au];return t===au?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?zc(Lh,t)?Lh[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[au];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){_c(15)}},Ph=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new ou(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return bh(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Sh(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&_c("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&_c(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&dd(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=Ec),yh(this)){var a=wh(this,{object:this.proxy_,type:kh,index:e,removedCount:t,added:n});if(!a)return Ec;t=a.removedCount,n=a.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var o=n.length-t;this.updateArrayLength_(i,o)}var s=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,s),this.dehanceValues_(s)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var i=this.values_.slice(e,e+t),a=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var o=0;o<n.length;o++)this.values_[e+o]=n[o];for(var s=0;s<a.length;s++)this.values_[e+n.length+s]=a[s];return i},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,i=Oh(this),a=i||r?{observableKind:"array",object:this.proxy_,type:Ch,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),i&&Ah(this,a)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,i=Oh(this),a=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:kh,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&Ah(this,a)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&_c(17,e,n.length),e<n.length){this.atom_;var r=n[e];if(yh(this)){var i=wh(this,{type:Ch,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,r))!==r&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,r))}else{for(var a=new Array(e+1-n.length),o=0;o<a.length-1;o++)a[o]=void 0;a[a.length-1]=t,this.spliceWithArray_(n.length,0,a)}},e}();function Rh(e,t,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),Ic(),md((function(){var i=new Ph(n,t,r,!1);Mc(i.values_,au,i);var a=new Proxy(i.values_,Ih);return i.proxy_=a,e&&e.length&&i.spliceWithArray_(0,0,e),a}))}var Lh={clear:function(){return this.splice(0)},replace:function(e){var t=this[au];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=this[au];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[au].spliceWithArray_(e,t,n)},push:function(){for(var e=this[au],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[au].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[au],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return Cl.trackingDerivation&&_c(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Cl.trackingDerivation&&_c(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[au],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function Nh(e,t){"function"==typeof Array.prototype[e]&&(Lh[e]=t(e))}function Dh(e){return function(){var t=this[au];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function xh(e){return function(t,n){var r=this,i=this[au];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e]((function(e,i){return t.call(n,e,i,r)}))}}function jh(e){return function(){var t=this,n=this[au];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(e,n,r){return i(e,n,r,t)},r[e].apply(r,arguments)}}Nh("at",Dh),Nh("concat",Dh),Nh("flat",Dh),Nh("includes",Dh),Nh("indexOf",Dh),Nh("join",Dh),Nh("lastIndexOf",Dh),Nh("slice",Dh),Nh("toString",Dh),Nh("toLocaleString",Dh),Nh("toSorted",Dh),Nh("toSpliced",Dh),Nh("with",Dh),Nh("every",xh),Nh("filter",xh),Nh("find",xh),Nh("findIndex",xh),Nh("findLast",xh),Nh("findLastIndex",xh),Nh("flatMap",xh),Nh("forEach",xh),Nh("map",xh),Nh("some",xh),Nh("toReversed",xh),Nh("reduce",jh),Nh("reduceRight",jh);var Uh,Mh,Bh=Bc("ObservableArrayAdministration",Ph);function Vh(e){return Dc(e)&&Bh(e[au])}var Gh={},Fh="add",Yh="delete";Uh=Symbol.iterator,Mh=Symbol.toStringTag;var Kh,zh,Wh=function(){function e(e,t,n){var r=this;void 0===t&&(t=lu),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[au]=Gh,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,Lc(Map)||_c(18),md((function(){r.keysAtom_=cu("ObservableMap.keys()"),r.data_=new Map,r.hasMap_=new Map,e&&r.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!Cl.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new ul(this.has_(e),hu,"ObservableMap.key?",!1);this.hasMap_.set(e,r),nh(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(yh(this)){var r=wh(this,{type:n?Ch:Fh,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,yh(this))&&!wh(this,{type:Yh,object:this,name:e}))return!1;if(this.has_(e)){var n=Oh(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:Yh,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return vh((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&Ah(this,r),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==Cl.UNCHANGED){var r=Oh(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:Ch,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&Ah(this,i)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,vh((function(){var r,i=new ul(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,i),t=i.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=Oh(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:Fh,object:this,name:e,newValue:t}:null;r&&Ah(this,i)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return Od({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},t.entries=function(){var e=this,t=this.keys();return Od({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},t[Uh]=function(){return this.entries()},t.forEach=function(e,t){for(var n,r=eu(this);!(n=r()).done;){var i=n.value,a=i[0],o=i[1];e.call(t,o,a,this)}},t.merge=function(e){var t=this;return Hh(e)&&(e=new Map(e)),vh((function(){xc(e)?function(e){var t=Object.keys(e);if(!Fc)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return Ac.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):Vc(e)?(e.constructor!==Map&&_c(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&_c(20,e)})),this},t.clear=function(){var e=this;vh((function(){bl((function(){for(var t,n=eu(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.replace=function(e){var t=this;return vh((function(){for(var n,r=function(e){if(Vc(e)||Hh(e))return e;if(Array.isArray(e))return new Map(e);if(xc(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return _c(21,e)}(e),i=new Map,a=!1,o=eu(t.data_.keys());!(n=o()).done;){var s=n.value;if(!r.has(s))if(t.delete(s))a=!0;else{var c=t.data_.get(s);i.set(s,c)}}for(var u,l=eu(r.entries());!(u=l()).done;){var h=u.value,d=h[0],p=h[1],f=t.data_.has(d);if(t.set(d,p),t.data_.has(d)){var g=t.data_.get(d);i.set(d,g),f||(a=!0)}}if(!a)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var v=t.data_.keys(),m=i.keys(),_=v.next(),y=m.next();!_.done;){if(_.value!==y.value){t.keysAtom_.reportChanged();break}_=v.next(),y=m.next()}t.data_=i})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return Sh(this,e)},t.intercept_=function(e){return bh(this,e)},qc(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Mh,get:function(){return"Map"}}]),e}(),Hh=Bc("ObservableMap",Wh);var qh={};Kh=Symbol.iterator,zh=Symbol.toStringTag;var Jh=function(){function e(e,t,n){var r=this;void 0===t&&(t=lu),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[au]=qh,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,Lc(Set)||_c(22),this.enhancer_=function(e,r){return t(e,r,n)},md((function(){r.atom_=cu(r.name_),e&&r.replace(e)}))}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;vh((function(){bl((function(){for(var t,n=eu(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.forEach=function(e,t){for(var n,r=eu(this);!(n=r()).done;){var i=n.value;e.call(t,i,i,this)}},t.add=function(e){var t=this;if((this.atom_,yh(this))&&!wh(this,{type:Fh,object:this,newValue:e}))return this;if(!this.has(e)){vh((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=Oh(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Fh,object:this,newValue:e}:null;n&&Ah(this,r)}return this},t.delete=function(e){var t=this;if(yh(this)&&!wh(this,{type:Yh,object:this,oldValue:e}))return!1;if(this.has(e)){var n=Oh(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:Yh,object:this,oldValue:e}:null;return vh((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&Ah(this,r),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Od({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return Od({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return $h(e)&&(e=new Set(e)),vh((function(){Array.isArray(e)||Gc(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&_c("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return Sh(this,e)},t.intercept_=function(e){return bh(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Kh]=function(){return this.values()},qc(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:zh,get:function(){return"Set"}}]),e}(),$h=Bc("ObservableSet",Jh),Xh=Object.create(null),Qh="remove",Zh=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=Lu),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new ou("ObservableObject.keys"),this.isPlainObject_=xc(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof pl)return n.set(t),!0;if(yh(this)){var r=wh(this,{type:Ch,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==Cl.UNCHANGED){var i=Oh(this),a=i?{type:Ch,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&Ah(this,a)}return!0},t.get_=function(e){return Cl.trackingDerivation&&!zc(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),zc(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!Cl.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new ul(e in this.target_,hu,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[tu])&&n[e])return;_c(1,t.annotationType_,this.name_+"."+e.toString())}for(var r=this.target_;r&&r!==Ac;){var i=Oc(r,e);if(i){var a=t.make_(this,e,i,r);if(0===a)return;if(1===a)break}r=Object.getPrototypeOf(r)}id(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);var i=n.extend_(this,e,t,r);return i&&id(this,n,e),i},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{Ll();var r=this.delete_(e);if(!r)return r;if(yh(this)){var i=wh(this,{object:this.proxy_||this.target_,name:e,type:Fh,newValue:t.value});if(!i)return null;var a=i.newValue;t.value!==a&&(t=Jc({},t,{value:a}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else Sc(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{Nl()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1),this.keysAtom_;try{Ll();var i=this.delete_(e);if(!i)return i;if(yh(this)){var a=wh(this,{object:this.proxy_||this.target_,name:e,type:Fh,newValue:t});if(!a)return null;t=a.newValue}var o=nd(e),s={configurable:!Cl.safeDescriptors||this.isPlainObject_,enumerable:!0,get:o.get,set:o.set};if(r){if(!Reflect.defineProperty(this.target_,e,s))return!1}else Sc(this.target_,e,s);var c=new ul(t,n,"ObservableObject.key",!1);this.values_.set(e,c),this.notifyPropertyAddition_(e,c.value_)}finally{Nl()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{Ll();var r=this.delete_(e);if(!r)return r;if(yh(this))if(!wh(this,{object:this.proxy_||this.target_,name:e,type:Fh,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=nd(e),a={configurable:!Cl.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,e,a))return!1}else Sc(this.target_,e,a);this.values_.set(e,new pl(t)),this.notifyPropertyAddition_(e,void 0)}finally{Nl()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!zc(this.target_,e))return!0;if(yh(this)&&!wh(this,{object:this.proxy_||this.target_,name:e,type:Qh}))return null;try{var n,r;Ll();var i,a=Oh(this),o=this.values_.get(e),s=void 0;if(!o&&a)s=null==(i=Oc(this.target_,e))?void 0:i.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(o&&(this.values_.delete(e),o instanceof ul&&(s=o.value_),xl(o)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),a){var c={type:Qh,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:s,name:e};0,a&&Ah(this,c)}}finally{Nl()}return!0},t.observe_=function(e,t){return Sh(this,e)},t.intercept_=function(e){return bh(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,i=Oh(this);if(i){var a=i?{type:Fh,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;i&&Ah(this,a)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Yc(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function ed(e,t){var n;if(zc(e,au))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",i=new Zh(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:Nu(e):void 0}(t));return Uc(e,au,i),e}var td=Bc("ObservableObjectAdministration",Zh);function nd(e){return Xh[e]||(Xh[e]={get:function(){return this[au].getObservablePropValue_(e)},set:function(t){return this[au].setObservablePropValue_(e,t)}})}function rd(e){return!!Dc(e)&&td(e[au])}function id(e,t,n){var r;null==(r=e.target_[tu])||delete r[n]}var ad=ld(0),od=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),sd=0,cd=function(){};!function(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):void 0!==e.prototype.__proto__?e.prototype.__proto__=t:e.prototype=t}(cd,Array.prototype);var ud=function(e,t,n){function r(t,n,r,i){var a;return void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),a=e.call(this)||this,md((function(){var e=new Ph(r,n,i,!0);e.proxy_=Qc(a),Mc(Qc(a),au,e),t&&t.length&&a.spliceWithArray(0,0,t),od&&Object.defineProperty(Qc(a),"0",ad)})),a}$c(r,e);var i=r.prototype;return i.concat=function(){this[au].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return Vh(e)?e.slice():e})))},i[n]=function(){var e=this,t=0;return Od({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},qc(r,[{key:"length",get:function(){return this[au].getArrayLength_()},set:function(e){this[au].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(cd,Symbol.toStringTag,Symbol.iterator);function ld(e){return{enumerable:!1,configurable:!0,get:function(){return this[au].get_(e)},set:function(t){this[au].set_(e,t)}}}function hd(e){Sc(ud.prototype,""+e,ld(e))}function dd(e){if(e>sd){for(var t=sd;t<e+100;t++)hd(t);sd=e}}function pd(e,t,n){return new ud(e,t,n)}function fd(e,t){if("object"==typeof e&&null!==e){if(Vh(e))return void 0!==t&&_c(23),e[au].atom_;if($h(e))return e.atom_;if(Hh(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||_c(25,t,vd(e)),n}if(rd(e)){if(!t)return _c(26);var r=e[au].values_.get(t);return r||_c(27,t,vd(e)),r}if(su(e)||fl(e)||Gl(e))return e}else if(Lc(e)&&Gl(e[au]))return e[au];_c(28)}function gd(e,t){return e||_c(29),void 0!==t?gd(fd(e,t)):su(e)||fl(e)||Gl(e)||Hh(e)||$h(e)?e:e[au]?e[au]:void _c(24,e)}function vd(e,t){var n;if(void 0!==t)n=fd(e,t);else{if(Xl(e))return e.name;n=rd(e)||Hh(e)||$h(e)?gd(e):fd(e)}return n.name_}function md(e){var t=wl(),n=ol(!0);Ll();try{return e()}finally{Nl(),sl(n),Ol(t)}}Object.entries(Lh).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&Uc(ud.prototype,t,n)})),dd(1e3);var _d=Ac.toString;function yd(e,t,n){return void 0===n&&(n=-1),bd(e,t,n)}function bd(e,t,n,r,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof t)return!1;var o=_d.call(e);if(o!==_d.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=wd(e),t=wd(t);var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,u=t.constructor;if(c!==u&&!(Lc(c)&&c instanceof c&&Lc(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var l=(r=r||[]).length;l--;)if(r[l]===e)return i[l]===t;if(r.push(e),i.push(t),s){if((l=e.length)!==t.length)return!1;for(;l--;)if(!bd(e[l],t[l],n-1,r,i))return!1}else{var h,d=Object.keys(e);if(l=d.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!zc(t,h=d[l])||!bd(e[h],t[h],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function wd(e){return Vh(e)?e.slice():Vc(e)||Hh(e)||Gc(e)||$h(e)?Array.from(e.entries()):e}function Od(e){return e[Symbol.iterator]=Sd,e}function Sd(){return this}function Ad(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ed(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}["Symbol","Map","Set"].forEach((function(e){void 0===bc()[e]&&_c("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:vd},$mobx:au});let Td=class{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}},kd=class{static encode(e){var t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);var t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}};var Cd=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(!r.length)return t;var a=r.shift();if(Pd(t)&&Pd(a)){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ad(Object(n),!0).forEach((function(t){Ed(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ad(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(Pd(a[s])&&Pd(o[s])?o[s]=e(o[s],a[s]):Array.isArray(a[s])&&Array.isArray(o[s])?o[s]=Id(o[s],a[s]):o[s]=a[s]);return e(o,...r)}return e(t,...r)},Id=(e,t)=>{var n=[...t],r=((e,t)=>{if(e.hasOwnProperty("name")&&t.hasOwnProperty("name"))return"name";if(e.length>0&&t.length>0){var n,r=e[0],i=t[0],a=function(n){if(r.hasOwnProperty(n)&&i.hasOwnProperty(n)){var a=e.map((e=>e[n])),o=t.map((e=>e[n])),s=new Set(a),c=new Set(o);if("string"==typeof r[n]&&s.size===e.length&&c.size===t.length)return{v:n}}};for(var o in r)if(n=a(o))return n.v}return null})(e,t),i=t.map((e=>e[r])),a=e.map((e=>e[r])),o=[];for(var s in t[0])o.push(s);var c=[];for(var u in e[0])c.push(u);var l=c.filter((e=>!o.some((t=>t===e))));if(l.length>0)for(var h=function(t){for(var i=e.find((e=>e[r]===n[t][r])),a=0;a<l.length;a++)n[t][l[a]]=i[l[a]]},d=0;d<n.length;d++)h(d);return a.filter((e=>!i.some((t=>t===e)))).forEach((t=>{var i=e.find((e=>{if(e[r]===t)return!0})),a=e.findIndex((e=>e===i)),o=e[a-1>=0?a-1:a][r],s=n.findIndex((e=>e[r]===o));n.splice(s+1,0,i)})),n},Pd=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),Rd="local";let Ld=class extends Td{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(this._event&&t===this._syncType&&this._keys.has(Object.keys(e)[0])){var n=JSON.parse(kd.decode(Object.values(e)[0].newValue));this._event(n)}}))}onUpdate(e){this._event=e}store(e,t,n){var r=this;return new Promise(function(){var n=mc((function*(n,i){try{if("none"===r._syncType)return void n(!0);var a=kd.encode(t),o=yield r._retrieve(e,r._syncType);if(o&&o[e]===a)return void n(!0);r._store(e,a,r._syncType),r._keys.add(e),n(!0)}catch(e){i(e)}}));return function(e,t){return n.apply(this,arguments)}}())}retrieve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this;return new Promise(function(){var r=mc((function*(r,i){try{if("none"===n._syncType)return void r(t);var a={};if(Object.keys(e).length>0){var o=yield n._retrieve(e,n._syncType);if(o){if(a=kd.decode(o[e]),n._keys.add(e),!t)return void r(JSON.parse(a));r(Cd(t,JSON.parse(a)))}else n._keys.add(e),r(t)}else n._keys.add(e),r(t)}catch(e){i(e)}}));return function(e,t){return r.apply(this,arguments)}}())}remove(e){var t=this;return new Promise(function(){var n=mc((function*(n,r){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){yield t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){r(e)}}));return function(e,t){return n.apply(this,arguments)}}())}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,r)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}};class Nd extends EventTarget{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rd,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];super(),this.isInitialised=!1,this._instance!==this&&(this._instance=this,this.state=e,this.storageType=t,this.storageKey=n,this.merge=r,this._persistentStore=null,this._persistOn=i)}initialise(){var e=this;return mc((function*(){return new Promise(function(){var t=mc((function*(t,n){if(!0===e.isInitialised)t(e.state);else if(null===e._persistentStore){e._persistentStore=new Ld(e.storageType),e._persistentStore.onUpdate(function(){var t=mc((function*(t){JSON.stringify(e.state)!==JSON.stringify(t)&&(e.state=t)}));return function(e){return t.apply(this,arguments)}}());var r=yield e._persistentStore.retrieve(e.storageKey,gh(e.state));e.state&&(e.state=r),Th(e),e._startAutoSaving(e,e.storageKey),t(r),e.isInitialised=!0}else Th(e),t(e.state),e.isInitialised=!0}));return function(e,n){return t.apply(this,arguments)}}())}))()}waitForInit(){var e=this;return mc((function*(){if(!0===e.isInitialised)return!0;if(!1===e.isInitialised){for(;!0!==e.isInitialised;)yield new Promise((e=>{setTimeout(e,100)}));return!0}return!1}))()}set persist(e){this._persistOn=e,e&&this.save()}save(){this._storeOnSave(this,this.storageKey,!0)}get stateJSON(){return gh(this.state)}get initialStateJSON(){return gh(this.initialState)}_startAutoSaving(e,t){var n=this;Ql(mc((function*(){n._storeOnSave(e,t),n.dispatchEvent(new CustomEvent("onStoreUpdated"))})))}_storeOnSave(e,t){var n=arguments,r=this;return mc((function*(){var i=n.length>2&&void 0!==n[2]&&n[2];(r._persistOn||i)&&(yield r._persistentStore.store(t,gh(e.state),r.merge))}))()}}function Dd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var xd={};function jd(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:xd}var Ud=Object.assign,Md=Object.getOwnPropertyDescriptor,Bd=Object.defineProperty,Vd=Object.prototype,Gd=[];Object.freeze(Gd);var Fd={};Object.freeze(Fd);var Yd="undefined"!=typeof Proxy,Kd=Object.toString();function zd(){Yd||Dd("Proxy not available")}function Wd(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var Hd=function(){};function qd(e){return"function"==typeof e}function Jd(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function $d(e){return null!==e&&"object"==typeof e}function Xd(e){if(!$d(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n.toString()===Kd}function Qd(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function Zd(e,t,n){Bd(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function ep(e,t,n){Bd(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function tp(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return $d(e)&&!0===e[n]}}function np(e){return e instanceof Map}function rp(e){return e instanceof Set}var ip=void 0!==Object.getOwnPropertySymbols;var ap="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:ip?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function op(e){return null===e?null:"object"==typeof e?""+e:e}function sp(e,t){return Vd.hasOwnProperty.call(e,t)}var cp=Object.getOwnPropertyDescriptors||function(e){var t={};return ap(e).forEach((function(n){t[n]=Md(e,n)})),t};function up(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=r.key,a=void 0,"symbol"==typeof(a=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"))?a:String(a)),r)}var i,a}function lp(e,t,n){return t&&up(e.prototype,t),n&&up(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hp(){return hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hp.apply(this,arguments)}function dp(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,pp(e,t)}function pp(e,t){return pp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},pp(e,t)}function fp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vp(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return gp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var mp=Symbol("mobx-stored-annotations");function _p(e){return Object.assign((function(t,n){if(bp(n))return e.decorate_20223_(t,n);yp(t,n,e)}),e)}function yp(e,t,n){sp(e,mp)||Zd(e,mp,hp({},e[mp])),function(e){return e.annotationType_===Cp}(n)||(e[mp][t]=n)}function bp(e){return"object"==typeof e&&"string"==typeof e.kind}var wp=Symbol("mobx administration"),Op=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Cf.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return Xf(this)},t.reportChanged=function(){Jf(),Qf(this),$f()},t.toString=function(){return this.name_},e}(),Sp=tp("Atom",Op);function Ap(e,t,n){void 0===t&&(t=Hd),void 0===n&&(n=Hd);var r,i=new Op(e);return t!==Hd&&yg(vg,i,t,r),n!==Hd&&_g(i,n),i}var Ep={identity:function(e,t){return e===t},structural:function(e,t){return Rv(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return Rv(e,t,1)}};function Tp(e,t,n){return kg(e)?e:Array.isArray(e)?df.array(e,{name:n}):Xd(e)?df.object(e,void 0,{name:n}):np(e)?df.map(e,{name:n}):rp(e)?df.set(e,{name:n}):"function"!=typeof e||fg(e)||Tg(e)?e:Qd(e)?Ag(e):pg(n,e)}function kp(e){return e}var Cp="override";function Ip(e,t){return{annotationType_:e,options_:t,make_:Pp,extend_:Rp,decorate_20223_:Lp}}function Pp(e,t,n,r){var i;if(null!=(i=this.options_)&&i.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(fg(n.value))return 1;var a=Np(e,this,t,n,!1);return Bd(r,t,a),2}function Rp(e,t,n,r){var i=Np(e,this,t,n);return e.defineProperty_(t,i,r)}function Lp(e,t){var n=t.kind,r=t.name,i=t.addInitializer,a=this;if("field"!=n){var o,s,c,u,l,h;if("method"==n)return fg(e)||(s=e,e=Of(null!=(c=null==(u=a.options_)?void 0:u.name)?c:r.toString(),s,null!=(l=null==(h=a.options_)?void 0:h.autoAction)&&l)),null!=(o=this.options_)&&o.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobxAction=!0,e[r]=t})),e;Dd("Cannot apply '"+a.annotationType_+"' to '"+String(r)+"' (kind: "+n+"):\n'"+a.annotationType_+"' can only be used on properties with a function value.")}else i((function(){yp(this,r,a)}))}function Np(e,t,n,r,i){var a,o,s,c,u,l,h,d;void 0===i&&(i=zf.safeDescriptors),d=r,t.annotationType_,d.value;var p,f=r.value;null!=(a=t.options_)&&a.bound&&(f=f.bind(null!=(p=e.proxy_)?p:e.target_));return{value:Of(null!=(o=null==(s=t.options_)?void 0:s.name)?o:n.toString(),f,null!=(c=null==(u=t.options_)?void 0:u.autoAction)&&c,null!=(l=t.options_)&&l.bound?null!=(h=e.proxy_)?h:e.target_:void 0),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function Dp(e,t){return{annotationType_:e,options_:t,make_:xp,extend_:jp,decorate_20223_:Up}}function xp(e,t,n,r){var i;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(null!=(i=this.options_)&&i.bound&&(!sp(e.target_,t)||!Tg(e.target_[t]))&&null===this.extend_(e,t,n,!1))return 0;if(Tg(n.value))return 1;var a=Mp(e,this,t,n,!1,!1);return Bd(r,t,a),2}function jp(e,t,n,r){var i,a=Mp(e,this,t,n,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,a,r)}function Up(e,t){var n,r=t.name,i=t.addInitializer;return Tg(e)||(e=Ag(e)),null!=(n=this.options_)&&n.bound&&i((function(){var e=this,t=e[r].bind(e);t.isMobXFlow=!0,e[r]=t})),e}function Mp(e,t,n,r,i,a){var o;void 0===a&&(a=zf.safeDescriptors),o=r,t.annotationType_,o.value;var s,c=r.value;(Tg(c)||(c=Ag(c)),i)&&((c=c.bind(null!=(s=e.proxy_)?s:e.target_)).isMobXFlow=!0);return{value:c,configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function Bp(e,t){return{annotationType_:e,options_:t,make_:Vp,extend_:Gp,decorate_20223_:Fp}}function Vp(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function Gp(e,t,n,r){var i;return i=n,this.annotationType_,i.get,e.defineComputedProperty_(t,hp({},this.options_,{get:n.get,set:n.set}),r)}function Fp(e,t){var n=this,r=t.name;return(0,t.addInitializer)((function(){var t=dv(this)[wp],i=hp({},n.options_,{get:e,context:this});i.name||(i.name="ObservableObject."+r.toString()),t.values_.set(r,new Pf(i))})),function(){return this[wp].getObservablePropValue_(r)}}function Yp(e,t){return{annotationType_:e,options_:t,make_:Kp,extend_:zp,decorate_20223_:Wp}}function Kp(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function zp(e,t,n,r){var i,a;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(i=null==(a=this.options_)?void 0:a.enhancer)?i:Tp,r)}function Wp(e,t){var n=this,r=t.kind,i=t.name,a=new WeakSet;function o(e,t){var r,o,s=dv(e)[wp],c=new Tf(t,null!=(r=null==(o=n.options_)?void 0:o.enhancer)?r:Tp,"ObservableObject."+i.toString(),!1);s.values_.set(i,c),a.add(e)}if("accessor"==r)return{get:function(){return a.has(this)||o(this,e.get.call(this)),this[wp].getObservablePropValue_(i)},set:function(e){return a.has(this)||o(this,e),this[wp].setObservablePropValue_(i,e)},init:function(e){return a.has(this)||o(this,e),e}}}var Hp="true",qp=Jp();function Jp(e){return{annotationType_:Hp,options_:e,make_:$p,extend_:Xp,decorate_20223_:Qp}}function $p(e,t,n,r){var i,a,o,s;if(n.get)return vf.make_(e,t,n,r);if(n.set){var c=Of(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!zf.safeDescriptors||e.isPlainObject_,set:c})?0:2:(Bd(r,t,{configurable:!0,set:c}),2)}if(r!==e.target_&&"function"==typeof n.value)return Qd(n.value)?(null!=(s=this.options_)&&s.autoBind?Ag.bound:Ag).make_(e,t,n,r):(null!=(o=this.options_)&&o.autoBind?pg.bound:pg).make_(e,t,n,r);var u,l=!1===(null==(i=this.options_)?void 0:i.deep)?df.ref:df;"function"==typeof n.value&&null!=(a=this.options_)&&a.autoBind&&(n.value=n.value.bind(null!=(u=e.proxy_)?u:e.target_));return l.make_(e,t,n,r)}function Xp(e,t,n,r){var i,a,o;if(n.get)return vf.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!zf.safeDescriptors||e.isPlainObject_,set:Of(t.toString(),n.set)},r);"function"==typeof n.value&&null!=(i=this.options_)&&i.autoBind&&(n.value=n.value.bind(null!=(o=e.proxy_)?o:e.target_));return(!1===(null==(a=this.options_)?void 0:a.deep)?df.ref:df).extend_(e,t,n,r)}function Qp(e,t){Dd("'"+this.annotationType_+"' cannot be used as a decorator")}var Zp={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function ef(e){return e||Zp}Object.freeze(Zp);var tf=Yp("observable"),nf=Yp("observable.ref",{enhancer:kp}),rf=Yp("observable.shallow",{enhancer:function(e,t,n){return null==e||gv(e)||Qg(e)||av(e)||cv(e)?e:Array.isArray(e)?df.array(e,{name:n,deep:!1}):Xd(e)?df.object(e,void 0,{name:n,deep:!1}):np(e)?df.map(e,{name:n,deep:!1}):rp(e)?df.set(e,{name:n,deep:!1}):void 0}}),af=Yp("observable.struct",{enhancer:function(e,t){return Rv(e,t)?t:e}}),of=_p(tf);function sf(e){return!0===e.deep?Tp:!1===e.deep?kp:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:Tp;var t,n,r}function cf(e,t,n){return bp(t)?tf.decorate_20223_(e,t):Jd(t)?void yp(e,t,tf):kg(e)?e:Xd(e)?df.object(e,t,n):Array.isArray(e)?df.array(e,t):np(e)?df.map(e,t):rp(e)?df.set(e,t):"object"==typeof e&&null!==e?e:df.box(e,t)}Ud(cf,of);var uf,lf,hf={box:function(e,t){var n=ef(t);return new Tf(e,sf(n),n.name,!0,n.equals)},array:function(e,t){var n=ef(t);return(!1===zf.useProxies||!1===n.proxy?Ev:Yg)(e,sf(n),n.name)},map:function(e,t){var n=ef(t);return new iv(e,sf(n),n.name)},set:function(e,t){var n=ef(t);return new sv(e,sf(n),n.name)},object:function(e,t,n){return Iv((function(){return function(e,t,n,r){var i=cp(t);return Iv((function(){var t=dv(e,r)[wp];ap(i).forEach((function(e){t.extend_(e,i[e],!n||(!(e in n)||n[e]))}))})),e}(!1===zf.useProxies||!1===(null==n?void 0:n.proxy)?dv({},n):function(e,t){var n,r;return zd(),e=dv(e,t),null!=(r=(n=e[wp]).proxy_)?r:n.proxy_=new Proxy(e,Lg)}({},n),e,t)}))},ref:_p(nf),shallow:_p(rf),deep:of,struct:_p(af)},df=Ud(cf,hf),pf="computed",ff=Bp(pf),gf=Bp("computed.struct",{equals:Ep.structural}),vf=function(e,t){if(bp(t))return ff.decorate_20223_(e,t);if(Jd(t))return yp(e,t,ff);if(Xd(e))return _p(Bp(pf,e));var n=Xd(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Pf(n)};Object.assign(vf,ff),vf.struct=_p(gf);var mf,_f=0,yf=1,bf=null!=(uf=null==(lf=Md((function(){}),"name"))?void 0:lf.configurable)&&uf,wf={value:"action",configurable:!0,writable:!1,enumerable:!1};function Of(e,t,n,r){function i(){return function(e,t,n,r,i){var a=function(e,t,n,r){var i=!1,a=0,o=zf.trackingDerivation,s=!t||!o;Jf();var c=zf.allowStateChanges;s&&(Mf(),c=Sf(!0));var u=Vf(!0),l={runAsAction_:s,prevDerivation_:o,prevAllowStateChanges_:c,prevAllowStateReads_:u,notifySpy_:i,startTime_:a,actionId_:yf++,parentActionId_:_f};return _f=l.actionId_,l}(0,t);try{return n.apply(r,i)}catch(e){throw a.error_=e,e}finally{!function(e){_f!==e.actionId_&&Dd(30);_f=e.parentActionId_,void 0!==e.error_&&(zf.suppressReactionErrors=!0);Af(e.prevAllowStateChanges_),Gf(e.prevAllowStateReads_),$f(),e.runAsAction_&&Bf(e.prevDerivation_);zf.suppressReactionErrors=!1}(a)}}(0,n,t,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,i.toString=function(){return t.toString()},bf&&(wf.value=e,Bd(i,"name",wf)),i}function Sf(e){var t=zf.allowStateChanges;return zf.allowStateChanges=e,t}function Af(e){zf.allowStateChanges=e}mf=Symbol.toPrimitive;var Ef,Tf=function(e){function t(t,n,r,i,a){var o;return void 0===r&&(r="ObservableValue"),void 0===a&&(a=Ep.default),(o=e.call(this,r)||this).enhancer=void 0,o.name_=void 0,o.equals=void 0,o.hasUnreportedChange_=!1,o.interceptors_=void 0,o.changeListeners_=void 0,o.value_=void 0,o.dehancer=void 0,o.enhancer=n,o.name_=r,o.equals=a,o.value_=n(t,void 0,r),o}dp(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==zf.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(Ng(this)){var t=xg(this,{object:this,type:Vg,newValue:e});if(!t)return zf.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?zf.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),jg(this)&&Mg(this,{type:Vg,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return Dg(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:Vg,newValue:this.value_,oldValue:void 0}),Ug(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return op(this.get())},n[mf]=function(){return this.valueOf()},t}(Op),kf=tp("ObservableValue",Tf);Ef=Symbol.toPrimitive;var Cf,If,Pf=function(){function e(e){this.dependenciesState_=Cf.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Cf.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Lf(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=If.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||Dd(31),this.derivation=e.get,this.name_=e.name||"ComputedValue",e.set&&(this.setter_=Of("ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?Ep.structural:Ep.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==Cf.UP_TO_DATE_)return;e.lowestObserverState_=Cf.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Cf.UP_TO_DATE_&&(e.dependenciesState_=Cf.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.get=function(){if(this.isComputing_&&Dd(32,this.name_,this.derivation),0!==zf.inBatch||0!==this.observers_.size||this.keepAlive_){if(Xf(this),Df(this)){var e=zf.trackingContext;this.keepAlive_&&!e&&(zf.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===Cf.STALE_)return;e.lowestObserverState_=Cf.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Cf.POSSIBLY_STALE_?t.dependenciesState_=Cf.STALE_:t.dependenciesState_===Cf.UP_TO_DATE_&&(e.lowestObserverState_=Cf.UP_TO_DATE_)}))}(this),zf.trackingContext=e}}else Df(this)&&(this.warnAboutUntrackedRead_(),Jf(),this.value_=this.computeValue_(!1),$f());var t=this.value_;if(Nf(t))throw t.cause;return t},t.set=function(e){if(this.setter_){this.isRunningSetter_&&Dd(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else Dd(34,this.name_)},t.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Cf.NOT_TRACKING_,n=this.computeValue_(!0),r=t||Nf(e)||Nf(n)||!this.equals_(e,n);return r&&(this.value_=n),r},t.computeValue_=function(e){this.isComputing_=!0;var t,n=Sf(!1);if(e)t=xf(this,this.derivation,this.scope_);else if(!0===zf.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new Lf(e)}return Af(n),this.isComputing_=!1,t},t.suspend_=function(){this.keepAlive_||(jf(this),this.value_=void 0)},t.observe_=function(e,t){var n=this,r=!0,i=void 0;return function(e,t){var n,r,i,a,o;void 0===t&&(t=Fd);var s,c=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(t.scheduler||t.delay){var u=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:gg}(t),l=!1;s=new Zf(c,(function(){l||(l=!0,u((function(){l=!1,s.isDisposed_||s.track(h)})))}),t.onError,t.requiresObservable)}else s=new Zf(c,(function(){this.track(h)}),t.onError,t.requiresObservable);function h(){e(s)}null!=(i=t)&&null!=(a=i.signal)&&a.aborted||s.schedule_();return s.getDisposer_(null==(o=t)?void 0:o.signal)}((function(){var a=n.get();if(!r||t){var o=Mf();e({observableKind:"computed",debugObjectName:n.name_,type:Vg,object:n,newValue:a,oldValue:i}),Bf(o)}r=!1,i=a}))},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return op(this.get())},t[Ef]=function(){return this.valueOf()},e}(),Rf=tp("ComputedValue",Pf);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(Cf||(Cf={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(If||(If={}));var Lf=function(e){this.cause=void 0,this.cause=e};function Nf(e){return e instanceof Lf}function Df(e){switch(e.dependenciesState_){case Cf.UP_TO_DATE_:return!1;case Cf.NOT_TRACKING_:case Cf.STALE_:return!0;case Cf.POSSIBLY_STALE_:for(var t=Vf(!0),n=Mf(),r=e.observing_,i=r.length,a=0;a<i;a++){var o=r[a];if(Rf(o)){if(zf.disableErrorBoundaries)o.get();else try{o.get()}catch(e){return Bf(n),Gf(t),!0}if(e.dependenciesState_===Cf.STALE_)return Bf(n),Gf(t),!0}}return Ff(e),Bf(n),Gf(t),!1}}function xf(e,t,n){var r=Vf(!0);Ff(e),e.newObserving_=new Array(0===e.runId_?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++zf.runId;var i,a=zf.trackingDerivation;if(zf.trackingDerivation=e,zf.inBatch++,!0===zf.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new Lf(e)}return zf.inBatch--,zf.trackingDerivation=a,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=Cf.UP_TO_DATE_,i=0,a=e.unboundDepsCount_,o=0;o<a;o++){var s=n[o];0===s.diffValue_&&(s.diffValue_=1,i!==o&&(n[i]=s),i++),s.dependenciesState_>r&&(r=s.dependenciesState_)}n.length=i,e.newObserving_=null,a=t.length;for(;a--;){var c=t[a];0===c.diffValue_&&Hf(c,e),c.diffValue_=0}for(;i--;){var u=n[i];1===u.diffValue_&&(u.diffValue_=0,Wf(u,e))}r!==Cf.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),Gf(r),i}function jf(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)Hf(t[n],e);e.dependenciesState_=Cf.NOT_TRACKING_}function Uf(e){var t=Mf();try{return e()}finally{Bf(t)}}function Mf(){var e=zf.trackingDerivation;return zf.trackingDerivation=null,e}function Bf(e){zf.trackingDerivation=e}function Vf(e){var t=zf.allowStateReads;return zf.allowStateReads=e,t}function Gf(e){zf.allowStateReads=e}function Ff(e){if(e.dependenciesState_!==Cf.UP_TO_DATE_){e.dependenciesState_=Cf.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Cf.UP_TO_DATE_}}var Yf=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Kf=!0,zf=function(){var e=jd();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Kf=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new Yf).version&&(Kf=!1),Kf?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new Yf):(setTimeout((function(){Dd(35)}),1),new Yf)}();function Wf(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Hf(e,t){e.observers_.delete(t),0===e.observers_.size&&qf(e)}function qf(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,zf.pendingUnobservations.push(e))}function Jf(){zf.inBatch++}function $f(){if(0==--zf.inBatch){ng();for(var e=zf.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Pf&&n.suspend_())}zf.pendingUnobservations=[]}}function Xf(e){var t=zf.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&zf.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),e.isBeingObserved_):(0===e.observers_.size&&zf.inBatch>0&&qf(e),!1)}function Qf(e){e.lowestObserverState_!==Cf.STALE_&&(e.lowestObserverState_=Cf.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Cf.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Cf.STALE_})))}var Zf=function(){function e(e,t,n,r){void 0===e&&(e="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Cf.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=If.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,zf.pendingReactions.push(this),ng())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){Jf(),this.isScheduled_=!1;var e=zf.trackingContext;if(zf.trackingContext=this,Df(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}zf.trackingContext=e,$f()}},t.track=function(e){if(!this.isDisposed_){Jf(),this.isRunning_=!0;var t=zf.trackingContext;zf.trackingContext=this;var n=xf(this,e,void 0);zf.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&jf(this),Nf(n)&&this.reportExceptionInDerivation_(n.cause),$f()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(zf.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";zf.suppressReactionErrors||console.error(n,e),zf.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Jf(),jf(this),$f()))},t.getDisposer_=function(e){var t=this,n=function n(){t.dispose(),null==e||null==e.removeEventListener||e.removeEventListener("abort",n)};return null==e||null==e.addEventListener||e.addEventListener("abort",n),n[wp]=this,n},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){},e}(),eg=100,tg=function(e){return e()};function ng(){zf.inBatch>0||zf.isRunningReactions||tg(rg)}function rg(){zf.isRunningReactions=!0;for(var e=zf.pendingReactions,t=0;e.length>0;){++t===eg&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}zf.isRunningReactions=!1}var ig=tp("Reaction",Zf);var ag="action",og="autoAction",sg=Ip(ag),cg=Ip("action.bound",{bound:!0}),ug=Ip(og,{autoAction:!0}),lg=Ip("autoAction.bound",{autoAction:!0,bound:!0});function hg(e){return function(t,n){return qd(t)?Of(t.name||"<unnamed action>",t,e):qd(n)?Of(t,n,e):bp(n)?(e?ug:sg).decorate_20223_(t,n):Jd(n)?yp(t,n,e?ug:sg):Jd(t)?_p(Ip(e?og:ag,{name:t,autoAction:e})):void 0}}var dg=hg(!1);Object.assign(dg,sg);var pg=hg(!0);function fg(e){return qd(e)&&!0===e.isMobxAction}Object.assign(pg,ug),dg.bound=_p(cg),pg.bound=_p(lg);var gg=function(e){return e()};var vg="onBO",mg="onBUO";function _g(e,t,n){return yg(mg,e,t,n)}function yg(e,t,n,r){var i="function"==typeof r?Tv(t,n):Tv(t),a=qd(r)?r:n,o=e+"L";return i[o]?i[o].add(a):i[o]=new Set([a]),function(){var e=i[o];e&&(e.delete(a),0===e.size&&delete i[o])}}var bg=0;function wg(){this.message="FLOW_CANCELLED"}wg.prototype=Object.create(Error.prototype);var Og=Dp("flow"),Sg=Dp("flow.bound",{bound:!0}),Ag=Object.assign((function(e,t){if(bp(t))return Og.decorate_20223_(e,t);if(Jd(t))return yp(e,t,Og);var n=e,r=n.name||"<unnamed flow>",i=function(){var e,t=arguments,i=++bg,a=dg(r+" - runid: "+i+" - init",n).apply(this,t),o=void 0,s=new Promise((function(t,n){var s=0;function c(e){var t;o=void 0;try{t=dg(r+" - runid: "+i+" - yield "+s++,a.next).call(a,e)}catch(e){return n(e)}l(t)}function u(e){var t;o=void 0;try{t=dg(r+" - runid: "+i+" - yield "+s++,a.throw).call(a,e)}catch(e){return n(e)}l(t)}function l(e){if(!qd(null==e?void 0:e.then))return e.done?t(e.value):(o=Promise.resolve(e.value)).then(c,u);e.then(l,n)}e=n,c(void 0)}));return s.cancel=dg(r+" - runid: "+i+" - cancel",(function(){try{o&&Eg(o);var t=a.return(void 0),n=Promise.resolve(t.value);n.then(Hd,Hd),Eg(n),e(new wg)}catch(t){e(t)}})),s};return i.isMobXFlow=!0,i}),Og);function Eg(e){qd(e.cancel)&&e.cancel()}function Tg(e){return!0===(null==e?void 0:e.isMobXFlow)}function kg(e){return function(e,t){return!!e&&(void 0!==t?!!gv(e)&&e[wp].values_.has(t):gv(e)||!!e[wp]||Sp(e)||ig(e)||Rf(e))}(e)}function Cg(e,t,n){return e.set(t,n),n}function Ig(e,t){if(null==e||"object"!=typeof e||e instanceof Date||!kg(e))return e;if(kf(e)||Rf(e))return Ig(e.get(),t);if(t.has(e))return t.get(e);if(Qg(e)){var n=Cg(t,e,new Array(e.length));return e.forEach((function(e,r){n[r]=Ig(e,t)})),n}if(cv(e)){var r=Cg(t,e,new Set);return e.forEach((function(e){r.add(Ig(e,t))})),r}if(av(e)){var i=Cg(t,e,new Map);return e.forEach((function(e,n){i.set(n,Ig(e,t))})),i}var a=Cg(t,e,{});return function(e){if(gv(e))return e[wp].ownKeys_();Dd(38)}(e).forEach((function(n){Vd.propertyIsEnumerable.call(e,n)&&(a[n]=Ig(e[n],t))})),a}function Pg(e,t){void 0===t&&(t=void 0),Jf();try{return e.apply(t)}finally{$f()}}function Rg(e){return e[wp]}Ag.bound=_p(Sg);var Lg={has:function(e,t){return Rg(e).has_(t)},get:function(e,t){return Rg(e).get_(t)},set:function(e,t,n){var r;return!!Jd(t)&&(null==(r=Rg(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!Jd(t)&&(null==(n=Rg(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=Rg(e).defineProperty_(t,n))||r},ownKeys:function(e){return Rg(e).ownKeys_()},preventExtensions:function(e){Dd(13)}};function Ng(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function Dg(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),Wd((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function xg(e,t){var n=Mf();try{for(var r=[].concat(e.interceptors_||[]),i=0,a=r.length;i<a&&((t=r[i](t))&&!t.type&&Dd(14),t);i++);return t}finally{Bf(n)}}function jg(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function Ug(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),Wd((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Mg(e,t){var n=Mf(),r=e.changeListeners_;if(r){for(var i=0,a=(r=r.slice()).length;i<a;i++)r[i](t);Bf(n)}}var Bg="splice",Vg="update",Gg={get:function(e,t){var n=e[wp];return t===wp?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?sp(Kg,t)?Kg[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[wp];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){Dd(15)}},Fg=function(){function e(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new Op(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return Dg(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Ug(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&Dd("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var n=new Array(e-t),r=0;r<e-t;r++)n[r]=void 0;this.spliceWithArray_(t,0,n)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&Dd(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&Av(e+t+1)},t.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=Gd),Ng(this)){var a=xg(this,{object:this.proxy_,type:Bg,index:e,removedCount:t,added:n});if(!a)return Gd;t=a.removedCount,n=a.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var o=n.length-t;this.updateArrayLength_(i,o)}var s=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,s),this.dehanceValues_(s)},t.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var i=this.values_.slice(e,e+t),a=this.values_.slice(e+t);this.values_.length+=n.length-t;for(var o=0;o<n.length;o++)this.values_[e+o]=n[o];for(var s=0;s<a.length;s++)this.values_[e+n.length+s]=a[s];return i},t.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,i=jg(this),a=i||r?{observableKind:"array",object:this.proxy_,type:Vg,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),i&&Mg(this,a)},t.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,i=jg(this),a=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:Bg,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&Mg(this,a)},t.get_=function(e){if(!(this.legacyMode_&&e>=this.values_.length))return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx] Out of bounds read: "+e)},t.set_=function(e,t){var n=this.values_;if(this.legacyMode_&&e>n.length&&Dd(17,e,n.length),e<n.length){this.atom_;var r=n[e];if(Ng(this)){var i=xg(this,{type:Vg,object:this.proxy_,index:e,newValue:t});if(!i)return;t=i.newValue}(t=this.enhancer_(t,r))!==r&&(n[e]=t,this.notifyArrayChildUpdate_(e,t,r))}else{for(var a=new Array(e+1-n.length),o=0;o<a.length-1;o++)a[o]=void 0;a[a.length-1]=t,this.spliceWithArray_(n.length,0,a)}},e}();function Yg(e,t,n,r){return void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),zd(),Iv((function(){var i=new Fg(n,t,r,!1);ep(i.values_,wp,i);var a=new Proxy(i.values_,Gg);return i.proxy_=a,e&&e.length&&i.spliceWithArray_(0,0,e),a}))}var Kg={clear:function(){return this.splice(0)},replace:function(e){var t=this[wp];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=this[wp];switch(arguments.length){case 0:return[];case 1:return a.spliceWithArray_(e);case 2:return a.spliceWithArray_(e,t)}return a.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[wp].spliceWithArray_(e,t,n)},push:function(){for(var e=this[wp],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[wp].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[wp],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return zf.trackingDerivation&&Dd(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){zf.trackingDerivation&&Dd(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[wp],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function zg(e,t){"function"==typeof Array.prototype[e]&&(Kg[e]=t(e))}function Wg(e){return function(){var t=this[wp];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function Hg(e){return function(t,n){var r=this,i=this[wp];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e]((function(e,i){return t.call(n,e,i,r)}))}}function qg(e){return function(){var t=this,n=this[wp];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(e,n,r){return i(e,n,r,t)},r[e].apply(r,arguments)}}zg("at",Wg),zg("concat",Wg),zg("flat",Wg),zg("includes",Wg),zg("indexOf",Wg),zg("join",Wg),zg("lastIndexOf",Wg),zg("slice",Wg),zg("toString",Wg),zg("toLocaleString",Wg),zg("toSorted",Wg),zg("toSpliced",Wg),zg("with",Wg),zg("every",Hg),zg("filter",Hg),zg("find",Hg),zg("findIndex",Hg),zg("findLast",Hg),zg("findLastIndex",Hg),zg("flatMap",Hg),zg("forEach",Hg),zg("map",Hg),zg("some",Hg),zg("toReversed",Hg),zg("reduce",qg),zg("reduceRight",qg);var Jg,$g,Xg=tp("ObservableArrayAdministration",Fg);function Qg(e){return $d(e)&&Xg(e[wp])}var Zg={},ev="add",tv="delete";Jg=Symbol.iterator,$g=Symbol.toStringTag;var nv,rv,iv=function(){function e(e,t,n){var r=this;void 0===t&&(t=Tp),void 0===n&&(n="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[wp]=Zg,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=n,qd(Map)||Dd(18),Iv((function(){r.keysAtom_=Ap("ObservableMap.keys()"),r.data_=new Map,r.hasMap_=new Map,e&&r.merge(e)}))}var t=e.prototype;return t.has_=function(e){return this.data_.has(e)},t.has=function(e){var t=this;if(!zf.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new Tf(this.has_(e),kp,"ObservableMap.key?",!1);this.hasMap_.set(e,r),_g(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},t.set=function(e,t){var n=this.has_(e);if(Ng(this)){var r=xg(this,{type:n?Vg:ev,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},t.delete=function(e){var t=this;if((this.keysAtom_,Ng(this))&&!xg(this,{type:tv,object:this,name:e}))return!1;if(this.has_(e)){var n=jg(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:tv,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return Pg((function(){var n;t.keysAtom_.reportChanged(),null==(n=t.hasMap_.get(e))||n.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&Mg(this,r),!0}return!1},t.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==zf.UNCHANGED){var r=jg(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:Vg,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&Mg(this,i)}},t.addValue_=function(e,t){var n=this;this.keysAtom_,Pg((function(){var r,i=new Tf(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,i),t=i.value_,null==(r=n.hasMap_.get(e))||r.setNewValue_(!0),n.keysAtom_.reportChanged()}));var r=jg(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:ev,object:this,name:e,newValue:t}:null;r&&Mg(this,i)},t.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var e=this,t=this.keys();return Dv({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},t.entries=function(){var e=this,t=this.keys();return Dv({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},t[Jg]=function(){return this.entries()},t.forEach=function(e,t){for(var n,r=vp(this);!(n=r()).done;){var i=n.value,a=i[0],o=i[1];e.call(t,o,a,this)}},t.merge=function(e){var t=this;return av(e)&&(e=new Map(e)),Pg((function(){Xd(e)?function(e){var t=Object.keys(e);if(!ip)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return Vd.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(n){return t.set(n,e[n])})):Array.isArray(e)?e.forEach((function(e){var n=e[0],r=e[1];return t.set(n,r)})):np(e)?(e.constructor!==Map&&Dd(19,e),e.forEach((function(e,n){return t.set(n,e)}))):null!=e&&Dd(20,e)})),this},t.clear=function(){var e=this;Pg((function(){Uf((function(){for(var t,n=vp(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.replace=function(e){var t=this;return Pg((function(){for(var n,r=function(e){if(np(e)||av(e))return e;if(Array.isArray(e))return new Map(e);if(Xd(e)){var t=new Map;for(var n in e)t.set(n,e[n]);return t}return Dd(21,e)}(e),i=new Map,a=!1,o=vp(t.data_.keys());!(n=o()).done;){var s=n.value;if(!r.has(s))if(t.delete(s))a=!0;else{var c=t.data_.get(s);i.set(s,c)}}for(var u,l=vp(r.entries());!(u=l()).done;){var h=u.value,d=h[0],p=h[1],f=t.data_.has(d);if(t.set(d,p),t.data_.has(d)){var g=t.data_.get(d);i.set(d,g),f||(a=!0)}}if(!a)if(t.data_.size!==i.size)t.keysAtom_.reportChanged();else for(var v=t.data_.keys(),m=i.keys(),_=v.next(),y=m.next();!_.done;){if(_.value!==y.value){t.keysAtom_.reportChanged();break}_=v.next(),y=m.next()}t.data_=i})),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(e,t){return Ug(this,e)},t.intercept_=function(e){return Dg(this,e)},lp(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:$g,get:function(){return"Map"}}]),e}(),av=tp("ObservableMap",iv);var ov={};nv=Symbol.iterator,rv=Symbol.toStringTag;var sv=function(){function e(e,t,n){var r=this;void 0===t&&(t=Tp),void 0===n&&(n="ObservableSet"),this.name_=void 0,this[wp]=ov,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=n,qd(Set)||Dd(22),this.enhancer_=function(e,r){return t(e,r,n)},Iv((function(){r.atom_=Ap(r.name_),e&&r.replace(e)}))}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.clear=function(){var e=this;Pg((function(){Uf((function(){for(var t,n=vp(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},t.forEach=function(e,t){for(var n,r=vp(this);!(n=r()).done;){var i=n.value;e.call(t,i,i,this)}},t.add=function(e){var t=this;if((this.atom_,Ng(this))&&!xg(this,{type:ev,object:this,newValue:e}))return this;if(!this.has(e)){Pg((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=jg(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:ev,object:this,newValue:e}:null;n&&Mg(this,r)}return this},t.delete=function(e){var t=this;if(Ng(this)&&!xg(this,{type:tv,object:this,oldValue:e}))return!1;if(this.has(e)){var n=jg(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:tv,object:this,oldValue:e}:null;return Pg((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&Mg(this,r),!0}return!1},t.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},t.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Dv({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return Dv({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},t.replace=function(e){var t=this;return cv(e)&&(e=new Set(e)),Pg((function(){Array.isArray(e)||rp(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&Dd("Cannot initialize set from "+e)})),this},t.observe_=function(e,t){return Ug(this,e)},t.intercept_=function(e){return Dg(this,e)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[nv]=function(){return this.values()},lp(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:rv,get:function(){return"Set"}}]),e}(),cv=tp("ObservableSet",sv),uv=Object.create(null),lv="remove",hv=function(){function e(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=qp),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new Op("ObservableObject.keys"),this.isPlainObject_=Xd(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof Pf)return n.set(t),!0;if(Ng(this)){var r=xg(this,{type:Vg,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==zf.UNCHANGED){var i=jg(this),a=i?{type:Vg,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&Mg(this,a)}return!0},t.get_=function(e){return zf.trackingDerivation&&!sp(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,n){return void 0===n&&(n=!1),sp(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},t.has_=function(e){if(!zf.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new Tf(e in this.target_,kp,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(!(e in this.target_)){var n;if(null!=(n=this.target_[mp])&&n[e])return;Dd(1,t.annotationType_,this.name_+"."+e.toString())}for(var r=this.target_;r&&r!==Vd;){var i=Md(r,e);if(i){var a=t.make_(this,e,i,r);if(0===a)return;if(1===a)break}r=Object.getPrototypeOf(r)}vv(this,t,e)}},t.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);var i=n.extend_(this,e,t,r);return i&&vv(this,n,e),i},t.defineProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{Jf();var r=this.delete_(e);if(!r)return r;if(Ng(this)){var i=xg(this,{object:this.proxy_||this.target_,name:e,type:ev,newValue:t.value});if(!i)return null;var a=i.newValue;t.value!==a&&(t=hp({},t,{value:a}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else Bd(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{$f()}return!0},t.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1),this.keysAtom_;try{Jf();var i=this.delete_(e);if(!i)return i;if(Ng(this)){var a=xg(this,{object:this.proxy_||this.target_,name:e,type:ev,newValue:t});if(!a)return null;t=a.newValue}var o=fv(e),s={configurable:!zf.safeDescriptors||this.isPlainObject_,enumerable:!0,get:o.get,set:o.set};if(r){if(!Reflect.defineProperty(this.target_,e,s))return!1}else Bd(this.target_,e,s);var c=new Tf(t,n,"ObservableObject.key",!1);this.values_.set(e,c),this.notifyPropertyAddition_(e,c.value_)}finally{$f()}return!0},t.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1),this.keysAtom_;try{Jf();var r=this.delete_(e);if(!r)return r;if(Ng(this))if(!xg(this,{object:this.proxy_||this.target_,name:e,type:ev,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=fv(e),a={configurable:!zf.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,e,a))return!1}else Bd(this.target_,e,a);this.values_.set(e,new Pf(t)),this.notifyPropertyAddition_(e,void 0)}finally{$f()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),this.keysAtom_,!sp(this.target_,e))return!0;if(Ng(this)&&!xg(this,{object:this.proxy_||this.target_,name:e,type:lv}))return null;try{var n,r;Jf();var i,a=jg(this),o=this.values_.get(e),s=void 0;if(!o&&a)s=null==(i=Md(this.target_,e))?void 0:i.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(o&&(this.values_.delete(e),o instanceof Tf&&(s=o.value_),Qf(o)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),a){var c={type:lv,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:s,name:e};0,a&&Mg(this,c)}}finally{$f()}return!0},t.observe_=function(e,t){return Ug(this,e)},t.intercept_=function(e){return Dg(this,e)},t.notifyPropertyAddition_=function(e,t){var n,r,i=jg(this);if(i){var a=i?{type:ev,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;i&&Mg(this,a)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),ap(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function dv(e,t){var n;if(sp(e,wp))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",i=new hv(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:Jp(e):void 0}(t));return Zd(e,wp,i),e}var pv=tp("ObservableObjectAdministration",hv);function fv(e){return uv[e]||(uv[e]={get:function(){return this[wp].getObservablePropValue_(e)},set:function(t){return this[wp].setObservablePropValue_(e,t)}})}function gv(e){return!!$d(e)&&pv(e[wp])}function vv(e,t,n){var r;null==(r=e.target_[mp])||delete r[n]}var mv=Ov(0),_v=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,!1===e}(),yv=0,bv=function(){};!function(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):void 0!==e.prototype.__proto__?e.prototype.__proto__=t:e.prototype=t}(bv,Array.prototype);var wv=function(e,t,n){function r(t,n,r,i){var a;return void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),a=e.call(this)||this,Iv((function(){var e=new Fg(r,n,i,!0);e.proxy_=fp(a),ep(fp(a),wp,e),t&&t.length&&a.spliceWithArray(0,0,t),_v&&Object.defineProperty(fp(a),"0",mv)})),a}dp(r,e);var i=r.prototype;return i.concat=function(){this[wp].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return Qg(e)?e.slice():e})))},i[n]=function(){var e=this,t=0;return Dv({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},lp(r,[{key:"length",get:function(){return this[wp].getArrayLength_()},set:function(e){this[wp].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),r}(bv,Symbol.toStringTag,Symbol.iterator);function Ov(e){return{enumerable:!1,configurable:!0,get:function(){return this[wp].get_(e)},set:function(t){this[wp].set_(e,t)}}}function Sv(e){Bd(wv.prototype,""+e,Ov(e))}function Av(e){if(e>yv){for(var t=yv;t<e+100;t++)Sv(t);yv=e}}function Ev(e,t,n){return new wv(e,t,n)}function Tv(e,t){if("object"==typeof e&&null!==e){if(Qg(e))return void 0!==t&&Dd(23),e[wp].atom_;if(cv(e))return e.atom_;if(av(e)){if(void 0===t)return e.keysAtom_;var n=e.data_.get(t)||e.hasMap_.get(t);return n||Dd(25,t,Cv(e)),n}if(gv(e)){if(!t)return Dd(26);var r=e[wp].values_.get(t);return r||Dd(27,t,Cv(e)),r}if(Sp(e)||Rf(e)||ig(e))return e}else if(qd(e)&&ig(e[wp]))return e[wp];Dd(28)}function kv(e,t){return e||Dd(29),void 0!==t?kv(Tv(e,t)):Sp(e)||Rf(e)||ig(e)||av(e)||cv(e)?e:e[wp]?e[wp]:void Dd(24,e)}function Cv(e,t){var n;if(void 0!==t)n=Tv(e,t);else{if(fg(e))return e.name;n=gv(e)||av(e)||cv(e)?kv(e):Tv(e)}return n.name_}function Iv(e){var t=Mf(),n=Sf(!0);Jf();try{return e()}finally{$f(),Af(n),Bf(t)}}Object.entries(Kg).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&Zd(wv.prototype,t,n)})),Av(1e3);var Pv=Vd.toString;function Rv(e,t,n){return void 0===n&&(n=-1),Lv(e,t,n)}function Lv(e,t,n,r,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof t)return!1;var o=Pv.call(e);if(o!==Pv.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=Nv(e),t=Nv(t);var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var c=e.constructor,u=t.constructor;if(c!==u&&!(qd(c)&&c instanceof c&&qd(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var l=(r=r||[]).length;l--;)if(r[l]===e)return i[l]===t;if(r.push(e),i.push(t),s){if((l=e.length)!==t.length)return!1;for(;l--;)if(!Lv(e[l],t[l],n-1,r,i))return!1}else{var h,d=Object.keys(e);if(l=d.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!sp(t,h=d[l])||!Lv(e[h],t[h],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function Nv(e){return Qg(e)?e.slice():np(e)||av(e)||rp(e)||cv(e)?Array.from(e.entries()):e}function Dv(e){return e[Symbol.iterator]=xv,e}function xv(){return this}["Symbol","Map","Set"].forEach((function(e){void 0===jd()[e]&&Dd("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:Cv},$mobx:wp});const jv=e=>e.profiles.find((t=>t.id===e.activeId)),Uv=(e,t)=>{const n=t.profiles.findIndex((e=>e.id===t.activeId));t.profiles[n].diff=e},Mv=(e,t)=>{const n=JSON.parse(JSON.stringify(e.state)),r=jv(n).diff;t.forEach((e=>{const{path:t}=e,i=((e,t)=>{const n=t.split("."),r=dc({},e);let i=r;for(let e=0;e<n.length-1;e++)i[n[e]]||(i[n[e]]={}),i=i[n[e]];return delete i[n[n.length-1]],r})(r,t);Uv(i,n)})),e.state=n},Bv=(e,t)=>{const n=JSON.parse(JSON.stringify(e.state));t.forEach((e=>{const{path:t,value:r}=e,i=((e,t,n)=>{const r=t.split("."),i=dc({},e);let a=i;for(let e=0;e<r.length-1;e++)a[r[e]]||(a[r[e]]={}),a=a[r[e]];return a[r[r.length-1]]=n,i})(jv(n).diff,t,r);Uv(i,n)})),e.state=n};const Vv=new class extends Nd{constructor(){super({activeId:"Default",profileLimit:8,shortenedProfileName:15,profileNameTruncateAt:23,profiles:[{id:"Default",name:"Default",default:!0,diff:{}}]},fc,"th.rw4gc.profile.store")}setActiveProfileId(e){const t=dc({},this.state,{activeId:e});this.state=t}createNewGuid(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}duplicateProfile(e){const t=dc({},this.state),n=dc({},t.profiles.find((t=>t.id===e))),r={name:`${n.name}`,diff:n.diff,id:this.createNewGuid()};return t.profiles.push(r),t.activeId=r.id,this.state=t,r.id}deleteProfile(e){const t=dc({},this.state),n=t.profiles.filter((t=>t.id!==e));t.profiles=n,t.activeId===e&&(t.activeId=t.profiles[0].id,this.setActiveProfileId(t.activeId)),this.state=t}renameProfile(e,t){if(""===t.trim())return;const n=dc({},this.state);n.profiles.find((t=>t.id===e)).name=`${t.slice(0,this.state.profileNameTruncateAt)}`,this.state=n}setDefaultProfileDiff(e){this.state.profiles.find((e=>e.default)).diff=e}setActiveProfileDiff(e){jv().diff=e}removePropertyByPath(e){const t=jv(),n=e.split(".");let r=t.diff;for(let e=0;e<n.length-1;e++)if(r=r[n[e]],"object"!=typeof r||null===r)return;delete r[n[n.length-1]]}resetProfile(e){const t=dc({},this.state);t.profiles.find((t=>t.id===e)).diff={},this.state=t}setSpeechSpeed(e){Bv(this,"speech.speed")}createNewProfileAndCloseInput(e){if(""===e.trim())return"";const t=this.createNewGuid();return this.state=dc({},this.state,{profiles:this.state.profiles.concat([{id:t,name:e.slice(0,this.state.profileNameTruncateAt),diff:{}}])}),t}};const Gv=new class extends pc{setProfileProperty(e){Bv(Vv,e)}removeProperty(e){Mv(Vv,e)}};const Fv=function(e){var t,n;switch(e){default:case"default":return[{name:"checkit",key:"settings_features_checkit",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"prediction",key:"settings_features_prediction",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"clicktospeak",key:"settings_features_hover_speech",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"dictionary",key:"settings_features_dictionary",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"picturedictionary",key:"settings_features_picture_dictionary",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"play",key:"settings_features_play",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"pause",key:"settings_features_pause",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"stop",key:"settings_features_stop",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"screenshotreader",key:"settings_features_screenshot_reader",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"audiomaker",key:"settings_features_audio_maker",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"websearch",key:"settings_features_web_search",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"screenmasking",key:"settings_features_screen_masking",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"talkandtype",key:"settings_features_talk_and_type",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"translator",key:"settings_features_translator",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studyyellow",key:"settings_features_yellow_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studygreen",key:"settings_features_green_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studyblue",key:"settings_features_blue_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studypink",key:"settings_features_pink_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studyclear",key:"settings_features_clear_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studycollect",key:"settings_features_collect_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"vocablist",key:"settings_features_vocabulary",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"simplify",key:"settings_features_simplify_page",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"rewordify",key:"settings_features_rewordify",enabled:!0,dragging:!1,hidden:!1,supported:!(null==(t=navigator.userAgentData)||!t.brands.find((({brand:e,version:t})=>"Chromium"===e&&parseFloat(t,10)>=102)))},{name:"voicenote",key:"settings_features_voicenote",enabled:!0,dragging:!1,supported:!0},{name:"practicereadingaloud",key:"settings_features_practice_reading_aloud",enabled:!0,dragging:!1,hidden:!1,supported:!0}];case"workplace":return[{name:"play",key:"settings_features_play",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"pause",key:"settings_features_pause",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"stop",key:"settings_features_stop",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"checkit",key:"settings_features_checkit",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"prediction",key:"settings_features_prediction",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"dictionary",key:"settings_features_dictionary",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"picturedictionary",key:"settings_features_picture_dictionary",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"screenshotreader",key:"settings_features_screenshot_reader",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"talkandtype",key:"settings_features_talk_and_type",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"screenmasking",key:"settings_features_screen_masking",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studyyellow",key:"settings_features_yellow_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studygreen",key:"settings_features_green_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studyblue",key:"settings_features_blue_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studypink",key:"settings_features_pink_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studyclear",key:"settings_features_clear_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"studycollect",key:"settings_features_collect_highlight",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"vocablist",key:"settings_features_vocabulary",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"translator",key:"settings_features_translator",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"voicenote",key:"settings_features_voicenote",enabled:!0,dragging:!1,supported:!0},{name:"audiomaker",key:"settings_features_audio_maker",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"clicktospeak",key:"settings_features_hover_speech",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"websearch",key:"settings_features_web_search",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"simplify",key:"settings_features_simplify_page",enabled:!0,dragging:!1,hidden:!1,supported:!0},{name:"rewordify",key:"settings_features_rewordify",enabled:!0,dragging:!1,hidden:!1,supported:!(null==(n=navigator.userAgentData)||!n.brands.find((({brand:e,version:t})=>"Chromium"===e&&parseFloat(t,10)>=102)))},{name:"practicereadingaloud",key:"settings_features_practice_reading_aloud",enabled:!1,dragging:!1,hidden:!1,supported:!1}]}},Yv=new class extends Nd{constructor(){const e={speech:{voice:"Ava",speed:50,reading:!0,speakAsIType:{onEachWord:!1,onEachSentence:!1},translation:"es"},prediction:{numberOfResults:10,general:{followCursor:!0,predictAhead:!0,predictAheadPolicy:!0,predictOnHover:!1},fontSize:"15"},checkIt:{dictionary:[],readonhover:!1},screenMasking:{backgroundColor:"#000000",readingLightColor:"#fffffe",backgroundOpacity:50,readingLightOpacity:50,readingLightHeight:200,readingLight:!0},voiceTyping:{voiceInput:"GDocs"},language:{language:"en_GB",features:"en_GB"},rewordify:{fluencyLevel:1},features:[...Fv("education")],theme:"Light",systemTheme:"Light",about:{activateButtonDisabled:!0},defaultsSet:!1},t=JSON.parse(JSON.stringify(e));super(t,fc,"th.rw4gc.settings.store",!0,!0),this.initialState=e,this.state=t}initialise(e){if(super.initialise(),e){if("workplace"===e){const e=this.state.features.map((e=>e.name)).indexOf("practicereadingaloud");e>-1&&(this.state.features[e].enabled=!1,this.state.features[e].supported=!1)}this.setMarketFeatures(e)}}setWholeState(e){JSON.stringify(Ig(this.state,new Map))!=JSON.stringify(e)&&(this.state=dc({},e))}setDefaultState(){this.setWholeState(this.initialState)}setButtonSupported(e,t){const n=this.state.features.map((e=>e.name)).indexOf(e);n>-1&&(this.state.features[n].supported=t)}setScreenMaskingState(e){this.sate=dc({},this.state,{screenMasking:dc({},this.state.screenMasking,e)})}updateInitialStateFromLocalAndPolicy(e,t,n,r,i,a,o,s,c,u){this.initialState=dc({},this.initialState,{speech:dc({},this.initialState.speech,{voice:e,speed:t,reading:n,speakAsIType:dc({},this.initialState.speech.speakAsIType,{onEachWord:r,onEachSentence:i}),translation:a}),language:dc({},this.initialState.language,{language:o,features:s}),defaultsSet:c}),u&&(this.initialState=dc({},this.initialState,{speech:dc({},this.initialState.speech,{voice:u.voice?u.voice:this.initialState.speech.voice,speed:u.speed?u.speed:this.initialState.speech.speed,reading:u.reading?u.reading:this.initialState.speech.reading,speakAsIType:dc({},this.initialState.speech.speakAsIType,{onEachWord:u.onEachWord?u.onEachWord:this.initialState.speech.speakAsIType.onEachWord,onEachSentence:u.onEachSentence?u.onEachSentence:this.initialState.speech.speakAsIType.onEachSentence})}),translation:u.translation?u.translation:this.initialState.translation,prediction:dc({},this.initialState.prediction,{general:dc({},this.initialState.prediction.general,{followCursor:u.followCursor?u.followCursor:this.initialState.prediction.general.followCursor,predictAhead:u.predictAhead?u.predictAhead:this.initialState.prediction.general.predictAhead,predictOnHover:u.predictOnHover?u.predictOnHover:this.initialState.prediction.general.predictOnHover}),numberOfResults:u.numberOfResults?u.numberOfResults:this.initialState.prediction.numberOfResults,fontSize:u.fontSize?u.fontSize:this.initialState.prediction.fontSize}),checkIt:dc({},this.initialState.checkIt,{readonhover:u.readonhover?u.readonhover:this.initialState.checkIt.readonhover}),screenMasking:dc({},this.initialState.screenMasking,{backgroundColor:u.backgroundColor?u.backgroundColor:this.initialState.screenMasking.backgroundColor,readingLightColor:u.readingLightColor?u.readingLightColor:this.initialState.screenMasking.readingLightColor,backgroundOpacity:u.backgroundOpacity?u.backgroundOpacity:this.initialState.screenMasking.backgroundOpacity,readingLightOpacity:u.readingLightOpacity?u.readingLightOpacity:this.initialState.screenMasking.readingLightOpacity,readingLightHeight:u.readingLightHeight?u.readingLightHeight:this.initialState.screenMasking.readingLightHeight,readingLight:u.readingLight?u.readingLight:this.initialState.screenMasking.readingLight}),language:dc({},this.initialState.language,{language:u.language?u.language:this.initialState.language.language,features:u.features?u.features:this.initialState.language.features}),rewordify:dc({},this.initialState.rewordify,{fluencyLevel:u.fluencyLevel?u.fluencyLevel:this.initialState.rewordify.fluencyLevel}),theme:u.theme?u.theme:this.initialState.theme,market:u.market?u.market:this.initialState.market}))}setFirstLoadSettings(e,t,n,r,i,a,o,s,c){this.state=dc({},this.state,{speech:dc({},this.state.speech,{voice:e,speed:t,reading:n,speakAsIType:dc({},this.state.speech.speakAsIType,{onEachWord:r,onEachSentence:i}),translation:a}),language:dc({},this.state.language,{language:o,features:s}),defaultsSet:c})}setPolicySettings(e){this.state=dc({},this.state,{speech:dc({},this.state.speech,{voice:e.voice?e.voice:this.state.speech.voice,speed:e.speed?e.speed:this.state.speech.speed,reading:e.reading?e.reading:this.state.speech.reading,speakAsIType:dc({},this.state.speech.speakAsIType,{onEachWord:e.onEachWord?e.onEachWord:this.state.speech.speakAsIType.onEachWord,onEachSentence:e.onEachSentence?e.onEachSentence:this.state.speech.speakAsIType.onEachSentence})}),translation:e.translation?e.translation:this.state.translation,prediction:dc({},this.state.prediction,{general:dc({},this.state.prediction.general,{followCursor:e.followCursor?e.followCursor:this.state.prediction.general.followCursor,predictAhead:e.predictAhead?e.predictAhead:this.state.prediction.general.predictAhead,predictOnHover:e.predictOnHover?e.predictOnHover:this.state.prediction.general.predictOnHover}),numberOfResults:e.numberOfResults?e.numberOfResults:this.state.prediction.numberOfResults,fontSize:e.fontSize?e.fontSize:this.state.prediction.fontSize}),checkIt:dc({},this.state.checkIt,{readonhover:e.readonhover?e.readonhover:this.state.checkIt.readonhover}),screenMasking:dc({},this.state.screenMasking,{backgroundColor:e.backgroundColor?e.backgroundColor:this.state.screenMasking.backgroundColor,readingLightColor:e.readingLightColor?e.readingLightColor:this.state.screenMasking.readingLightColor,backgroundOpacity:e.backgroundOpacity?e.backgroundOpacity:this.state.screenMasking.backgroundOpacity,readingLightOpacity:e.readingLightOpacity?e.readingLightOpacity:this.state.screenMasking.readingLightOpacity,readingLightHeight:e.readingLightHeight?e.readingLightHeight:this.state.screenMasking.readingLightHeight,readingLight:e.readingLight?e.readingLight:this.state.screenMasking.readingLight}),language:dc({},this.state.language,{language:e.language?e.language:this.state.language.language,features:e.features?e.features:this.state.language.features}),rewordify:dc({},this.state.rewordify,{fluencyLevel:e.fluencyLevel?e.fluencyLevel:this.state.rewordify.fluencyLevel}),theme:e.theme?e.theme:this.state.theme,market:e.market?e.market:this.state.market})}addCheckitDictionaryItem(e){this.state.checkIt.dictionary.includes(e)||(this.state=dc({},this.state,{checkIt:dc({},this.state.checkIt,{dictionary:[...this.state.checkIt.dictionary,e]})}))}setPredictAheadPolicy(e){this.state.prediction.general.predictAheadPolicy!==e&&(this.state=dc({},this.state,{prediction:dc({},this.state.prediction,{general:dc({},this.state.prediction.general,{predictAheadPolicy:e,predictAhead:!!e&&this.state.prediction.general.predictAhead})})}))}setFeaturesDragging(e,t){this.state.features[e].dragging!==t&&(this.state.features[e].dragging=t)}setFeaturesHidden(e,t){this.state.features[e].enabled!==t&&(this.state.features[e].enabled=t,this.state.features[e].hidden=!t)}setFeaturesSupported(e,t){this.state.features[e].supported!==t&&(this.state.features[e].supported=t)}setLicenceData(e,t,n){t=t.toLowerCase(),this.state=dc({},this.state,{accounts:dc({},this.state.accounts,{email:e,google:"google"===t,microsoft:"microsoft"===t,nyc:"nyc"===t,hasauthcode:!!n})})}setV1Settings(e){const t=dc({},this.state);void 0!==e.voice&&(t.speech.voice=e.voice.substr(0,e.voice.length-1)),void 0!==e.speed&&(t.speech.speed=e.speed),void 0!==e.continousreading&&(t.speech.reading=e.continousreading),void 0!==e.translang&&(t.speech.translation=e.translang),void 0!==e.speakoneachsentence&&(t.speech.speakAsIType.onEachSentence=e.speakoneachsentence),void 0!==e.speakoneachword&&(t.speech.speakAsIType.onEachWord=e.speakoneachword),void 0!==e.predictionResults&&(t.prediction.numberOfResults=e.predictionResults),void 0!==e.predictionTextSize&&(t.prediction.fontSize=e.predictionTextSize),void 0!==e.predictionCaretPosition&&(t.prediction.general.followCursor=e.predictionCaretPosition),void 0!==e.predictionpredictahead&&(t.prediction.general.predictAhead=e.predictionpredictahead),void 0!==e.screenmaskingBackgroundColour&&(t.screenMasking.backgroundColor=e.screenmaskingBackgroundColour),void 0!==e.screenmaskingBackgroundOpacity&&(t.screenMasking.backgroundOpacity=e.screenmaskingBackgroundOpacity),void 0!==e.screenmaskingReadingLightColour&&(t.screenMasking.readingLightColor=e.screenmaskingReadingLightColour),void 0!==e.screenmaskingReadingLightHeight&&(t.screenMasking.readingLightHeight=e.screenmaskingReadingLightHeight),void 0!==e.screenmaskingReadingLightOpacity&&(t.screenMasking.readingLightOpacity=e.screenmaskingReadingLightOpacity),void 0!==e.screenmaskingReadingLightVisibility&&(t.screenMasking.readingLight=e.screenmaskingReadingLightVisibility),void 0!==e.language&&(t.language.language=e.language),void 0!==e.services&&(t.language.features=e.services),this.state=t}setV1ToolbarFeatures(e){e.map&&e.map((e=>{const t=this.state.features.find((t=>{if(e.command===t.name)return e;switch(e.command){case"factfinder":if("websearch"===t.name)return e;break;case"speechinput":if("talkandtype"===t.name)return e;break;case"speechmaker":if("audiomaker"===t.name)return e;break;case"highlightyellow":if("studyyellow"===t.name)return e;break;case"highlightgreen":if("studygreen"===t.name)return e;break;case"highlightblue":if("studyblue"===t.name)return e;break;case"highlightpink":if("studypink"===t.name)return e;break;case"highlightclear":if("studyclear"===t.name)return e;break;case"highlightscollect":if("studycollect"===t.name)return e;break;case"vocabtool":if("vocablist"===t.name)return e}}));t&&(t.enabled=e.show)}))}importV1Settings(e,t,n){this.state.defaultsSet=!1,this.setV1Settings(e),t.length>0&&(this.state.checkIt.dictionary=t),this.setV1ToolbarFeatures(n)}fixVoice(){this.state.speech.voice.startsWith("ss-")&&(this.state=dc({},this.state,{speech:dc({},this.state.speech,{voice:this.state.speech.voice.slice(3)})}))}getDiffBetweenCurrentAndInitial(){const e=(t,n,r)=>{const i={};return new Set([...Object.keys(t),...Object.keys(n)]).forEach((a=>{if(r.includes(a))return;const o=t[a],s=n[a];if(!Array.isArray(o)&&!Array.isArray(s))if("object"==typeof o&&null!==o&&"object"==typeof s&&null!==s){const t=e(o,s,r);Object.keys(t).length>0&&(i[a]=t)}else o!==s&&(i[a]=s)})),i};return e(JSON.parse(JSON.stringify(this.initialState)),JSON.parse(JSON.stringify(this.state)),["defaultsSet","about","systemTheme"])}setProfile(e){const t=e=>{let t=[];const n=JSON.parse(JSON.stringify(this.initialState.features));return n.forEach(((r,i)=>{const a=e.find((e=>e.order===i));if(a){const e=dc({},n.find((e=>e.key===a.key)));e.enabled=a.enabled,t.push(e)}else t.push(r)})),t},n=(e,r)=>{const i=dc({},e);for(const a in r)if(Array.isArray(r[a]))if("features"===a){const e=t(r[a]);i[a]=e}else i[a]=r[a];else"object"==typeof r[a]&&e.hasOwnProperty(a)&&"object"==typeof e[a]?i[a]=n(e[a],r[a]):i[a]=r[a];return i},r=n(JSON.parse(JSON.stringify(this.initialState)),JSON.parse(JSON.stringify(e))),i=JSON.parse(JSON.stringify(this.state.checkIt.dictionary));return r.checkIt.dictionary=i,this.state=r,JSON.parse(JSON.stringify(this.state.features))}setMarketFeatures(e){const t=Fv(e);this.state=dc({},this.state,{features:t}),this.initialState=dc({},this.initialState,{features:t})}setActivateButtonDisabled(e){this.state=dc({},this.state,{about:dc({},this.state.about,{activateButtonDisabled:e})})}setOrRemoveProfileChanges(e,t){e[0].value!==t?Gv.setProfileProperty(e):Gv.removeProperty(e)}setSpeechVoice(e,t){if(this.state.speech.voice==e&&this.state.speech.offline==t)return;this.state=dc({},this.state,{speech:dc({},this.state.speech,{voice:e,offline:t})});const n=[{path:"speech.voice",value:e},{path:"speech.offline",value:t}];this.setOrRemoveProfileChanges(n,this.initialState.speech.voice)}setSpeechTranslation(e){if(this.state.speech.translation==e)return;this.state=dc({},this.state,{speech:dc({},this.state.speech,{translation:e})});const t=[{path:"speech.translation",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.speech.translation)}setSpeechReading(e){if(this.state.speech.reading==e)return;this.state=dc({},this.state,{speech:dc({},this.state.speech,{reading:e})});const t=[{path:"speech.reading",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.speech.reading)}setPredictionNumberOfResults(e){if(this.state.prediction.numberOfResults==e)return;this.state=dc({},this.state,{prediction:dc({},this.state.prediction,{numberOfResults:e})});const t=[{path:"prediction.numberOfResults",value:parseInt(e)}];this.setOrRemoveProfileChanges(t,this.initialState.prediction.numberOfResults)}setPredictionfontSize(e){if(this.state.prediction.fontSize==e)return;this.state=dc({},this.state,{prediction:dc({},this.state.prediction,{fontSize:e})});const t=[{path:"prediction.fontSize",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.prediction.fontSize)}setSpeechSpeed(e){if(this.state.speech.speed==e)return;this.state=dc({},this.state,{speech:dc({},this.state.speech,{speed:e})});const t=[{path:"speech.speed",value:parseInt(e)}];this.setOrRemoveProfileChanges(t,this.initialState.speech.speed)}setPredictAhead(e){if(this.state.prediction.general.predictAhead==e)return;this.state=dc({},this.state,{prediction:dc({},this.state.prediction,{general:dc({},this.state.prediction.general,{predictAhead:e})})});const t=[{path:"prediction.general.predictAhead",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.prediction.general.predictAhead)}setpredictOnHover(e){if(this.state.prediction.general.predictOnHover==e)return;this.state=dc({},this.state,{prediction:dc({},this.state.prediction,{general:dc({},this.state.prediction.general,{predictOnHover:e})})});const t=[{path:"prediction.general.predictOnHover",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.prediction.general.predictOnHover)}setCheckItOnHover(e){if(this.state.checkIt.readonhover==e)return;this.state=dc({},this.state,{checkIt:dc({},this.state.checkIt,{readonhover:e})});const t=[{path:"checkIt.readonhover",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.checkIt.readonhover)}setSpeechOnEachWord(e){if(this.state.speech.speakAsIType.onEachWord==e)return;this.state=dc({},this.state,{speech:dc({},this.state.speech,{speakAsIType:dc({},this.state.speech.speakAsIType,{onEachWord:e})})});const t=[{path:"speech.speakAsIType.onEachWord",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.speech.speakAsIType.onEachWord)}setSpeechOnEachSentence(e){if(this.state.speech.speakAsIType.onEachSentence==e)return;this.state=dc({},this.state,{speech:dc({},this.state.speech,{speakAsIType:dc({},this.state.speech.speakAsIType,{onEachSentence:e})})});const t=[{path:"speech.speakAsIType.onEachSentence",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.speech.speakAsIType.onEachSentence)}removeFromCheckItDictionary(e){this.state=dc({},this.state,{checkIt:dc({},this.state.checkIt,{dictionary:this.state.checkIt.dictionary.filter((t=>t!==e))})})}setBackgroundOpacity(e){if(this.state.screenMasking.backgroundOpacity==e)return;this.state=dc({},this.state,{screenMasking:dc({},this.state.screenMasking,{backgroundOpacity:e})});const t=[{path:"screenMasking.backgroundOpacity",value:parseInt(e)}];this.setOrRemoveProfileChanges(t,this.initialState.screenMasking.backgroundOpacity)}setReadingLightOpacity(e){if(this.state.screenMasking.readingLightOpacity==e)return;this.state=dc({},this.state,{screenMasking:dc({},this.state.screenMasking,{readingLightOpacity:e})});const t=[{path:"screenMasking.readingLightOpacity",value:parseInt(e)}];this.setOrRemoveProfileChanges(t,this.initialState.screenMasking.readingLightOpacity)}setReadingLightHeight(e){if(this.state.screenMasking.readingLightHeight==e)return;this.state=dc({},this.state,{screenMasking:dc({},this.state.screenMasking,{readingLightHeight:e})});const t=[{path:"screenMasking.readingLightHeight",value:parseInt(e)}];this.setOrRemoveProfileChanges(t,this.initialState.screenMasking.readingLightHeight)}setReadingLight(e){if(this.state.screenMasking.readingLight==e)return;this.state=dc({},this.state,{screenMasking:dc({},this.state.screenMasking,{readingLight:e})});const t=[{path:"screenMasking.readingLight",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.screenMasking.readingLight)}setLanguage(e){if(this.state.language.language==e)return;this.state=dc({},this.state,{language:dc({},this.state.language,{language:e})});const t=[{path:"language.language",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.language.language)}setFeaturesLanguage(e){if(this.state.language.features==e)return;this.state=dc({},this.state,{language:dc({},this.state.language,{features:e})});const t=[{path:"language.features",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.language.features)}setFeaturesListSupported(e,t,n){const r=JSON.parse(JSON.stringify(this.state));r.features=r.features.map((n=>(e.includes(n.name)&&(n.supported=t),n))),n!==r.language.features&&(r.language.features=n),this.state=r;const i=[{path:"language.features",value:n}];this.setOrRemoveProfileChanges(i,this.initialState.language.features)}setScreenMaskingBackgroundColor(e){if(this.state.screenMasking.backgroundColor==e)return;this.state=dc({},this.state,{screenMasking:dc({},this.state.screenMasking,{backgroundColor:e})});const t=[{path:"screenMasking.backgroundColor",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.screenMasking.backgroundColor)}setScreenMaskingReadingLightColor(e){if(e==this.state.screenMasking.readingLightColor)return;this.state=dc({},this.state,{screenMasking:dc({},this.state.screenMasking,{readingLightColor:e})});const t=[{path:"screenMasking.readingLightColor",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.screenMasking.readingLightColor)}setScreenMaskingDefaults(){this.state=dc({},this.state,{screenMasking:dc({},this.state.screenMasking,{backgroundColor:"#000000",readingLightColor:"#fffffe",backgroundOpacity:50,readingLightOpacity:50,readingLightHeight:200,readingLight:!0})}),Gv.removeProperty([{path:"screenMasking.backgroundColor"},{path:"screenMasking.readingLightColor"},{path:"screenMasking.backgroundOpacity"},{path:"screenMasking.readingLightOpacity"},{path:"screenMasking.readingLightHeight"},{path:"screenMasking.readingLight"}])}setTheme(e){if(e==this.state.theme)return;this.state=dc({},this.state,{theme:e});const t=[{path:"theme",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.theme)}setSystemTheme(e){e!=this.state.systemTheme&&(this.state=dc({},this.state,{systemTheme:e}))}setVoiceInput(e){if(this.state.voiceTyping.voiceInput==e)return;this.state=dc({},this.state,{voiceTyping:dc({},this.state.voiceTyping,{voiceInput:e})});const t=[{path:"voiceTyping.voiceInput",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.voiceTyping.voiceInput)}setFluencyLevel(e){if(this.state.rewordify.fluencyLevel==e)return;this.state=dc({},this.state,{rewordify:dc({},this.state.rewordify,{fluencyLevel:e})});const t=[{path:"rewordify.fluencyLevel",value:parseInt(e)}];this.setOrRemoveProfileChanges(t,this.initialState.rewordify.fluencyLevel)}setfollowCursor(e){if(this.state.prediction.general.followCursor==e)return;this.state=dc({},this.state,{prediction:dc({},this.state.prediction,{general:dc({},this.state.prediction.general,{followCursor:e})})});const t=[{path:"prediction.general.followCursor",value:e}];this.setOrRemoveProfileChanges(t,this.initialState.prediction.general.followCursor)}setFeatureDragging(e,t){const n=JSON.parse(JSON.stringify(this.state)),r=n.features.map((n=>!1===t?(n.dragging=!1,n):(n.name===e&&(n.dragging=t),n)));n.features=r,this.state=n}setFeatures(e,t){if(this.state.features[e].enabled==t)return;this.state.features[e].enabled=t;const n=JSON.parse(JSON.stringify(this.state.features)),r=this.getProfileFeatureDiff(n);this.setProfileFeatureDiff(r)}getProfileFeatureDiff(e){const t=e=>e.map(((e,t)=>({key:e.key,enabled:e.enabled,order:t}))),n=t(JSON.parse(JSON.stringify(this.initialState.features))),r=t(e),i=JSON.stringify(n)===JSON.stringify(r);let a=[];if(!i){const e=(e,t)=>e.find(t);n.forEach((({order:t,key:n,enabled:i})=>{const o=e(r,(e=>e.order===t));o&&(o.key!==n?a.push(o):a.find((e=>e.key===n))||o.enabled===i||a.push(o))}))}return a}setProfileFeatureDiff(e){const t=[{path:"features",value:e}];e.length>0?Gv.setProfileProperty(t):Gv.removeProperty(t)}setFeaturesOrder(e){this.state.features=e;const t=this.getProfileFeatureDiff(e);this.setProfileFeatureDiff(t)}resetToInitialSettings(){this.state=JSON.parse(JSON.stringify(this.initialState))}updateFeaturesAndProfile(e){}placeFeature(e,t,n){const r=JSON.parse(JSON.stringify(this.state.features)),i=r.find((t=>t.name===e)),a=r.indexOf(i),o=r.find((e=>e.name===t)),s=r.indexOf(o);n?r.splice(a,0,r.splice(s,1)[0]):r.splice(a+1,0,r.splice(s,1)[0]),this.state.features=r;const c=this.getProfileFeatureDiff(r);this.setProfileFeatureDiff(c)}};new class extends Nd{constructor(){super({activeSettingsTab:"settings_speech",dragging:!1,dragFeatureId:null},gc,"th.rw4gc.settings.ui.store",!1,!0)}setActiveSettingsTab(e){this.state.activeSettingsTab=e}setDragging(e){this.state.dragging=e}setDragFeatureId(e){this.state.dragFeatureId=e}};new class extends Nd{constructor(){super({showCreateInput:!1,renameProfileId:null,profileMenu:{menuItems:[],showMenu:!1,menuPosition:{x:100,y:100}},sideMenuVisible:!1,sideMenuOnRight:!1,profileIdToShowMenu:null},gc,"th.rw4gc.profile.ui.store")}reset(){this.state=dc({},this.state,{showCreateInput:!1,renameProfileId:null,profileMenu:dc({},this.state.profileMenu,{showMenu:!1})})}setProfileMenuPosition(e){this.state=dc({},this.state,{profileMenu:dc({},this.state.profileMenu,{menuPosition:{x:e.x,y:e.y},showMenu:!0})})}setProfileMenu(e){const t=({name:e,locale_ID:t=`profile_menu_items_${e}`,profile:n})=>({name:e,locale_ID:t,profile:n}),{id:n}=e,r=JSON.parse(JSON.stringify(this.state.profileMenu));!0===e.default?r.menuItems=[t({name:"reset",profile:n})]:!0===e.adminCreated?r.menuItems=[t({name:"reset",profile:n}),t({name:"rename",profile:n}),t({name:"duplicate",profile:n})]:r.menuItems=[t({name:"rename",profile:n}),t({name:"duplicate",profile:n}),t({name:"delete",profile:n})];const i=JSON.parse(JSON.stringify(this.state));i.profileMenu=r,i.showCreateInput=!1,i.profileMenu.showMenu=!0,this.state=i}setShowMenu(e){this.state.profileMenu.showMenu!==e&&(this.state=dc({},this.state,{profileMenu:dc({},this.state.profileMenu,{showMenu:e})}))}toggleShowCreateInput(){const e=dc({},this.state,{showCreateInput:!this.state.showCreateInput,profileMenu:dc({},this.state.profileMenu,{showMenu:!(!this.state.showCreateInput&&this.state.profileMenu.showMenu)&&this.state.profileMenu.showMenu})});this.state=e}setShowCreateInput(e){this.state.showCreateInput!==e&&(this.state.showCreateInput=e)}setRenameProfileId(e){this.state.renameProfileId!==e&&(this.state.renameProfileId=e)}showSideMenu(e){this.state.sideMenuVisible=e}showSideMenuOnRight(e){this.state.sideMenuOnRight!==e&&(this.state.sideMenuOnRight=e)}setProfileIdToShowMenu(e){this.state.profileIdToShowMenu!==e&&(this.state.profileIdToShowMenu=e)}};var Kv=["body"];function zv(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wv(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zv(Object(n),!0).forEach((function(t){Hv(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zv(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Hv(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qv(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Jv(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function $v(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Jv(a,r,i,o,s,"next",e)}function s(e){Jv(a,r,i,o,s,"throw",e)}o(void 0)}))}}class Xv{constructor(){}static doFetch(e){var t=arguments,n=this;return $v((function*(){var r=t.length>1&&void 0!==t[1]?t[1]:{},{body:i}=r,a=qv(r,Kv);return new Promise(function(){var t=$v((function*(t,r){if(n.method="GET",n.timeout=0,void 0===a.method?n.method=i?"POST":"GET":n.method=a.method,a.blob){for(var o=atob(i.split(",")[1]),s=new ArrayBuffer(o.length),c=new Uint8Array(s),u=a.headers["content-type"],l=0;l<o.length;l++)c[l]=o.charCodeAt(l);i=new Blob([c],{type:u})}a.timeout&&(n.timeout=a.timeout);var h=Wv(Wv({method:n.method},a),{},{headers:Wv({},a.headers)});i&&(h.body=i);var d=null;if(n.timeout>0)try{var p=new AbortController,f=setTimeout((()=>p.abort()),n.timeout);d=yield fetch(e,Wv(Wv({},h),{},{signal:p.signal})),clearTimeout(f)}catch(e){return Promise.reject(e)}else d=yield fetch(e,h);if(d.ok){var g={};if(g.contentType=d.headers.get("content-type"),g.headers=Object.fromEntries(d.headers.entries()),g.contentType){if(-1!==g.contentType.indexOf("application/json"))g.json=yield d.json();else if(g.contentType.startsWith("text"))g.text=yield d.text();else if(-1!==g.contentType.indexOf("audio/mpeg")){var v=yield d.arrayBuffer();g.arrayBuffer=(e=>{for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return btoa(t)})(v)}else g.blob=yield d.blob();t({data:g})}else r(g)}else r(g)}));return function(e,n){return t.apply(this,arguments)}}())}))()}}class Qv{constructor(){chrome.runtime.onMessage.addListener(((e,t,n)=>{if(t.id!==chrome.runtime.id)return!1;if(!e.command)return!1;if("swfetch8598"===e.command)Xv.doFetch(e.url,e.options).then((e=>{n(e)}));return!0}))}}const Zv=Object.freeze({GOOGLE:"Google",MICROSOFT:"Microsoft",NYC:"NYC",DEFAULT:"Default"});function em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tm(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let nm=class{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}},rm=class{static encode(e){const t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);const t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}};const im=(e,...t)=>{if(!t.length)return e;const n=t.shift();if(om(e)&&om(n)){const r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?em(Object(n),!0).forEach((function(t){tm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):em(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(om(n[e])&&om(r[e])?r[e]=im(r[e],n[e]):Array.isArray(n[e])&&Array.isArray(r[e])?r[e]=am(r[e],n[e]):r[e]=n[e]);return im(r,...t)}return im(e,...t)},am=(e,t)=>{let n=[...t];const r=((e,t)=>{if(e.hasOwnProperty("name")&&t.hasOwnProperty("name"))return"name";if(e.length>0&&t.length>0){const n=e[0],r=t[0];for(const i in n)if(n.hasOwnProperty(i)&&r.hasOwnProperty(i)){const r=e.map((e=>e[i])),a=t.map((e=>e[i])),o=new Set(r),s=new Set(a);if("string"==typeof n[i]&&o.size===e.length&&s.size===t.length)return i}}return null})(e,t),i=t.map((e=>e[r])),a=e.map((e=>e[r]));let o=[];for(let e in t[0])o.push(e);let s=[];for(let t in e[0])s.push(t);let c=s.filter((e=>!o.some((t=>t===e))));if(c.length>0)for(let t=0;t<n.length;t++){let i=e.find((e=>e[r]===n[t][r]));for(let e=0;e<c.length;e++)n[t][c[e]]=i[c[e]]}return a.filter((e=>!i.some((t=>t===e)))).forEach((t=>{const i=e.find((e=>{if(e[r]===t)return!0})),a=e.findIndex((e=>e===i)),o=e[a-1>=0?a-1:a][r],s=n.findIndex((e=>e[r]===o));n.splice(s+1,0,i)})),n},om=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),sm="local";let cm=class extends nm{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(!this._event)return;if(t!==this._syncType)return;if(!this._keys.has(Object.keys(e)[0]))return;let n=JSON.parse(rm.decode(Object.values(e)[0].newValue));this._event(n)}))}onUpdate(e){this._event=e}store(e,t,n){var r=this;return new Promise((async function(n,i){try{if("none"===r._syncType)return void n(!0);const i=rm.encode(t),a=await r._retrieve(e,r._syncType);if(a&&a[e]===i)return void n(!0);r._store(e,i,r._syncType),r._keys.add(e),n(!0)}catch(e){i(e)}}))}retrieve(e,t=null){var n=this;return new Promise((async function(r,i){try{if("none"===n._syncType)return void r(t);let i={};if(Object.keys(e).length>0){let a=await n._retrieve(e,n._syncType);if(a){if(i=rm.decode(a[e]),n._keys.add(e),!t)return void r(JSON.parse(i));r(im(t,JSON.parse(i)))}else n._keys.add(e),r(t)}else n._keys.add(e),r(t)}catch(e){i(e)}}))}remove(e){var t=this;return new Promise((async function(n,r){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){await t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){r(e)}}))}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,r)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}},um=class{constructor(e,t="microsoft"){this.idName=t,this.clientId=e,this.userInfo=void 0,this.email=void 0,this.accessCode=void 0,this.redirectUri="undefined"!=typeof chrome&&chrome.identity?chrome.identity.getRedirectURL():`${window.location.origin}/index.html`,this.storage=new cm(sm),this.storage.retrieve("rw4gc.ms-code.cache").then((e=>{null===e||0===Object.keys(e).length&&e.constructor===Object||(this.accessCode=e)}))}async getUserInfo(e=!0,t=!1,n=!1){var r=this;return new Promise(((n,i)=>{if(chrome){if(this.userInfo&&!t)return void n(this.userInfo);chrome.identity.getProfileUserInfo((async function(t){e?(await r.authorize(["user.read"]),n(r.userInfo)):i("Unable to get user details")}))}else i(new Error("Not running on a chromium browser"))}))}get msSiteUrl(){return"https://thzbf.texthelp.com/"}get sitePath(){return"mslogin.html"}async authorizeDocumentCreation(){return await this.authorize(["user.read","files.readwrite"],!1,!0)}async authorizeDriveInstall(){return""}async authorizeByteBot(){return""}async authorizeByteBotAndDriveInstall(){return""}async authorize(e,t=!1,n=!0){var r=this;try{return new Promise((async function(t,i){const a=(await r._chromeTabsQuery({active:!0,currentWindow:!0}))[0].id;let o=await r._chromeTabsQuery({url:[`${r.msSiteUrl}*`]});if(o[0])chrome.tabs.update(o[0].id,{url:`${r.msSiteUrl}${r.sitePath}?action=authorise&scopes=${s}`});else{var s=Object.keys(e).map((t=>e[t])).join(",");chrome.tabs.create({url:`${r.msSiteUrl}${r.sitePath}?action=authorise&scopes=${s}`})}chrome.runtime.onMessage.addListener((async function e(o,s){if(s.id!==chrome.runtime.id)return!1;if(!o.command)return!1;switch(o.command.toLowerCase()){case"thswauthorised":chrome.runtime.onMessage.removeListener(e),r.accessCode=o.account.accessToken,n&&(r.userInfo=r.genericUserFormat(o.account.account),r.storage.store("rw4gc.ms-code.cache",r.accessCode,!1)),r._chromeTabsQuery({url:[`${r.msSiteUrl}*`]}).then((e=>{e.length>0&&chrome.tabs.remove(e[0].id)})),chrome.tabs.update(a,{active:!0}),t(r.accessCode);break;case"thswauthcancelled":chrome.runtime.onMessage.removeListener(e),i("User cancelled")}}))}))}catch(e){console.log(e)}}signOut(){var e=this;return new Promise((async function(t,n){try{const n={active:!0,currentWindow:!0},r=await e._chromeTabsQuery(n);try{const n=r[0].id;let i,a=await e._chromeTabsQuery({url:[`${e.msSiteUrl}*`]});a[0]?(i=a[0].id,chrome.tabs.update(a[0].id,{url:`${e.msSiteUrl}${e.sitePath}?action=signout&active=${n}`})):chrome.tabs.create({url:`${e.msSiteUrl}${e.sitePath}?action=signout&active=${n}`},(function(e){i=e.id}));let o=async function n(r,i){if(i.id!==chrome.runtime.id&&t(),r.command||t(),"thswsignedout"===r.command.toLowerCase()){chrome.runtime.onMessage.removeListener(n),e.accessCode=void 0;try{e.storage.remove("rw4gc.ms-code.cache")}catch(e){}t()}};chrome.runtime.onMessage.addListener(o),chrome.tabs.onUpdated.addListener(((e,t)=>{e===i&&"complete"===t.status&&t.url}))}catch(n){e.accessCode=void 0,e.storage.remove("rw4gc.ms-code.cache"),t()}}catch(e){console.log(e),t()}}))}async getAndValidateAccessToken(e,t=!0){return{accessToken:await this.authorize(e,t)}}genericUserFormat(e){let t={licensetype:"microsoft"},n=e.displayName;null==n&&(n=e.name),t.name=n;let r=e.mail;return null==r&&(r=e.userPrincipalName),null==r&&(r=e.username),t.email=r,t}_openTab(e){chrome.tabs.query({},(function(t){for(let n,r=0;n=t[r];r++)if(n.url===e)return chrome.tabs.reload(n.id,{},(function(){})),void chrome.tabs.update(n.id,{active:!0});chrome.tabs.create({url:e})}))}_chromeTabsQuery(e){return new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}))}},lm=class{constructor(e="google"){this.idName=e,this.userScopes=["https://www.googleapis.com/auth/userinfo.email"],this.docScopes=["https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appfolder"],this.driveScopes=["https://www.googleapis.com/auth/drive.install"],this.bytebotScopes=["https://www.googleapis.com/auth/applicense.bytebot"]}getUserInfo(e=!0,t=!1,n=!1){return new Promise(((r,i)=>{try{chrome?chrome.identity?chrome.identity.getProfileUserInfo((a=>{null!==a&&null!==a.email&&""===a.email&&null!==a.id&&""===a.id&&n?(this.userInfo=null,r(null)):a&&a.email.length>0&&(void 0===a.licensetype||"google"===a.licensetype)&&!t?(a.licensetype="google",this.userInfo=a,r(a)):e?this.authorize(this.userScopes).then((e=>{this.getUserInfoFromToken(e).then((e=>{this.userInfo=e,r(e)}))})):i("Unable to get user details")})):e?this.authorize(this.userScopes).then((e=>{this.getUserInfoFromToken(e).then((e=>{this.userInfo=e,r(e)}))})):i("Unable to get user details"):i("Not running on a chromium browser")}catch(e){i(e.Message)}}))}async authorizeDocumentCreation(){return await this.getAndValidateAccessToken(this.docScopes)}async authorizeDriveInstall(){return this.authorize(this.driveScopes)}async authorizeByteBot(){return this.authorize(this.bytebotScopes)}async authorizeByteBotAndDriveInstall(){return this.authorize(this.bytebotScopes.concat(this.driveScopes))}async getUserInfoFromToken(e){const t=await fetch("https://www.googleapis.com/userinfo/v2/me",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("invalid_response_from_oauth");const{name:n,email:r}=await t.json();return{name:n,email:r,licensetype:"google"}}getAuthToken(e,t,n=!0){return new Promise(((r,i)=>{try{chrome.identity.getAuthToken({interactive:e,scopes:t},(a=>{if(chrome.runtime.lastError||null==a)if(n)try{chrome.identity.removeCachedAuthToken({token:a},(()=>{this.getAuthToken(e,t,!1).then((e=>{r(e)})).catch((e=>{i(e)}))}))}catch(e){i(e.Message)}else i(chrome.runtime.lastError);else r(a)}))}catch(e){console.log(e.Message),i(e.Message)}}))}async authorize(e){let t;try{return t=await this.getAuthToken(!1,e),t}catch(n){try{return t=await this.getAuthToken(!0,e),t}catch(e){throw console.log("auth error"),console.error(e),Error(e)}}}async signOut(){chrome.identity.launchWebAuthFlow({interactive:!1,url:"https://accounts.google.com/logout"},(function(e){}))}async validToken(e){let t=`https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=${e}`;const n=await fetch(t,{method:"GET"});if(n.ok)return!0;let r=await n.json();return console.log(r),!1}async revokeCachedTokens(e){return new Promise(((t,n)=>{chrome.identity.removeCachedAuthToken({token:e},(e=>{t(!0)}))}))}async getAndValidateAccessToken(e,t=!0){let n=null;try{n=await this.getAuthToken(t,e,!1)}catch(e){return{error:e,accessToken:null}}return 0===n.length?"":!0===await this.validToken(n)?n:(await this.revokeCachedTokens(n),n=await this.getAuthToken(t,e,!1),{accessToken:n})}};function hm(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function dm(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){hm(a,r,i,o,s,"next",e)}function s(e){hm(a,r,i,o,s,"throw",e)}o(void 0)}))}}var pm=e=>"0".concat(e.toString(16)).substr(-2),fm=function(){var e=dm((function*(e){var t,n;return(e=>{for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i+=1)t+=String.fromCharCode(n[i]);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})(yield(t=e,n=(new TextEncoder).encode(t),crypto.subtle.digest("SHA-256",n)))}));return function(t){return e.apply(this,arguments)}}(),gm=function(){var e=dm((function*(){var e,t=(e=new Uint32Array(32),crypto.getRandomValues(e),Array.from(e,pm).join(""));return{verifier:t,challenge:yield fm(t)}}));return function(){return e.apply(this,arguments)}}(),vm=e=>Object.keys(e).map((t=>"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t])))).join("&"),mm=function(){var e=dm((function*(e){return new Promise(((t,n)=>{var r="https://".concat(e,"/.well-known/openid-configuration");fetch(r).then((e=>e.json())).then((e=>{t(e)})).catch((e=>{n(e)}))}))}));return function(t){return e.apply(this,arguments)}}(),_m=(e,t,n,r,i,a,o)=>new Promise(function(){var s=dm((function*(s,c){((e,t)=>{if(!e.grant_types_supported.includes(t))throw new Error("The issuer does not support the grant type ".concat(t,"."))})(e,i);var u={redirect_uri:n,grant_type:i,client_id:t,code_verifier:o,code:a,scope:r},l="".concat(e.token_endpoint),h=yield fetch(l,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:vm(u)});h.ok?s(yield h.json()):c(yield h.text())}));return function(e,t){return s.apply(this,arguments)}}()),ym=function(){var e=dm((function*(e,t,n,r,i,a,o,s){return new Promise(((c,u)=>{((e,t,n)=>{if(!e.response_types_supported.includes(t))throw new Error("The issuer does not support the response type ".concat(t,"."));if(!e.code_challenge_methods_supported.includes(n))throw new Error("The issuer does not support the code challenge method ".concat(n,"."))})(t,o,s);var l={client_id:n,redirect_uri:r,response_type:o,scope:i,audience:t.issuer,code_challenge:e,code_challenge_method:s,acr_values:"idp:".concat(a)},h="".concat(t.authorization_endpoint,"?").concat(vm(l));chrome.identity&&chrome.identity.launchWebAuthFlow({url:h,interactive:!0},(e=>{if(chrome.runtime.lastError)u(chrome.runtime.lastError);else if("string"!=typeof e)u(new Error("Invalid response from the authorization endpoint."));else{var t=(e=>{var t={},n=e.split("?");if(n.length>1){var r=n[1].split("&");for(var i of r){var[a,o]=i.split("=");t[a]=decodeURIComponent(o)}}return t})(e);c(t)}}))}))}));return function(t,n,r,i,a,o,s,c){return e.apply(this,arguments)}}(),bm=function(){var e=dm((function*(e,t,n,r,i,a,o,s){return new Promise(function(){var c=dm((function*(c,u){try{var l=yield mm(e),{verifier:h,challenge:d}=yield gm(),p=yield ym(d,l,t,n,r,i,a,s);c({access:yield _m(l,t,n,r,o,p.code,h),issuer:l})}catch(e){u(e.message)}}));return function(e,t){return c.apply(this,arguments)}}())}));return function(t,n,r,i,a,o,s,c){return e.apply(this,arguments)}}(),wm=(e,t)=>new Promise(function(){var n=dm((function*(n,r){if(!e.userinfo_endpoint)throw new Error("Issuer does not support user info");var i=yield fetch(e.userinfo_endpoint,{headers:{Authorization:"Bearer ".concat(t)}});i.ok?n(yield i.json()):r(yield i.text())}));return function(e,t){return n.apply(this,arguments)}}());const Om="rw4gc-chrome-extension",Sm="idp.texthelp.com";let Am=`https://${Sm}/oauth2`;chrome.identity&&(Am=chrome.identity.getRedirectURL("oauth2")),Object.freeze(Am);const Em="email openid protected_email",Tm="code",km="authorization_code",Cm="S256";let Im=null,Pm=class{constructor(e="openid"){this._name=e,this._access=null}getUserInfo(e=!0,t=!1,n=!1){var r=this;return new Promise((async function(e,t){try{const t=await bm(Sm,Om,Am,Em,r._name.toLowerCase(),Tm,km,Cm),n=await wm(t.issuer,t.access.access_token);Im=t,n.licensetype=r._name,e(n)}catch(e){t(e)}}))}async authorizeDocumentCreation(){return!0}async authorizeDriveInstall(){}async getUserInfoFromToken(e){}async authorizeByteBot(){}async authorizeByteBotAndDriveInstall(){}getAuthToken(e,t,n=!0){var r=this;return new Promise((async function(e,t){try{e((await bm(Sm,Om,Am,Em,r._name,Tm,km,Cm)).access.access_token)}catch(e){t(e.Message)}}))}async authorize(e){console.log("authorize openid")}async signOut(){if(null===Im)throw new Error("You are not signed in.");if(void 0===Im.issuer)throw new Error("You are not signed in.");if(void 0===Im.access.access_token)throw new Error("You are not signed in.");const e={id_token_hint:Im.access.id_token,post_logout_redirect_uri:Am};var t;const n={interactive:!1,url:`${Im.issuer.end_session_endpoint}?${t=e,Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}`};chrome.identity.launchWebAuthFlow(n,(()=>{}))}async validToken(e){console.log("validToken openid")}async revokeCachedTokens(e){return new Promise(((e,t)=>{console.log("revokeCachedTokens openid")}))}async getAndValidateAccessToken(e,t=!0){console.log("getAndValidateAccessToken openid")}},Rm=class extends Pm{constructor(e="NYC"){super(e)}},Lm=class{constructor(){this.auth=null}async initialise(e){var t=this;return new Promise((async function(n){switch(e.toLowerCase()){case Zv.GOOGLE.toLowerCase():return t.auth=new lm,void n();case Zv.MICROSOFT.toLowerCase():return t.auth=new um,void n();case Zv.NYC.toLowerCase():return t.auth=new Rm,void n();default:let e=await t.getAccountTypeFromProfileInfo();if(e)return t.auth=e,void n();chrome.runtime.onMessage.addListener((async function(e,r){if(r.id===chrome.runtime.id&&e.command)return"thswsetaccounttype"===e.command.toLowerCase()?("MS"===e.accountType?t.auth=new um:"NYC"===e.accountType?t.auth=new Rm:t.auth=new lm,void n()):void n()}));let r={active:!0,currentWindow:!0},i=await t.chromeTabsQuery(r);i[0].url.includes("selectiondialog.html?q")||setTimeout((async function(){let e=await t.chromeTabsQuery({url:[`chrome-extension://${chrome.runtime.id}/*`]});e[0]?await chrome.tabs.update(e[0].id,{active:!0}):await chrome.tabs.create({url:`chrome-extension://${chrome.runtime.id}/selectiondialog/selectiondialog.html?q=${i[0].id}`})}),300)}}))}chromeTabsQuery(e){return new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}))}async switchAuthType(e){}async getAccountTypeFromProfileInfo(){var e=this;return new Promise((async function(t){chrome.identity?chrome.identity.getProfileUserInfo((async function(n){if(n.email.length>0){let n=null;return n=await e._isEdge()?new um("0113ff4a-9673-4c71-8cba-9229b16b7ad8"):new lm,void t(n)}t(null)})):t(null)}))}async getUserInfo(e=!1,t=!1){return await this.auth.getUserInfo(void 0,e,t)}async authorizeDocumentCreation(){return await this.auth.authorizeDocumentCreation()}async authorizeDriveInstall(){return await this.auth.authorizeDriveInstall()}async authorize(e){return await this.auth.authorize(e)}async authorizeByteBot(){return await this.auth.authorizeByteBot()}async authorizeByteBotAndDriveInstall(e){return await this.auth.authorizeByteBotAndDriveInstall(e)}async getAndValidateAccessToken(e,t=!0){return await this.auth.getAndValidateAccessToken(e,t)}async _isEdge(){if(null!=self.serviceWorker)return"bjglhpoliipklkfjcahfefdlfpifcinb"==chrome.runtime.id;chrome.runtime.sendMessage({command:"th-isEdge"},(e=>e))}};class Nm{constructor(){var e=this;chrome.runtime.onMessage.addListener((async function(t,n,r){if(n.id!==chrome.runtime.id)return!1;if(!t.command)return!1;switch(t.command.toLowerCase()){case"swauthorize":return e.swAuthorize(t.authType,t.scopes).then((e=>{void 0!==r&&r(e)})),!0;case"swauthorizefordoccreation":return e.swAuthorizeForDocCreation(t.authType).then((e=>{void 0!==r&&r(e)})),!0;case"swauthorizefordriveinstall":return e.swAuthorizeForDriveInstall(t.authType).then((e=>{void 0!==r&&r(e)})),!0;case"swlauncewebauthflow":return e.swLaunchWebAuthFlow(t.interactive,t.url).then((e=>{void 0!==r&&r(e)})),!0;case"swgetandvalidateaccesstoken":e.swGetAndValidateAccessToken(t.scopes,t.authType).then((e=>{r(e)}));default:return!1}}))}async swAuthorize(e,t){return console.log("swAuthorize"),this.bgAuth=new Lm,await this.bgAuth.initialise(e),this.bgAuth.authorize(t)}async swAuthorizeForDocCreation(e){return this.bgAuth=new Lm,await this.bgAuth.initialise(e),this.bgAuth.authorizeDocumentCreation()}async swAuthorizeForDriveInstall(e){return this.bgAuth=new Lm,await this.bgAuth.initialise(e),this.bgAuth.authorizeDriveInstall()}async swGetAndValidateAccessToken(e,t){this.bgAuth=new Lm,await this.bgAuth.initialise(t);return await this.bgAuth.getAndValidateAccessToken(e)}async swAuthorizeForByteBot(e){return this.bgAuth=new Lm,await this.bgAuth.initialise(e),this.bgAuth.authorizeByteBot()}async swAuthorizeForByteBotAndDriveInstall(e){return this.bgAuth=new Lm,await this.bgAuth.initialise(e),this.bgAuth.authorizeByteBotAndDriveInstall()}swLaunchWebAuthFlow(e,t){return new Promise(((n,r)=>{chrome.identity.launchWebAuthFlow({interactive:e,url:t},(e=>{n(e)}))}))}}const Dm=Object.freeze([{matches:["*"],settings:{target:{},files:["content.bundle.js"]}},{matches:["https://docs.google.com/document/*"],settings:{target:{},files:["gdocs.content.bundle.js"]}},{matches:["https://docs.google.com/presentation/*"],settings:{target:{},files:["gdocs.content.bundle.js"]}}]),xm=Object.freeze([{matches:["https://docs.google.com/document/*"],settings:{target:{},files:["gdi.bundle.js"]}}]),jm=(e,t)=>{let n={};e=e.toLowerCase();for(let r in t){if(r=r.toLowerCase(),"default"==r){n=t[r];break}let i=e.substring(0,r.length);if(i===r){n=t[r];break}{i=e;let a=r.split("*");if(a.length>1){let o=!0;for(let e in a){let t=i.indexOf(a[e]);if(-1==t){o=!1;break}i=i.substr(t+a[e].length)}if(o){i=e,n=t[r];break}}}}return n},Um=Object.freeze({GOOGLE:"Google",MICROSOFT:"Microsoft",NYC:"NYC",DEFAULT:"Default"});function Mm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bm(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let Vm=class{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}},Gm=class{static encode(e){const t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);const t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}};const Fm=(e,...t)=>{if(!t.length)return e;const n=t.shift();if(Km(e)&&Km(n)){const r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mm(Object(n),!0).forEach((function(t){Bm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(Km(n[e])&&Km(r[e])?r[e]=Fm(r[e],n[e]):Array.isArray(n[e])&&Array.isArray(r[e])?r[e]=Ym(r[e],n[e]):r[e]=n[e]);return Fm(r,...t)}return Fm(e,...t)},Ym=(e,t)=>{let n=[...t];const r=((e,t)=>{if(e.hasOwnProperty("name")&&t.hasOwnProperty("name"))return"name";if(e.length>0&&t.length>0){const n=e[0],r=t[0];for(const i in n)if(n.hasOwnProperty(i)&&r.hasOwnProperty(i)){const r=e.map((e=>e[i])),a=t.map((e=>e[i])),o=new Set(r),s=new Set(a);if("string"==typeof n[i]&&o.size===e.length&&s.size===t.length)return i}}return null})(e,t),i=t.map((e=>e[r])),a=e.map((e=>e[r]));let o=[];for(let e in t[0])o.push(e);let s=[];for(let t in e[0])s.push(t);let c=s.filter((e=>!o.some((t=>t===e))));if(c.length>0)for(let t=0;t<n.length;t++){let i=e.find((e=>e[r]===n[t][r]));for(let e=0;e<c.length;e++)n[t][c[e]]=i[c[e]]}return a.filter((e=>!i.some((t=>t===e)))).forEach((t=>{const i=e.find((e=>{if(e[r]===t)return!0})),a=e.findIndex((e=>e===i)),o=e[a-1>=0?a-1:a][r],s=n.findIndex((e=>e[r]===o));n.splice(s+1,0,i)})),n},Km=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),zm="local";let Wm=class extends Vm{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(!this._event)return;if(t!==this._syncType)return;if(!this._keys.has(Object.keys(e)[0]))return;let n=JSON.parse(Gm.decode(Object.values(e)[0].newValue));this._event(n)}))}onUpdate(e){this._event=e}store(e,t,n){var r=this;return new Promise((async function(n,i){try{if("none"===r._syncType)return void n(!0);const i=Gm.encode(t),a=await r._retrieve(e,r._syncType);if(a&&a[e]===i)return void n(!0);r._store(e,i,r._syncType),r._keys.add(e),n(!0)}catch(e){i(e)}}))}retrieve(e,t=null){var n=this;return new Promise((async function(r,i){try{if("none"===n._syncType)return void r(t);let i={};if(Object.keys(e).length>0){let a=await n._retrieve(e,n._syncType);if(a){if(i=Gm.decode(a[e]),n._keys.add(e),!t)return void r(JSON.parse(i));r(Fm(t,JSON.parse(i)))}else n._keys.add(e),r(t)}else n._keys.add(e),r(t)}catch(e){i(e)}}))}remove(e){var t=this;return new Promise((async function(n,r){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){await t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){r(e)}}))}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,r)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}};class Hm{constructor(e,t="microsoft"){this.idName=t,this.clientId=e,this.userInfo=void 0,this.email=void 0,this.accessCode=void 0,this.redirectUri="undefined"!=typeof chrome&&chrome.identity?chrome.identity.getRedirectURL():`${window.location.origin}/index.html`,this.storage=new Wm(zm),this.storage.retrieve("rw4gc.ms-code.cache").then((e=>{null===e||0===Object.keys(e).length&&e.constructor===Object||(this.accessCode=e)}))}async getUserInfo(e=!0,t=!1,n=!1){var r=this;return new Promise(((n,i)=>{if(chrome){if(this.userInfo&&!t)return void n(this.userInfo);chrome.identity.getProfileUserInfo((async function(t){e?(await r.authorize(["user.read"]),n(r.userInfo)):i("Unable to get user details")}))}else i(new Error("Not running on a chromium browser"))}))}get msSiteUrl(){return"https://thzbf.texthelp.com/"}get sitePath(){return"mslogin.html"}async authorizeDocumentCreation(){return await this.authorize(["user.read","files.readwrite"],!1,!0)}async authorizeDriveInstall(){return""}async authorizeByteBot(){return""}async authorizeByteBotAndDriveInstall(){return""}async authorize(e,t=!1,n=!0){var r=this;try{return new Promise((async function(t,i){const a=(await r._chromeTabsQuery({active:!0,currentWindow:!0}))[0].id;let o=await r._chromeTabsQuery({url:[`${r.msSiteUrl}*`]});if(o[0])chrome.tabs.update(o[0].id,{url:`${r.msSiteUrl}${r.sitePath}?action=authorise&scopes=${s}`});else{var s=Object.keys(e).map((t=>e[t])).join(",");chrome.tabs.create({url:`${r.msSiteUrl}${r.sitePath}?action=authorise&scopes=${s}`})}chrome.runtime.onMessage.addListener((async function e(o,s){if(s.id!==chrome.runtime.id)return!1;if(!o.command)return!1;switch(o.command.toLowerCase()){case"thswauthorised":chrome.runtime.onMessage.removeListener(e),r.accessCode=o.account.accessToken,n&&(r.userInfo=r.genericUserFormat(o.account.account),r.storage.store("rw4gc.ms-code.cache",r.accessCode,!1)),r._chromeTabsQuery({url:[`${r.msSiteUrl}*`]}).then((e=>{e.length>0&&chrome.tabs.remove(e[0].id)})),chrome.tabs.update(a,{active:!0}),t(r.accessCode);break;case"thswauthcancelled":chrome.runtime.onMessage.removeListener(e),i("User cancelled")}}))}))}catch(e){console.log(e)}}signOut(){var e=this;return new Promise((async function(t,n){try{const n={active:!0,currentWindow:!0},r=await e._chromeTabsQuery(n);try{const n=r[0].id;let i,a=await e._chromeTabsQuery({url:[`${e.msSiteUrl}*`]});a[0]?(i=a[0].id,chrome.tabs.update(a[0].id,{url:`${e.msSiteUrl}${e.sitePath}?action=signout&active=${n}`})):chrome.tabs.create({url:`${e.msSiteUrl}${e.sitePath}?action=signout&active=${n}`},(function(e){i=e.id}));let o=async function n(r,i){if(i.id!==chrome.runtime.id&&t(),r.command||t(),"thswsignedout"===r.command.toLowerCase()){chrome.runtime.onMessage.removeListener(n),e.accessCode=void 0;try{e.storage.remove("rw4gc.ms-code.cache")}catch(e){}t()}};chrome.runtime.onMessage.addListener(o),chrome.tabs.onUpdated.addListener(((e,t)=>{e===i&&"complete"===t.status&&t.url}))}catch(n){e.accessCode=void 0,e.storage.remove("rw4gc.ms-code.cache"),t()}}catch(e){console.log(e),t()}}))}async getAndValidateAccessToken(e,t=!0){return{accessToken:await this.authorize(e,t)}}genericUserFormat(e){let t={licensetype:"microsoft"},n=e.displayName;null==n&&(n=e.name),t.name=n;let r=e.mail;return null==r&&(r=e.userPrincipalName),null==r&&(r=e.username),t.email=r,t}_openTab(e){chrome.tabs.query({},(function(t){for(let n,r=0;n=t[r];r++)if(n.url===e)return chrome.tabs.reload(n.id,{},(function(){})),void chrome.tabs.update(n.id,{active:!0});chrome.tabs.create({url:e})}))}_chromeTabsQuery(e){return new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}))}}class qm{constructor(e="google"){this.idName=e,this.userScopes=["https://www.googleapis.com/auth/userinfo.email"],this.docScopes=["https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/drive.appfolder"],this.driveScopes=["https://www.googleapis.com/auth/drive.install"],this.bytebotScopes=["https://www.googleapis.com/auth/applicense.bytebot"]}getUserInfo(e=!0,t=!1,n=!1){return new Promise(((r,i)=>{try{chrome?chrome.identity?chrome.identity.getProfileUserInfo((a=>{null!==a&&null!==a.email&&""===a.email&&null!==a.id&&""===a.id&&n?(this.userInfo=null,r(null)):a&&a.email.length>0&&(void 0===a.licensetype||"google"===a.licensetype)&&!t?(a.licensetype="google",this.userInfo=a,r(a)):e?this.authorize(this.userScopes).then((e=>{this.getUserInfoFromToken(e).then((e=>{this.userInfo=e,r(e)}))})):i("Unable to get user details")})):e?this.authorize(this.userScopes).then((e=>{this.getUserInfoFromToken(e).then((e=>{this.userInfo=e,r(e)}))})):i("Unable to get user details"):i("Not running on a chromium browser")}catch(e){i(e.Message)}}))}async authorizeDocumentCreation(){return await this.getAndValidateAccessToken(this.docScopes)}async authorizeDriveInstall(){return this.authorize(this.driveScopes)}async authorizeByteBot(){return this.authorize(this.bytebotScopes)}async authorizeByteBotAndDriveInstall(){return this.authorize(this.bytebotScopes.concat(this.driveScopes))}async getUserInfoFromToken(e){const t=await fetch("https://www.googleapis.com/userinfo/v2/me",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw Error("invalid_response_from_oauth");const{name:n,email:r}=await t.json();return{name:n,email:r,licensetype:"google"}}getAuthToken(e,t,n=!0){return new Promise(((r,i)=>{try{chrome.identity.getAuthToken({interactive:e,scopes:t},(a=>{if(chrome.runtime.lastError||null==a)if(n)try{chrome.identity.removeCachedAuthToken({token:a},(()=>{this.getAuthToken(e,t,!1).then((e=>{r(e)})).catch((e=>{i(e)}))}))}catch(e){i(e.Message)}else i(chrome.runtime.lastError);else r(a)}))}catch(e){console.log(e.Message),i(e.Message)}}))}async authorize(e){let t;try{return t=await this.getAuthToken(!1,e),t}catch(n){try{return t=await this.getAuthToken(!0,e),t}catch(e){throw console.log("auth error"),console.error(e),Error(e)}}}async signOut(){chrome.identity.launchWebAuthFlow({interactive:!1,url:"https://accounts.google.com/logout"},(function(e){}))}async validToken(e){let t=`https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=${e}`;const n=await fetch(t,{method:"GET"});if(n.ok)return!0;let r=await n.json();return console.log(r),!1}async revokeCachedTokens(e){return new Promise(((t,n)=>{chrome.identity.removeCachedAuthToken({token:e},(e=>{t(!0)}))}))}async getAndValidateAccessToken(e,t=!0){let n=null;try{n=await this.getAuthToken(t,e,!1)}catch(e){return{error:e,accessToken:null}}return 0===n.length?"":!0===await this.validToken(n)?n:(await this.revokeCachedTokens(n),n=await this.getAuthToken(t,e,!1),{accessToken:n})}}function Jm(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function $m(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Jm(a,r,i,o,s,"next",e)}function s(e){Jm(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Xm=e=>"0".concat(e.toString(16)).substr(-2),Qm=function(){var e=$m((function*(e){var t,n;return(e=>{for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i+=1)t+=String.fromCharCode(n[i]);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})(yield(t=e,n=(new TextEncoder).encode(t),crypto.subtle.digest("SHA-256",n)))}));return function(t){return e.apply(this,arguments)}}(),Zm=function(){var e=$m((function*(){var e,t=(e=new Uint32Array(32),crypto.getRandomValues(e),Array.from(e,Xm).join(""));return{verifier:t,challenge:yield Qm(t)}}));return function(){return e.apply(this,arguments)}}(),e_=e=>Object.keys(e).map((t=>"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t])))).join("&"),t_=function(){var e=$m((function*(e){return new Promise(((t,n)=>{var r="https://".concat(e,"/.well-known/openid-configuration");fetch(r).then((e=>e.json())).then((e=>{t(e)})).catch((e=>{n(e)}))}))}));return function(t){return e.apply(this,arguments)}}(),n_=(e,t,n,r,i,a,o)=>new Promise(function(){var s=$m((function*(s,c){((e,t)=>{if(!e.grant_types_supported.includes(t))throw new Error("The issuer does not support the grant type ".concat(t,"."))})(e,i);var u={redirect_uri:n,grant_type:i,client_id:t,code_verifier:o,code:a,scope:r},l="".concat(e.token_endpoint),h=yield fetch(l,{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",body:e_(u)});h.ok?s(yield h.json()):c(yield h.text())}));return function(e,t){return s.apply(this,arguments)}}()),r_=function(){var e=$m((function*(e,t,n,r,i,a,o,s){return new Promise(((c,u)=>{((e,t,n)=>{if(!e.response_types_supported.includes(t))throw new Error("The issuer does not support the response type ".concat(t,"."));if(!e.code_challenge_methods_supported.includes(n))throw new Error("The issuer does not support the code challenge method ".concat(n,"."))})(t,o,s);var l={client_id:n,redirect_uri:r,response_type:o,scope:i,audience:t.issuer,code_challenge:e,code_challenge_method:s,acr_values:"idp:".concat(a)},h="".concat(t.authorization_endpoint,"?").concat(e_(l));chrome.identity&&chrome.identity.launchWebAuthFlow({url:h,interactive:!0},(e=>{if(chrome.runtime.lastError)u(chrome.runtime.lastError);else if("string"!=typeof e)u(new Error("Invalid response from the authorization endpoint."));else{var t=(e=>{var t={},n=e.split("?");if(n.length>1){var r=n[1].split("&");for(var i of r){var[a,o]=i.split("=");t[a]=decodeURIComponent(o)}}return t})(e);c(t)}}))}))}));return function(t,n,r,i,a,o,s,c){return e.apply(this,arguments)}}(),i_=function(){var e=$m((function*(e,t,n,r,i,a,o,s){return new Promise(function(){var c=$m((function*(c,u){try{var l=yield t_(e),{verifier:h,challenge:d}=yield Zm(),p=yield r_(d,l,t,n,r,i,a,s);c({access:yield n_(l,t,n,r,o,p.code,h),issuer:l})}catch(e){u(e.message)}}));return function(e,t){return c.apply(this,arguments)}}())}));return function(t,n,r,i,a,o,s,c){return e.apply(this,arguments)}}(),a_=(e,t)=>new Promise(function(){var n=$m((function*(n,r){if(!e.userinfo_endpoint)throw new Error("Issuer does not support user info");var i=yield fetch(e.userinfo_endpoint,{headers:{Authorization:"Bearer ".concat(t)}});i.ok?n(yield i.json()):r(yield i.text())}));return function(e,t){return n.apply(this,arguments)}}());const o_="rw4gc-chrome-extension",s_="idp.texthelp.com";let c_=`https://${s_}/oauth2`;chrome.identity&&(c_=chrome.identity.getRedirectURL("oauth2")),Object.freeze(c_);const u_="email openid protected_email",l_="code",h_="authorization_code",d_="S256";let p_=null;class f_{constructor(e="openid"){this._name=e,this._access=null}getUserInfo(e=!0,t=!1,n=!1){var r=this;return new Promise((async function(e,t){try{const t=await i_(s_,o_,c_,u_,r._name.toLowerCase(),l_,h_,d_),n=await a_(t.issuer,t.access.access_token);p_=t,n.licensetype=r._name,e(n)}catch(e){t(e)}}))}async authorizeDocumentCreation(){return!0}async authorizeDriveInstall(){}async getUserInfoFromToken(e){}async authorizeByteBot(){}async authorizeByteBotAndDriveInstall(){}getAuthToken(e,t,n=!0){var r=this;return new Promise((async function(e,t){try{e((await i_(s_,o_,c_,u_,r._name,l_,h_,d_)).access.access_token)}catch(e){t(e.Message)}}))}async authorize(e){console.log("authorize openid")}async signOut(){if(null===p_)throw new Error("You are not signed in.");if(void 0===p_.issuer)throw new Error("You are not signed in.");if(void 0===p_.access.access_token)throw new Error("You are not signed in.");const e={id_token_hint:p_.access.id_token,post_logout_redirect_uri:c_};var t;const n={interactive:!1,url:`${p_.issuer.end_session_endpoint}?${t=e,Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")}`};chrome.identity.launchWebAuthFlow(n,(()=>{}))}async validToken(e){console.log("validToken openid")}async revokeCachedTokens(e){return new Promise(((e,t)=>{console.log("revokeCachedTokens openid")}))}async getAndValidateAccessToken(e,t=!0){console.log("getAndValidateAccessToken openid")}}class g_ extends f_{constructor(e="NYC"){super(e)}}class v_{constructor(){this.auth=null}async initialise(e){var t=this;return new Promise((async function(n){switch(e.toLowerCase()){case Um.GOOGLE.toLowerCase():return t.auth=new qm,void n();case Um.MICROSOFT.toLowerCase():return t.auth=new Hm,void n();case Um.NYC.toLowerCase():return t.auth=new g_,void n();default:let e=await t.getAccountTypeFromProfileInfo();if(e)return t.auth=e,void n();chrome.runtime.onMessage.addListener((async function(e,r){if(r.id===chrome.runtime.id&&e.command)return"thswsetaccounttype"===e.command.toLowerCase()?("MS"===e.accountType?t.auth=new Hm:"NYC"===e.accountType?t.auth=new g_:t.auth=new qm,void n()):void n()}));let r={active:!0,currentWindow:!0},i=await t.chromeTabsQuery(r);i[0].url.includes("selectiondialog.html?q")||setTimeout((async function(){let e=await t.chromeTabsQuery({url:[`chrome-extension://${chrome.runtime.id}/*`]});e[0]?await chrome.tabs.update(e[0].id,{active:!0}):await chrome.tabs.create({url:`chrome-extension://${chrome.runtime.id}/selectiondialog/selectiondialog.html?q=${i[0].id}`})}),300)}}))}chromeTabsQuery(e){return new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}))}async switchAuthType(e){}async getAccountTypeFromProfileInfo(){var e=this;return new Promise((async function(t){chrome.identity?chrome.identity.getProfileUserInfo((async function(n){if(n.email.length>0){let n=null;return n=await e._isEdge()?new Hm("0113ff4a-9673-4c71-8cba-9229b16b7ad8"):new qm,void t(n)}t(null)})):t(null)}))}async getUserInfo(e=!1,t=!1){return await this.auth.getUserInfo(void 0,e,t)}async authorizeDocumentCreation(){return await this.auth.authorizeDocumentCreation()}async authorizeDriveInstall(){return await this.auth.authorizeDriveInstall()}async authorize(e){return await this.auth.authorize(e)}async authorizeByteBot(){return await this.auth.authorizeByteBot()}async authorizeByteBotAndDriveInstall(e){return await this.auth.authorizeByteBotAndDriveInstall(e)}async getAndValidateAccessToken(e,t=!0){return await this.auth.getAndValidateAccessToken(e,t)}async _isEdge(){if(null!=self.serviceWorker)return"bjglhpoliipklkfjcahfefdlfpifcinb"==chrome.runtime.id;chrome.runtime.sendMessage({command:"th-isEdge"},(e=>e))}}function m_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function __(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class y_{store(e,t,n){throw"IStorage store not implemented!"}retrieve(e){throw"IStorage retrieve not implemented!"}remove(e){throw"IStorage remove not implemented!"}}class b_{static encode(e){const t=JSON.stringify(e);return btoa?btoa(t):Buffer.from(t).toString("base64")}static decode(e){if(atob)return atob(e);const t=Buffer.from(e,"base64");return JSON.parse(t.toString("utf8"))}}const w_=(e,...t)=>{if(!t.length)return e;const n=t.shift();if(S_(e)&&S_(n)){const r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m_(Object(n),!0).forEach((function(t){__(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&(S_(n[e])&&S_(r[e])?r[e]=w_(r[e],n[e]):Array.isArray(n[e])&&Array.isArray(r[e])?r[e]=O_(r[e],n[e]):r[e]=n[e]);return w_(r,...t)}return w_(e,...t)},O_=(e,t)=>{let n=[...t];const r=((e,t)=>{if(e.hasOwnProperty("name")&&t.hasOwnProperty("name"))return"name";if(e.length>0&&t.length>0){const n=e[0],r=t[0];for(const i in n)if(n.hasOwnProperty(i)&&r.hasOwnProperty(i)){const r=e.map((e=>e[i])),a=t.map((e=>e[i])),o=new Set(r),s=new Set(a);if("string"==typeof n[i]&&o.size===e.length&&s.size===t.length)return i}}return null})(e,t),i=t.map((e=>e[r])),a=e.map((e=>e[r]));let o=[];for(let e in t[0])o.push(e);let s=[];for(let t in e[0])s.push(t);let c=s.filter((e=>!o.some((t=>t===e))));if(c.length>0)for(let t=0;t<n.length;t++){let i=e.find((e=>e[r]===n[t][r]));for(let e=0;e<c.length;e++)n[t][c[e]]=i[c[e]]}return a.filter((e=>!i.some((t=>t===e)))).forEach((t=>{const i=e.find((e=>{if(e[r]===t)return!0})),a=e.findIndex((e=>e===i)),o=e[a-1>=0?a-1:a][r],s=n.findIndex((e=>e[r]===o));n.splice(s+1,0,i)})),n},S_=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),A_="local";class E_ extends y_{constructor(e){super(),this._syncType=e,this._event=void 0,this._keys=new Set,"none"!==this._syncType&&((chrome||{}).storage||{}).onChanged&&chrome.storage.onChanged.addListener(((e,t)=>{if(!this._event)return;if(t!==this._syncType)return;if(!this._keys.has(Object.keys(e)[0]))return;let n=JSON.parse(b_.decode(Object.values(e)[0].newValue));this._event(n)}))}onUpdate(e){this._event=e}store(e,t,n){var r=this;return new Promise((async function(n,i){try{if("none"===r._syncType)return void n(!0);const i=b_.encode(t),a=await r._retrieve(e,r._syncType);if(a&&a[e]===i)return void n(!0);r._store(e,i,r._syncType),r._keys.add(e),n(!0)}catch(e){i(e)}}))}retrieve(e,t=null){var n=this;return new Promise((async function(r,i){try{if("none"===n._syncType)return void r(t);let i={};if(Object.keys(e).length>0){let a=await n._retrieve(e,n._syncType);if(a){if(i=b_.decode(a[e]),n._keys.add(e),!t)return void r(JSON.parse(i));r(w_(t,JSON.parse(i)))}else n._keys.add(e),r(t)}else n._keys.add(e),r(t)}catch(e){i(e)}}))}remove(e){var t=this;return new Promise((async function(n,r){try{if("none"===t._syncType)return void n(!1);if(Object.keys(e).length>0){await t._remove(e,t._syncType);t._keys.delete(e),n(!0)}}catch(e){r(e)}}))}_store(e,t,n){((chrome||{}).storage||{})[this._syncType]?chrome.storage[n].set({[e]:t}):localStorage.setItem(e,t)}_retrieve(e,t){return new Promise(((n,r)=>{((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].get([e],(e=>{"{}"!==JSON.stringify(e)?n(e):n(null)})):n({[e]:localStorage.getItem(e)})}))}_remove(e,t){((chrome||{}).storage||{})[this._syncType]?chrome.storage[t].remove(e):localStorage.removeItem(e)}}class T_{constructor(e=Um.DEFAULT,t=!1){this._loginType=e,this.isEdge=t}getUser(e=!1,t=!1){var n=this;return new Promise(((r,i)=>{try{let a=new E_(A_);a.retrieve("rw4gc.user.cache").then((async function(o){if(e||null===o||0===Object.keys(o).length&&o.constructor===Object){n.isEdge&&(n._loginType=Um.MICROSOFT);let o=new v_;await o.initialise(n._loginType),o.getUserInfo(e,t).then((e=>{null===e?a.remove("rw4gc.user.cache"):a.store("rw4gc.user.cache",e,!1),r(e)})).catch((e=>{i(e)}))}else if(void 0===o.email||null===o.email||o.licensetype.toLowerCase()!==n._loginType.toLowerCase()){n.isEdge&&(n._loginType=Um.MICROSOFT);let o=new v_;await o.initialise(n._loginType),o.getUserInfo(e,t).then((e=>{null===e?a.remove("rw4gc.user.cache"):a.store("rw4gc.user.cache",e,!1),r(e)})).catch((e=>{i(e)}))}else r(o)}))}catch(e){i(e)}}))}signOut(){var e=this;return new Promise((async function(t,n){try{let r=new E_(A_);r.retrieve("rw4gc.user.cache").then((async function(i){let a=new v_;await a.initialise(e._loginType),null===i||0===Object.keys(i).length&&i.constructor===Object?a.auth.signOut().then((()=>{t(!0)})).catch((e=>{n(e)})):a.auth.signOut().then((()=>{r.remove("rw4gc.user.cache").then((()=>{t(!0)})).catch((e=>{n(e)}))})).catch((e=>{n(e)}))}))}catch(e){n(e)}}))}}var k_={thDebugMode:!1,thCloudFrontBypass:!1,thAuthProduct:!1,sendFetchRequest:function(e,t){return new Promise((function(n){!1===t&&(t=new Date),k_.sendBrowserRequest(e,t).then((e=>{n([e,t,!1])})).catch((e=>{n([!1,t,!1])}))}))},s3Req:function(e,t){if(k_.thCloudFrontBypass)var n="https://s3.amazonaws.com/rwfamilylive/"+e;else n="https://licensing.texthelp.com/"+e;return k_.sendFetchRequest(n,t)},sendBrowserRequest:function(e,t){return void 0===k_.retryCount&&(k_.retryCount=2),new Promise((function(n,r){fetch(e+"?cbp="+Math.random(),{}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");n(e.text())})).catch((function(i){if(1===k_.retryCount)return r(i);k_.retryCount=k_.retryCount-1,setTimeout((function(){k_.sendBrowserRequest(e,t).then(n).catch(r)}),3e3)}))}))},setToday:function(e){var t=e.getResponseHeader("Date"),n=e.getResponseHeader("Age");if(!isNaN(parseFloat(n))&&isFinite(n))var r=new Date(t),i=new Date(r.getTime()+parseInt(1e3*n)),a=new Date(i);else a=new Date(t);return a},sugarFetchReq:function(e,t,n,r){return new Promise((function(e){fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:r}).then((t=>{t.ok?t.text().then((t=>{e(""!==t)})):(k_.logger(t.status),k_.logger(t.statusText),e(!1))})).catch((t=>{e(!1)}))}))},sugarReq:function(e,t){return new Promise((function(n){var r="https://ist.texthelp.com/queue/licensing/push/"+e,i=JSON.stringify(t);return n(k_.sugarFetchReq(e,t,r,i))}))},freemium:function(e,t,n){var r="expiry_"+n,i={};return i.user=e,i.start=k_.getTodaysDate(t),i[r]=k_.get30DaysDate(t),i.licence_type="Freemium",JSON.stringify(i)},expiredFreemium:function(e,t,n){var r="expiry_"+n,i={};return i.user=e,i.start=k_.getTodaysDate(t),i[r]=k_.getTodaysDate(t),i.licence_type="Freemium",JSON.stringify(i)},getTodaysDate:function(e){if(e instanceof Date)var t=new Date(e).toJSON().slice(0,10);else t=(new Date).toJSON().slice(0,10);return t},getYesterdaysDate:function(e){var t;return e instanceof Date?((t=new Date(e)).setDate(t.getDate()-1),t=t.toJSON().slice(0,10)):((t=new Date).setDate(t.getDate()-1),t=t.toJSON().slice(0,10)),t},getCurrentDateTime:function(e){if(e instanceof Date)var t=new Date(e).toJSON();else t=(new Date).toJSON();return t},dateInFuture:function(e,t){return e=new Date(e),new Date(t).getTime()<=e.getTime()},get30DaysDate:function(e){var t=new Date(k_.getTodaysDate(e)),n=(new Date).setDate(t.getDate()+30);return new Date(n).toJSON().slice(0,10)},setSyncDate:function(e,t,n){var r=k_.getTodaysDate(e),i={};i[t]=r,"Chrome"==n?chrome.storage.sync.set(i):localStorage.setItem(t,r)},resolveSync:(e,t,n,r)=>void 0===e?(k_.setSyncDate(t,n,r),!0):!(null!==e&&!k_.needsUpdated(e)||(k_.setSyncDate(t,n,r),0)),getLastSync:function(e,t,n){return new Promise((r=>{var i="texthelp_"+t+"_ga_updated_in_licensing";"Chrome"==n?chrome.storage.sync.get([i],(t=>{r(k_.resolveSync(t[i],e,i,n))})):r(k_.resolveSync(localStorage.getItem(i),e,i,n))}))},needsUpdated:function(e){var t=new Date,n=new Date;return n.setDate(t.getDate()-30),n.setHours(0),n.setMinutes(0),n.setSeconds(0),Date.parse(n)>Date.parse(e)},dateDiff:function(e,t,n){var r=36e5;e=new Date(e);var i=(t=new Date(t))-e;if(isNaN(i))return NaN;switch(n){case"years":return t.getFullYear()-e.getFullYear();case"months":return 12*t.getFullYear()+t.getMonth()-(12*e.getFullYear()+e.getMonth());case"weeks":return Math.floor(i/6048e5);case"days":return Math.floor(i/864e5);case"hours":return Math.floor(i/r);case"minutes":return Math.floor(i/6e4);case"seconds":return Math.floor(i/1e3);default:return}},platformFlagToCheck:function(e){return"equatio"==e||"equatio_lti"==e?"equatio":"ft4g"==e?"ft4g":"wriq"==e?"wriq":"reachdeck"==e?"reachdeck":"orbitdoc"==e?"orbitdoc":"claroread"==e?"claroread":"writinghelper"==e?"writinghelper":"scanpen"==e?"scanpen":"skrivatext"==e?"skrivatext":"globaltasks"==e?"globaltasks":"lexiflow"==e?"lexiflow":"read_and_write"},verifyUserCanEnrolInGroup:function(e,t,n){var r=JSON.parse(e),i=r[k_.platformFlagToCheck(n)];if(!0===k_.dateInFuture(r.expiry,t)&&1==i){if(1==r.unlimited)return!0;if(r.user_count>r.enrolled_seats&&1!=r.using_admin_tool)return!0}return!1},getUserFilename:function(e,t){if("equatio"==t)var n="users_equatio";else n="equatio_lti"==t?"users_equatio_lti":"ft4g"==t?"users_ft4g":"wriq"==t?"users_wriq":"reachdeck"==t?"users_reachdeck":"orbitdoc"==t?"users_orbitdoc":"claroread"==t?"users_claroread":"scanpen"==t?"users_scanpen":"writinghelper"==t?"users_writinghelper":"skrivatext"==t?"users_skrivatext":"globaltasks"==t?"users_globaltasks":"lexiflow"==t?"users_lexiflow":"users";return n+"/"+e+".json"},getGroupFilename:function(e){return"groups/"+e+".json"},getFeaturesFilename:function(e,t){return"new_"+t+"_features_"+e+".json"},getDomainsListFilename:function(e,t){return"domains/"+e+"/"+t+".json"},getProductExpiryProp:function(e){return"expiry_"+e},getSoftwareEnabledProp:function(e){return"equatio"==e?"equatio":"equatio_lti"==e?"equatio_lti":"ft4g"==e?"ft4g":"wriq"==e?"wriq":"reachdeck"==e?"reachdeck":"orbitdoc"==e?"orbitdoc":"claroread"==e?"claroread":"scanpen"==e?"scanpen":"writinghelper"==e?"writinghelper":"skrivatext"==e?"skrivatext":"globaltasks"==e?"globaltasks":"lexiflow"==e?"lexiflow":"read_and_write"},isGroupAuthCode:function(e){return"G"==e.substring(0,1)},isValidUser:function(e){return e.indexOf("@")>=0},setDebugMode:function(e){k_.debug=e},validProduct:function(e){return["mac","rw4gc","windows","ipad","android","equatio","equatio_lti","edge","ft4g","wriq","reachdeck","orbitdoc","claroread","writinghelper","scanpen","skrivatext","globaltasks","lexiflow"].includes(e)},logger:function(e){}};class C_{constructor(e,t,n,r,i,a,o,s){this.thAuthUser=e,this.domain=t,this.product=n,this.thLicenceType=r,this.thLicenceStatus=i,this.freeForTeachers=a,this.thAuthAuthCode=o,this.debugNotes=s}sendEvent(){var e={client_id:this.thAuthUser,events:[{name:"licence_check",params:{th_product:this.product,th_licence_type:this.thLicenceType,th_licence_status:this.thLicenceStatus,th_free_for_teachers:this.freeForTeachers,th_product_code:this.thAuthAuthCode,th_debug_notes:this.debugNotes}}]};fetch("https://www.google-analytics.com/mp/collect?measurement_id=G-222K4XD3D9&api_secret=z4zsnPP1SYa8qee18C5gsg",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}}var I_=function(e,t){return t>>>e|t<<32-e},P_=function(e){return I_(2,e)^I_(13,e)^I_(22,e)},R_=function(e){return I_(6,e)^I_(11,e)^I_(25,e)},L_=function(e){return I_(7,e)^I_(18,e)^e>>>3},N_=function(e){return I_(17,e)^I_(19,e)^e>>>10},D_=function(e,t,n){return e&t^~e&n},x_=function(e,t,n){return e&t^e&n^t&n},j_=function(e){for(var t="",n=7;n>=0;n-=1)t+=(e>>>4*n&15).toString(16);return t},U_=function(e){for(var t=unescape(encodeURIComponent(e)),n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],r=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],i=(t+=String.fromCharCode(128)).length/4+2,a=Math.ceil(i/16),o=new Array(a),s=0;a>s;s+=1){o[s]=new Array(16);for(var c=0;c<16;c+=1)o[s][c]=t.charCodeAt(64*s+4*c)<<24|t.charCodeAt(64*s+4*c+1)<<16|t.charCodeAt(64*s+4*c+2)<<8|t.charCodeAt(64*s+4*c+3)}o[a-1][14]=(t.length-1)/Math.pow(2,32)*8,o[a-1][14]=Math.floor(o[a-1][14]),o[a-1][15]=8*(t.length-1&4294967295);for(var u=new Array(64),l=0;a>l;l+=1){for(var h=0;h<16;h+=1)u[h]=o[l][h];for(var d=16;d<64;d+=1)u[d]=N_(u[d-2])+u[d-7]+L_(u[d-15])+u[d-16]&4294967295;for(var p=r[0],f=r[1],g=r[2],v=r[3],m=r[4],_=r[5],y=r[6],b=r[7],w=0;w<64;w+=1){var O=b+R_(m)+D_(m,_,y)+n[w]+u[w],S=P_(p)+x_(p,f,g);b=y,y=_,_=m,m=v+O&4294967295,v=g,g=f,f=p,p=O+S&4294967295}r[0]=r[0]+p&4294967295,r[1]=r[1]+f&4294967295,r[2]=r[2]+g&4294967295,r[3]=r[3]+v&4294967295,r[4]=r[4]+m&4294967295,r[5]=r[5]+_&4294967295,r[6]=r[6]+y&4294967295,r[7]=r[7]+b&4294967295}return`${j_(r[0])}${j_(r[1])}${j_(r[2])}${j_(r[3])}${j_(r[4])}${j_(r[5])}${j_(r[6])}${j_(r[7])}`},M_=function(e){var t=e.toLowerCase();t=t.trim();try{var n=t.split("@"),r=n[0].replace("%",""),i=n[1];return`${U_(r+="hfdu9b89';JHK7898hbh;';[/")}@${i}`}catch(e){}return""},B_=function(e){var t=e.toUpperCase();t=t.trim();try{return U_(`${t}hfdu9b89';JHK7898hbh;';[/`)}catch(e){}return""},V_=function(e){var t=e.toLowerCase();t=t.trim();try{return U_(`${t}hfdu9b89';JHK7898hbh;';[/`)}catch(e){}return""},G_=!1,F_=function(e,t){var n=!1,r=!1,i=!1,a=!1,o=!1,s=!1,c=!1,u=!1,l=!1,h=!1,d=!1,p=!1,f=!1,g=!1,v=!1,m=!1,_=!1,y="",b="",w="",O=!0,S=function(){k_.s3Req("institutions_list.json",v).then((([e,t,n])=>{A(e)}))},A=function(e){var t=JSON.parse(e),n=!1;u.find((function(e){return e in t&&(l=t[e],n=!0),n})),l?k_.s3Req(k_.getGroupFilename(l),v).then((([e,t,n])=>{R(e,t)})):k()},E=function(e,t,r){if(v=t,!1!==e)if("Group"===(g=JSON.parse(e)).licence_type)k_.s3Req(k_.getGroupFilename(g.group),v).then((([e,t,n])=>{x(e,t)}));else{n=e;var o=JSON.parse(e);c?S():i&&i!=o.auth_code?a?(h=!0,T()):k():"Freemium"==o.licence_type?(h=!0,T()):B()}else h=!0,T(r)},T=function(e){if(c)S();else if(o){var t=k_.platformFlagToCheck(f),n=k_.getDomainsListFilename(t,o);k_.s3Req(n,v).then((([e,t,n])=>{C(e,t,n)}))}else k(e)},k=function(e){i&&!a?k_.s3Req(k_.getUserFilename(i,f),v).then((([e,t,n])=>{D(e,t,n)})):n?B():r?O?j(e):U():(d=Error("User or product code not set"),t(d,!1))},C=function(e,t,n){v=t,!1!==e?P(e,I):k(n)},I=function(e){0!=e?k_.s3Req("groups/"+e+".json",v).then((([e,t,n])=>{R(e,t)})):k()},P=function(e,t){var n=JSON.parse(e),r=!1;"rw4gc"==f||"equatio"==f||"equatio_lti"==f||"ft4g"==f||"wriq"==f||"reachdeck"==f||!1!==s?null!=n.unlimited_oauth&&null!=n.unlimited_oauth[o]&&(r=n.unlimited_oauth[o]):!1!==i&&!0===a&&null!=n.unlimited&&(null!=n.unlimited[i]?r=n.unlimited[i]:d=Error("Product code invalid")),!r&&i&&!0===a&&null!=n.limited&&(null!=n.limited[i]?r=n.limited[i]:d=Error("Product code invalid")),r||null!=n.hide_unlicensed&&null!=n.hide_unlicensed[o]&&(p=!0),t(r)},R=function(e,t){v=t,!1!==e?(n=e,_?B():L(e)):_?k_.s3Req(k_.getUserFilename(r,f),v).then((([e,t,n])=>{E(e,t,n)})):k()},L=function(e){k_.verifyUserCanEnrolInGroup(e,v,f)?(n=e,B(),N(e)):!1===O?U():(n=!1,d=Error("Unable to enrol in group"),k())},N=function(e){var t=JSON.parse(e),n={};n.user=r,n.group=t.guid,n.auth_code=t.auth_code,n.product=f,c&&(n.institution_id=l,n.login_type=s),k_.sugarReq("group",n,(function(e){}))},D=function(e,a,o){v=a;try{if(!1!==e)if(k_.logger("[DEBUG]: Found auth code file."),r){var c=!0;0==s&&(c=!1,d=Error("Login type not set"));var u=JSON.parse(e);u.hasOwnProperty("perpetual")&&u.perpetual||k_.dateInFuture(u.expiry,v)||(c=!1,d=Error("License expired"));var l=k_.getSoftwareEnabledProp(f);!c||u.hasOwnProperty(l)&&0!=u[l]||(c=!1,d=Error("Product not enabled"));var h=u[s+"_login"];if(c&&""!==h){if(h===r)return n=e,B();c=!1,d=Error("This product code is already tied to a user for this login type")}else u[s+"_login"]=r;if(!0===c){n=JSON.stringify(u),k_.logger("[DEBUG]: licence file"),k_.logger(n),B(),k_.logger("[DEBUG]: Updating single user file via sugar");var p={};p.user=r,p.user_encrypted=!0,p.auth_code=i,p.login_type=s,p.licence_id=u.guid,k_.sugarReq("single",p,(function(e){k_.logger("[DEBUG]: File updated successfully.")}))}else j()}else n=e,B();else{if(!r)throw new Error("Not a valid product code");d=Error("Not a valid product code"),j(o)}}catch(e){t(e,n)}},x=function(e,t){if(v=t,!1!==e){var r=JSON.parse(e);if(8==r.auth_code.length&&(r.auth_code=B_(r.auth_code)),g.auth_code==r.auth_code){n=e;var i=k_.getSoftwareEnabledProp(f),a=k_.getProductExpiryProp(f);k_.dateInFuture(r.expiry,v)?1!=r[i]?(r[a]=k_.getYesterdaysDate(v),n=JSON.stringify(r),k_.s3Req(k_.getFeaturesFilename(f,"freemium"),v).then((([e,t,n])=>{V(e,t)}))):B():k_.s3Req(k_.getFeaturesFilename(f,"freemium"),v).then((([e,t,n])=>{V(e,t)}))}else d=Error("Group product code has changed, reverting to freemium"),h=!0,U()}else k_.s3Req(k_.getFeaturesFilename(f,"freemium"),v).then((([e,t,n])=>{V(e,t)}))},j=function(e){if(null==e&&(e=!1),!1===n&&!0===O){if(n=k_.freemium(r,v,f),e){var t=JSON.parse(n);t.lt=Math.floor(899999*Math.random()+1e5),n=JSON.stringify(t)}else M();B()}else!1===O?U():B()},U=function(){!1===n&&(n=k_.expiredFreemium(r,v,f),!0===O&&M()),B()},M=function(){if(r){var e={};e.user=r,e.product=f,k_.sugarReq("freemium",e).then((e=>{}))}},B=function(){var e=JSON.parse(n);y=e.licence_type,1==e.unlimited&&(y="Unlimited"),e.free_for_teachers&&(w=1);var t=!1;if("Group"!=e.licence_type){var r=k_.getProductExpiryProp(f),a=k_.getSoftwareEnabledProp(f);(e.hasOwnProperty(a)&&0!=e[a]||e.hasOwnProperty(r))&&(!e.hasOwnProperty(a)||1!=e[a]||k_.dateInFuture(e.expiry,v)||e.hasOwnProperty(r))||(b="Trial",e[r]=k_.get30DaysDate(v),n=JSON.stringify(e),t=!0),"Freemium"==e.licence_type&&(e.hide_unlicensed=p,n=JSON.stringify(e));var s=!1;(e.hasOwnProperty(a)&&1==e[a]&&k_.dateInFuture(e.expiry,v)||e.hasOwnProperty(r)&&k_.dateInFuture(e[r],v))&&(s=!0),!0===s?(b="Premium",k_.s3Req(k_.getFeaturesFilename(f,"premium"),v).then((([e,t,n])=>{V(e,t)}))):(b="Freemium",k_.s3Req(k_.getFeaturesFilename(f,"freemium"),v).then((([e,t,n])=>{V(e,t)})))}else K(n);if(!0===t&&M(),"Group"!=e.licence_type&&!0!==h&&null!=o){var c=!1;if("Single"==e.licence_type&&k_.dateInFuture(e.expiry,v)||(c=!0),!0===c){var u=k_.platformFlagToCheck(f),l=k_.getDomainsListFilename(u,o);k_.s3Req(l,v).then((([e,t,n])=>{G(e,t)}))}}e=JSON.parse(n),i=e.auth_code,!0===O&&("undefined"!=typeof chrome&&void 0!==chrome.storage?k_.getLastSync(v,f,"Chrome").then((e=>{e&&z()})):"undefined"!=typeof localStorage?k_.getLastSync(v,f,"Local").then((e=>{e&&z()})):z())},V=function(e,t){if(v=t,!1!==e){var r=JSON.parse(n),i=JSON.parse(e);r.features=i,n=JSON.stringify(r),K(n)}else K(n)},G=function(e,t){v=t,!1!==e&&P(e,F)},F=function(e){0!=e?k_.s3Req("groups/"+e+".json",v).then((([e,t,n])=>{Y(e,t)})):k_.logger("[WARNING]: No groups found for this domain.")},Y=function(e,t){v=t,!1!==e&&(k_.verifyUserCanEnrolInGroup(e,v,f)?N(e):k_.logger("[ERROR]: Unable to enroll user in the group."))},K=function(e){var n=JSON.parse(e);n.today=k_.getTodaysDate(v),n.currentDateTime=k_.getCurrentDateTime(v);var i=k_.getSoftwareEnabledProp(f),a=k_.getProductExpiryProp(f);if(n.hasOwnProperty(i)&&1==n[i]?(n.license_expiry=n.expiry,b="Premium",k_.dateInFuture(n.expiry,v)||n.hasOwnProperty(a)&&k_.dateInFuture(n[a],v)&&(n.license_expiry=n[a],b="Trial",n.trial=!0)):(n.license_expiry=n[a],k_.dateInFuture(n.license_expiry,v)?(b="Trial",n.trial=!0):(b="Freemium",n.trial=!1)),n.daysleft=k_.dateDiff(n.today,n.license_expiry,"days"),"Group"!=n.licence_type)if("equatio"==f){var o=k_.getSoftwareEnabledProp("rw4gc");"Single"==n.licence_type&&n.hasOwnProperty(o)&&1==n[o]?n.upgrade_link="https://text.help/2MVuXs":n.upgrade_link="https://text.help/llZsZf"}else"skrivatext"==f?n.upgrade_link="https://text.help/skrivatextupgrade":n.daysleft>=0?n.upgrade_link="https://text.help/sNm0iR":n.upgrade_link="https://text.help/ojpwiV";void 0===n.user&&0!=r&&(n.user=r),t(d,n)},z=function(){if(r)e=r.split("@")[1];else var e="takehomeuser";var t;switch(f){case"mac":case"rw4gc":case"windows":case"ipad":case"android":case"edge":t="Read&Write";break;case"equatio":case"equatio_lti":t="Equatio";break;case"ft4g":t="Fluency Tutor";break;case"wriq":t="WriQ";break;case"reachdeck":t="ReachDeck";break;case"orbitdoc":t="OrbitDoc";break;case"claroread":t="ClaroRead";break;case"writinghelper":t="WritingHelper";break;case"scanpen":t="ScanPen";break;case"skrivatext":t="SkrivaText";break;case"globaltasks":t="Global Tasks";break;case"lexiflow":t="LexiFlow"}if(new C_(r,e,t,y,b,w,i,"").sendEvent(),"undefined"!=typeof chrome&&"undefined"!=typeof analytics&&"function"==typeof analytics.getService){var n;(n=analytics.getService("th_licensing").getTracker("UA-83720712-5")).set("clientId",r),n.set("userId",r);var a=analytics.EventBuilder.builder().category("Licence Check").action(r).label(e).dimension({index:1,value:t}).dimension({index:2,value:y}).dimension({index:3,value:b}).dimension({index:4,value:w}).dimension({index:5,value:i}).dimension({index:6,value:""});n.send(a)}else if("undefined"!=typeof window&&"function"==typeof window.ga&&42===window.ga.answer)window.ga("create","UA-83720712-5","auto","licensingTracker",{clientId:r}),window.ga("licensingTracker.send","event",{uid:r,eventCategory:"Licence Check",eventAction:r,eventLabel:e,cd1:t,cd2:y,cd3:b,cd4:w,cd5:i,cd6:""});else{var o={v:1,t:"event",tid:"UA-83720712-5",ec:"Licence Check",ea:r,cid:r,uid:r,el:e,cd1:t,cd2:y,cd3:b,cd4:w,cd5:i,cd6:""},s=Object.keys(o).filter((function(e){return o[e]})).map((function(e){return e+"="+encodeURIComponent(o[e])})).join("&");fetch("https://www.google-analytics.com/collect",{method:"post",body:s})}};try{if(void 0!==e.debug&&""!=e.debug?(G_=e.debug,k_.thDebugMode=G_,k_.logger("=========================="),k_.logger("[CORE]: Debug Mode Enabled"),k_.logger("==========================")):G_=!1,null!=e.authCode&&""!=e.authCode&&!function(e){return 8==e.length?(e=e.toUpperCase(),k_.isGroupAuthCode(e)&&(a=!0),k_.logger("[DEBUG]: Found an auth code: "+e),i=B_(e),k_.logger("[DEBUG]: Hashed auth code for use: "+i),!0):10==e.length&&(e=e.toUpperCase(),k_.logger("[DEBUG]: Found a take home code: "+e),i=B_(e),k_.logger("[DEBUG]: Hashed take home code for use: "+i),_=!0,!0)}(e.authCode))throw new Error("Product code invalid");if(null!=e.product&&""!=e.product){if(!k_.validProduct(e.product))throw new Error("Invalid product");f=e.product}if(void 0!==e.cacheBypass&&""!=e.cacheBypass?(m=e.cacheBypass,k_.thCloudFrontBypass=m,m&&k_.logger("[DEBUG]: Bypassing CloudFront due to configuration option!")):(m=!1,k_.thCloudFrontBypass=!1),void 0!==e.createLicence){if("boolean"!=typeof e.createLicence)throw new Error("createLicence flag should be a boolean");O=e.createLicence,k_.logger("[DEBUG]: thCreateLicence set to "+O)}if(null!=e.user&&""!=e.user){var W=e.user.toLowerCase(),H=!1;if(null!=e.disableUserHash&&!0===e.disableUserHash&&(H=!0),!function(e,t){if(null!=e){if(!k_.isValidUser(e))throw k_.logger("[ERROR]: No domain found in user string."),new Error("No domain found");e=e.replace(/[\u200B-\u200D\uFEFF]/g,""),r=!0===t?e:M_(e),k_.logger('[DEBUG]: Hashed user string: "'+r+'"');var n=r.split("@")[1];return k_.logger('[DEBUG]: Domain set to: "'+n+'"'),o=V_(n),k_.logger('[DEBUG]: Domain (post-hash) set to: "'+o+'"'),!0}return!1}(W,H))throw new Error("Invalid user")}if(null!=e.loginType&&""!=e.loginType){var q=e.loginType;if(!function(e){return!(["facebook","feide","google","microsoft","linkedin","twitter","uni-c","yahoo"].indexOf(e)<0||(s=e,0))}(q))throw new Error("Invalid login type");!function(t,n,r){if(c=function(e){return!(["feide","uni-c"].indexOf(e)<0||(c=!0,0))}(t)){if(!1===r)throw new Error("ERROR: email should already be hashed.");if(!Array.isArray(n))throw new Error("institutions should be an array");u=n.map((e=>e.toLowerCase()))}else if(null!=e.institutions&&""!=e.institutions)throw new Error("institutions should not be set for this login type")}(q,e.institutions,e.disableUserHash)}if(!r&&!i)throw new Error("User or product code must be set");if(0==f)throw new Error("Product not set");1==_?(k_.logger("[DEBUG]: Starting take home check"),function(e){k_.logger("[DEBUG]: in the take home check");var t=i;0!=t?k_.s3Req("groups/takehome/"+t+".json",v).then((([e,t,n])=>{R(e,t)})):k()}()):r?k_.s3Req(k_.getUserFilename(r,f),v).then((([e,t,n])=>{E(e,t,n)})):(k_.logger("[DEBUG]: Starting single user check"),k())}catch(e){t(e,n)}};const Y_=Object.freeze(["Check It","Prediction","Predict Ahead","Dictionary","Picture Dictionary","Screenshot Reader","Audio Maker","Screen Masking","Web Search","Talk&Type","Vocabulary List","Voice Note","Simplify Page","Rewordify","Erase Highlights","Highlights","Hover Speech"]),K_=Object.freeze(["Play","Stop","Pause","Translator","Click&Speak","Practice Reading Aloud"]);class z_{constructor(e="",t="",n=""){this._user=e,this._loginType=t,this._product=n}getLicense(e=null,t=null,n=null,r=!0,i=null,a=!0){return new Promise(((o,s)=>{try{let s=null;r&&(s=new E_(A_)),void 0!==e&&(this._user!==e&&(a=!1),this._user=e),void 0!==t&&(this._loginType!==t&&(a=!1),this._loginType=t),void 0!==n&&(this._product!==n&&(a=!1),this._product=n);const c={user:e,loginType:t,product:n};"NYC"===t&&(c.loginType=""),null!=i&&(c.authCode=i,a=!1),a&&r?s.retrieve("rw4gc.lic.cache").then((r=>{if(null===r||0===Object.keys(r).length&&r.constructor===Object)a=!1,this.getLicenseNoCache(c).then((r=>{r.meta||(r.meta={}),r.meta.lastUpdated=new Date,r.meta.user=e,r.meta.loginType=t,r.meta.product=n;s.store("rw4gc.lic.cache",r,!1);o(this.newFeaturesAdded(r))}));else{const i=this._user===r.meta.user&&this._product===r.meta.product&&this._loginType===r.meta.loginType,a=new Date(r.meta.lastUpdated);this.nextDay(a)||!i?this.getLicenseNoCache(c).then((r=>{r.meta||(r.meta={}),r.meta.lastUpdated=new Date,r.meta.user=e,r.meta.loginType=t,r.meta.product=n;s.store("rw4gc.lic.cache",r,!1);o(this.newFeaturesAdded(r))})):o(this.newFeaturesAdded(r))}})):this.getLicenseNoCache(c).then((r=>{r.meta||(r.meta={}),r.meta.lastUpdated=new Date,r.meta.user=e,r.meta.loginType=t,r.meta.product=n,o(this.newFeaturesAdded(r))}))}catch(e){s(e)}}))}static removeCachedLicense(){return new Promise(((e,t)=>{try{new E_(A_).remove("rw4gc.lic.cache").then((()=>{e(!0)}))}catch(e){t(e)}}))}newFeaturesAdded(e){return Y_.forEach((t=>{void 0!==e[t]||"Freemium"===e.licence_type&&!e.trial||(e.features=e.features||{},e.features[t]=!0)})),K_.forEach((t=>{void 0===e[t]&&(e.features=e.features||{},e.features[t]=!0)})),e}getLicenseNoCache(e){return new Promise(((t,n)=>{F_(e,((e,r)=>{e?n(e):t(this.newFeaturesAdded(r))}))}))}nextDay(e){const t=new Date,n=1e4*t.getFullYear()+100*t.getMonth()+t.getDate();return 1e4*e.getFullYear()+100*e.getMonth()+e.getDate()!==n}}class W_{constructor(e=Um.DEFAULT,t=!1){this._authtype=e,this._user=void 0,this._license=void 0,this._isEdge=t}async getLicense(e=null,t=!1,n=!1){var r=this;return new Promise((async function(i,a){try{let a=new T_(r._authtype,r._isEdge),o=await a.getUser(t,n);null===o&&i({licenseStore:{license:null,authType:null},authType:null});let s=new z_(o.email,o.licensetype,"rw4gc"),c=await s.getLicense(o.email,o.licensetype,"rw4gc",!0,e);i({license:c,authType:o.licensetype})}catch(e){a(e)}}))}async getLicenseForAccount(e=null,t=null,n=!1){return new Promise((async function(r,i){try{if(0===e.length)return;let i=new z_(e.toLowerCase(),t.toLowerCase(),"rw4gc");r(await i.getLicense(e.toLowerCase(),t.toLowerCase(),"rw4gc",!0,null,n))}catch(e){i(e)}}))}signOut(e){return new Promise(((t,n)=>{try{z_.removeCachedLicense().then((()=>{e&&(this._authtype=e),new T_(this._authtype,this._isEdge).signOut().then((()=>{this._authtype=Um.DEFAULT,t(!0)})).catch((e=>{n(e)}))})).catch((e=>{n(e)}))}catch(e){n(e)}}))}}const H_="bjglhpoliipklkfjcahfefdlfpifcinb"===chrome.runtime.id,q_=Object.freeze({GROUP:"Group",UNLIMITED:"Unlimited",PREMIUM:"Premium",SINGLE:"Single"}),J_={licenseCheck:null},$_=(e,t)=>{let n;return J_.licenseCheck&&J_.licenseCheck._authtype===e?n=J_.licenseCheck:(n=new W_(e,t),J_.licenseCheck=n),n},X_=async(e,t=null,n=!1,r=!1)=>{let i,a=$_(e,H_);return i=t?await a.getLicense(t):await a.getLicense(null,n,r),i},Q_=async e=>{try{if(J_.licenseCheck)await J_.licenseCheck.signOut(e),J_.licenseCheck=null;else{let t=$_(e,H_);await t.signOut(e)}}catch(e){}},Z_=e=>{switch(!0){case e.toUpperCase().startsWith("NYC"):return i.NYC;case e.toUpperCase().startsWith("GOOGLE"):return i.GOOGLE;case e.toUpperCase().startsWith("MICROSOFT"):return i.MICROSOFT;default:return i.DEFAULT}},ey=async()=>(Z_(ni.state.licenseType)===i.DEFAULT&&ni.setLicenseType(Z_(await ty())),Z_(ni.state.licenseType)),ty=async()=>{let e=null,t=await(n=null,new Promise((e=>{chrome.storage.managed.get(n,(t=>{e(t)}))})));var n;return e=t.accountType?t.accountType.startsWith(i.MICROSOFT)?i.MICROSOFT:t.accountType.startsWith(i.NYC)?i.NYC:i.GOOGLE:i.DEFAULT,e},ny=async(e,t)=>{chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:[t]},(t=>{t&&t.forEach((t=>{t&&t.result&&!0===t.result.found&&setTimeout((()=>{try{let n=t.result.injectRule;n.target.tabId=e,n.target.frameIds=[t.frameId],chrome.scripting.executeScript(n,(()=>{chrome.runtime.lastError}))}catch(e){}}),100)}))}))};function ry(e,t,n){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ay=function(){function e(t,n,r,i){var a=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._senderId=t,this._messagingUrl="https://messaging.texthelp.com/",this._messagingCallback=void 0,"boolean"==typeof r?(!r&&(this._messagingUrl="https://th-messaging.dev.texthelp.com/"),this._messagingCallback=i):this._messagingCallback="function"==typeof r?r:i,this._lastMessage=void 0,this._waiting=!1,this._onMessageCallback=void 0,this._lastTopic=void 0,this._lastCallback=void 0,this._lastWaitTopic=void 0,this._application=n,this._GCMListen(),chrome.alarms.onAlarm.addListener((function(e){if("GCMKeepAlive"===e.name)void 0!==a._lastTopic&&a._registerTopic(a._lastTopic,void 0,!1,(function(){}))}))}return t=e,(n=[{key:"getLastMessage",value:function(e,t,n){var r=this,i=!1,a=void 0!==this._lastMessage;if(e!==this._lastTopic&&(t=!1,this._registerTopic(e,this._lastTopic,!0,(function(){}))),this._lastTopic=e,this._lastCallback=n,t&&a){try{"timed"===this._lastMessage.timetype&&0>this._expiryTimeMS(this._lastMessage,!0)&&(i=!0)}catch(e){i=!0}return void 0!==n&&n(i?void 0:this._lastMessage),void(void 0!==this._messagingCallback&&this._messagingCallback(this._lastMessage))}try{var o=`${this._messagingUrl}getlastmessage/v1`,s={method:"POST",body:JSON.stringify({message_topic:e,application:this._application}),cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:`Basic ${this._clientAuth}`}};fetch(o,s).then((function(e){e.json().then((function(e){var t;if(0<e.length){var a=e[0];t=r._parseMessageDoc(a)}if(r._lastMessage=t,void 0!==t&&void 0!==t.application&&t.application.toLowerCase()!==r._application&&n(void 0),i=!1,void 0===t)i=!0;else if("lockdown"!==t.application.toLowerCase())try{"timed"===r._lastMessage.timetype&&0>r._expiryTimeMS(r._lastMessage,!0)&&(i=!0)}catch(e){i=!0}void 0!==n&&n(i?void 0:t),void 0!==r._messagingCallback&&(i?r._messagingCallback(void 0):r._messagingCallback(t)),i||void 0===r._onMessageCallback||r._onMessageCallback(t)}))})).catch((function(){void 0!==n&&n(void 0),void 0!==r._messagingCallback&&r._messagingCallback(void 0)}))}catch(e){}}},{key:"onMessage",value:function(e){this._onMessageCallback=e}},{key:"manualMessage",value:function(e){try{var t=JSON.parse(e.data.message);this._parseMessage(t)}catch(e){console.log(e.message)}}},{key:"_parseMessageDoc",value:function(e){var t;try{var n={};if(n="string"==typeof e.message?JSON.parse(e.message):e.message,Object.prototype.hasOwnProperty.call(n,"application")||(n.application="rw4gc"),"lockdown"===n.application.toLowerCase())t={application:n.application,examSettings:n.examSettings};else{t={application:n.application};try{t.features=n["disabled-features"].reduce((function(e,t){return e[t]=0,e}),{})}catch(e){t.features={}}t.time=n.time,t.timetype=n.timetype}t.timestamp=e.post_date}catch(e){t=void 0}return t}},{key:"_expiryTimeMS",value:function(e,t){if(Number.isNaN(e.time))return 0;try{var n=new Date,r=new Date(e.timestamp),i=new Date(r.getTime()),a=60*parseFloat(e.time);i.setMinutes(i.getMinutes()+a);var o=i-n;return t&&0<o&&chrome.alarms.create("MessageExpired",{when:i.getTime()}),o}catch(e){return 0}}},{key:"_GCMKeepAlive",value:function(e){chrome.alarms.get("GCMKeepAlive",(function(t){void 0===t&&chrome.alarms.create("GCMKeepAlive",{periodInMinutes:e})}))}},{key:"_registerTest",value:function(){console.log(this._senderId),chrome.gcm.register([this._senderId],(function(e){void 0!==chrome.runtime.lastError&&console.log(chrome.runtime.lastError),console.log(`Old method id: ${e}`)})),chrome.instanceID.getToken({authorizedEntity:this._senderId,scope:"GCM"},(function(e){void 0!==chrome.runtime.lastError&&console.log(chrome.runtime.lastError),console.log(`New method id: ${e}`)}))}},{key:"_registerTopic",value:function(e,t,n,r){var i=this;chrome.storage.local.get("GCMRegistrationId",(function(t){var a=!1;chrome.instanceID.getToken({authorizedEntity:i._senderId,scope:"GCM"},(function(o){return void 0===chrome.runtime.lastError?n?(void 0!==t.id&&void 0!==t.topics&&t.id===o&&-1<t.topics.indexOf(token)&&(a=!0),void(a?r(t):void 0===t.id?i._registerIdWithService(o,e,(function(t){if(t){var n={id:o,topics:[e],lastModified:(new Date).toISOString()};chrome.storage.local.set({GCMRegistrationId:n}),r(n)}})):(void 0===t.topics?t.topics=[e]:t.topics.push(e),i._registerIdWithService(o,e,(function(e){e&&(e.lastModified=(new Date).toISOString(),chrome.storage.local.set({GCMRegistrationId:e}),r(e))}))))):void r({success:!0}):(console.log(chrome.runtime.lastError),void r(null))}))}))}},{key:"_GCMListen",value:function(){var e=this;chrome.gcm.onMessage.addListener((function(t){var n=JSON.parse(t.data.message);e._parseMessage(n)}))}},{key:"_parseMessage",value:function(e){if((void 0===e.message.application||e.message.application.toLowerCase()===this._application.toLowerCase())&&void 0!==e.message){var t=this._parseMessageDoc(e);this._lastMessage=t;var n=!1;if(void 0===t)n=!0;else if(void 0!==t.application&&"lockdown"!==t.application.toLowerCase())try{"timed"===this._lastMessage.timetype&&0>this._expiryTimeMS(this._lastMessage,!0)&&(n=!0)}catch(e){n=!0}n||void 0===this._messagingCallback||this._messagingCallback(t),n||void 0===this._onMessageCallback||this._onMessageCallback(t)}}},{key:"_registerIdWithService",value:function(e,t,n,r){var i=`${this._messagingUrl}registertoken/v1`,a={message_topic:t,google_token:e};void 0!==n&&(a.previous_topic=n);var o={method:"POST",body:JSON.stringify(a),cache:"no-cache",credentials:"omit",headers:{"Content-Type":"application/json",Authorization:`Basic ${this._clientAuth}`}};fetch(i,o).then((function(e){e.json().then((function(e){void 0!==r&&r(e.success)})).catch((function(){void 0!==r&&r(!1)}))}))}},{key:"waiting",get:function(){return this._waiting}}])&&iy(t.prototype,n),r&&iy(t,r),e;var t,n,r}();class oy{constructor(e,t=!0){ry(this,"messagingInstance",void 0),this.storageEvents=new Mr,this.messagingInstance=new ay("224182583415","rw4gc",!0,(e=>{e&&this.storageEvents.dispatchStorageEvent("th-datadesk-message",jr,{type:"th-datadesk-message",message:e.features})})),t&&this.messagingInstance.getLastMessage(e,!0,(e=>{e&&this.storageEvents.dispatchStorageEvent("th-datadesk-message",jr,{type:"th-datadesk-message",message:e.features})})),chrome.alarms.onAlarm.addListener((e=>{if("MessageExpired"===e.name)this.storageEvents.dispatchStorageEvent("th-datadesk-reset",jr,{type:"th-datadesk-reset"})}))}processMessage(e){this.messagingInstance.manualMessage(e)}}const sy={dataDesk:null},cy=(e,t,n)=>{try{if(sy.dataDesk)return sy.dataDesk;switch(e){case q_.GROUP:case q_.PREMIUM:case q_.SINGLE:case q_.UNLIMITED:sy.dataDesk=new oy(t,n)}}catch(e){console.info("Edge doesn't support chrome messaging.")}return sy.dataDesk},uy=()=>{sy.dataDesk=null},ly=(e=!0,t=!0)=>new Promise((async n=>{let r="";r=e?await(new Nm).swAuthorizeForByteBot(i.GOOGLE):await(new Nm).swAuthorizeForByteBotAndDriveInstall(i.GOOGLE);let a=await fetch("https://bytebot.googleapis.com/v1/applications/texthelp:getLicenseStatus",{method:"GET",headers:new Headers({Authorization:"Bearer "+r})}),o={};200!==a.status&&t?(await(new Nm).swRevokeCachedTokens(r,i.GOOGLE),o=await ly(!0,!1)):o=await a.json(),n(o)})),hy=async(e=!0)=>{const t=await ly(e);let n=!1;return"ACTIVE"===(null==t?void 0:t.status)&&(n=!0),n},dy=(e,t=!0)=>new Promise((async t=>{Zr.license=e;const n=(e=>{if(null==e)return;let t=!1;return t=!(!e&&"1"!=e&&"true"!=e),t})(e.bytebot);if(void 0!==n&&(e.bytebot=n),e.meta.loginType.toLowerCase()!==i.GOOGLE.toLowerCase())return void t();if(navigator.userAgent.indexOf("Edg")>-1)return void t();if(void 0===e.bytebot)return void t();if(!e.bytebot)return void t();const r=new Date,a=Zr.state.license.bytebotDate,o=new Date(a);if(void 0===a){const e=await hy();Zr.setBytebotLicensed(e)}else if(o.getFullYear()!==r.getFullYear()||o.getMonth()!==r.getMonth()||o.getDate()!==r.getDate()){const e=await hy();Zr.setBytebotLicensed(e)}else if(!Zr.state.license.bytebotLicenseEnabled){const e=await hy();Zr.setBytebotLicensed(e)}t()})),py=async(e,t,n)=>{chrome.tabs.sendMessage(e.id,{command:"th-toolbarinjected"},(async function(r){chrome.runtime.lastError;try{if(void 0===r)return;if(!1===r.injected)return void yy(e.id,e.url);if(t){let e=await ey();e||(e=i.DEFAULT);let t=await X_(e),r=t.license;await new Promise((e=>{setTimeout(e,300)})),r&&(dy(t.license),ni.setLicenseType(r.meta.loginType),ni.setLoginType(r.meta.loginType.toLowerCase()),n.dispatchStorageEvent("account-changed",Dr,{login:r.meta.loginType,user:r.meta.user}),uy(),cy(r.licence_type,r.meta.user,!0))}}catch(e){}}))},fy=async()=>{const[e]=await(e=>new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))})))({active:!0,currentWindow:!0});return e},gy=async e=>{vy(e)},vy=async e=>{chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["functions/getSelector.js"]},(t=>{t&&t.forEach((t=>{t&&t.result&&!0===t.result.found&&setTimeout((()=>{try{let n=t.result.injectRule;n.target.tabId=e,n.target.frameIds=[t.frameId],chrome.scripting.executeScript(n,(()=>{chrome.runtime}))}catch(e){}}),1e3)}))}))},my=async(e,t)=>{t.lastIndexOf("sharepoint.com")>-1||t.lastIndexOf("https://onedrive.live.com/")>-1||chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["functions/getIfInstalled.js"]},(t=>{t&&t.forEach((t=>{!0!==t.result&&null!==t.result&&setTimeout((()=>{try{chrome.scripting.executeScript({target:{tabId:e,frameIds:[t.frameId]},files:["frame.bundle.js","domdistiller.js"]},(()=>{chrome.runtime.lastError}))}catch(e){}}),1e3)}))}))},_y=(e,t,n)=>{try{chrome.scripting.executeScript({target:{tabId:e,frameIds:[n]},files:["functions/getIfInserted.js"]},(t=>{if(chrome.runtime.lastError,!t)return;t.filter((e=>{if(!1===e.result.res&&!1===e.result.checked)return!0})).forEach((t=>{let r=[];xm.forEach((n=>{let i=n.settings;i.target.tabId=e,n.matches.some((e=>{let a={[e]:i},o=jm(t.result.url,a);if(o.target&&o.target.tabId)return r.push(n),!0}))})),r.length>0&&(r[0].settings.target.frameIds=[n],setTimeout((()=>{try{chrome.scripting.executeScript(r[0].settings,(()=>{chrome.runtime.lastError}))}catch(e){}}),1e3))}))}))}catch(e){}},yy=async(e,t)=>{t=t.toLowerCase(),await ny(e,"mathjax/getIfMathjaxNeeded.js"),await my(e,t),await(async e=>{let t=0,n=!1,r=0;for(;!(n||(r++,r>30));)await new Promise((e=>{setTimeout(e,t)})),t=300,chrome.scripting.executeScript({target:{tabId:e,allFrames:!0},files:["functions/getIfFrameInitialised.js"]},(e=>{e&&(n=0===e.filter((e=>!e.result)).length)}))})(e),gy(e),((e,t,n)=>{t.forEach((t=>{let r=t.settings;r.target.tabId=n,t.matches.includes("*")?setTimeout((()=>{chrome.scripting.executeScript(r)}),1e3):t.matches.some((t=>{let n=jm(e,{[t]:r});if(n.target&&n.target.tabId)return setTimeout((()=>{chrome.scripting.executeScript(n)}),1e3),!0}))}))})(t,Dm,e),_y(e,0,0)},by={"en-AU":{speechoptions:{voice:"Karen",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"es",transsource:"en"},language:{language:"en_US",services:"en_US"}},"en-GB":{speechoptions:{voice:"Serena",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"fr",transsource:"en"},language:{language:"en_GB",services:"en_GB"}},en:{speechoptions:{voice:"Serena",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"fr",transsource:"en"},language:{language:"en_GB",services:"en_GB"}},"en-US":{speechoptions:{voice:"Ava",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"es",transsource:"en"},language:{language:"en_US",services:"en_US"}},"en-CA":{speechoptions:{voice:"Ava",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"fr",transsource:"en"},language:{language:"en_US",services:"en_GB"}},fr:{speechoptions:{voice:"Audrey",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"fr"},language:{language:"fr",services:"fr"}},"fr-CA":{speechoptions:{voice:"Amelie",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"fr"},language:{language:"fr",services:"fr"}},"fr-FR":{speechoptions:{voice:"Amelie",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"fr"},language:{language:"fr",services:"fr"}},ms:{speechoptions:{voice:"Tagalog",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"ms"},language:{language:"ms",services:"en_US"}},tl:{speechoptions:{voice:"Tagalog",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"ms"},language:{language:"ms",services:"en_US"}},pt:{speechoptions:{voice:"Luciana",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"pt"},language:{language:"pt",services:"pt"}},"pt-BR":{speechoptions:{voice:"Luciana",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"pt"},language:{language:"pt",services:"pt"}},"pt-PT":{speechoptions:{voice:"Luciana",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"pt"},language:{language:"pt",services:"pt"}},es:{speechoptions:{voice:"Monica",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"es"},language:{language:"es",services:"es"}},nl:{speechoptions:{voice:"Claire",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"nl"},language:{language:"nl",services:"nl"}},"nl-BE":{speechoptions:{voice:"Claire",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"nl"},language:{language:"nl",services:"nl"}},"es-419":{speechoptions:{voice:"Paulina",continousreading:!0,speakoneachword:!1,speakoneachsentence:!1,speed:50},translator:{translang:"en",transsource:"us"},language:{language:"es",services:"es"}}};const wy=[{name:"Tagalog",Gender:"Female",language:"ms",description:"Tagalog Female Amelia",glang:"ms",vendor:"Google",SupportedEngines:["standard"]},{name:"Tarik",Gender:"Male",language:"ar",description:"Arabic Male Tarik",glang:"ar",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Miren",Gender:"Female",language:"eu-es",description:"Basque Female Miren",glang:"eu",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Montserrat",Gender:"Female",language:"ca-es",description:"Catalan Female Montserrat",glang:"ca",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Tian-Tian",Gender:"Female",language:"zh-cn",description:"Chinese (Mandarin - Simplified) Female Tian-Tian",glang:"zh_cn",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Mei-Jia",Gender:"Female",language:"zh-tw",description:"Chinese (Mandarin - Traditional - Taiwanese) Female Mei-Jia",glang:"zh_tw",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Zuzana",Gender:"Female",language:"cs-cz",description:"Czech Female Zuzana",glang:"cs",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sara",Gender:"Female",language:"da-dk",description:"Danish Female Sara",glang:"da-dk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Magnus",Gender:"Male",language:"da-dk",description:"Danish Male Magnus",glang:"da-dk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ellen",Gender:"Female",language:"nl-be",description:"Dutch (Belgium and Flemish) Female Ellen",glang:"nl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Claire",Gender:"Female",language:"nl-nl",description:"Dutch (Netherlands) Female Claire",glang:"nl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Xander",Gender:"Male",language:"nl-nl",description:"Dutch (Netherlands) Male Xander",glang:"nl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Karen",Gender:"Female",language:"en-au",description:"English (Australian) Female Karen",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lee",Gender:"Male",language:"en-au",description:"English (Australian) Male Lee",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Veena",Gender:"Female",language:"en-in",description:"English (India) Female Veena",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Moira",Gender:"Female",language:"en-ie",description:"English (Irish) Female Moira",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Fiona",Gender:"Female",language:"en-sc",description:"English (Scottish) Female Fiona",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Tessa",Gender:"Female",language:"en-za",description:"English (South African) Female Tessa",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Daniel",Gender:"Male",language:"en-gb",description:"English (UK) Male Daniel",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Serena",Gender:"Female",language:"en-gb",description:"English (UK) Female Serena",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Allison",Gender:"Female",language:"en-us",description:"English (US) Female Allison",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ava",Gender:"Female",language:"en-us",description:"English (US) Female Ava",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Tom",Gender:"Male",language:"en-us",description:"English (US) Male Tom",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Samantha",Gender:"Female",language:"en-us",description:"English (US) Female Samantha",glang:"en",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Satu",Gender:"Female",language:"fi-fi",description:"Finnish Female Satu",glang:"fi",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Amelie",Gender:"Female",language:"fr-ca",description:"French (Canadian) Female Amelie",glang:"fr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Audrey",Gender:"Female",language:"fr",description:"French Female Audrey",glang:"fr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Thomas",Gender:"Male",language:"fr",description:"French Male Thomas",glang:"fr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Carmela",Gender:"Female",language:"gl-es",description:"Galician (Spain) Female Carmela",glang:"gl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Anna",Gender:"Female",language:"de-de",description:"German Female Anna",glang:"de",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Yannick",Gender:"Male",language:"de-de",description:"German Male Yannick",glang:"de",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Petra",Gender:"Female",language:"de-de",description:"German Female Petra",glang:"de",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Melina",Gender:"Female",language:"el-gr",description:"Greek Female Melina",glang:"el",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Nikos",Gender:"Male",language:"el-gr",description:"Greek Male Nikos",glang:"el",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lekha",Gender:"Female",language:"hi-in",description:"Hindi Female Lekha",glang:"hi",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Mariska",Gender:"Female",language:"hu-hu",description:"Hungarian Female Mariska",glang:"hu",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Damayanti",Gender:"Female",language:"id-id",description:"Indonesian (Bahasa) Female Damayanti",glang:"id",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Alice",Gender:"Female",language:"it-it",description:"Italian Female Alice",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Federica",Gender:"Female",language:"it-it",description:"Italian Female Federica",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Luca",Gender:"Male",language:"it-it",description:"Italian Male Luca",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Paola",Gender:"Female",language:"it-it",description:"Italian Female Paola",glang:"it",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ichiro",Gender:"Male",language:"ja-jp",description:"Japanese Male Ichiro",glang:"ja",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sakura",Gender:"Female",language:"ja-jp",description:"Japanese Female Sakura",glang:"ja",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sora",Gender:"Female",language:"ko-kr",description:"Korean Female Sora",glang:"ko",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Nora",Gender:"Female",language:"no-no",description:"Norwegian Female Nora",glang:"no",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Henrik",Gender:"Male",language:"no-no",description:"Norwegian Male Henrik",glang:"no",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ewa",Gender:"Female",language:"pl-pl",description:"Polish Female Ewa",glang:"pl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Zosia",Gender:"Female",language:"pl-pl",description:"Polish Female Zosia",glang:"pl",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Luciana",Gender:"Female",language:"pt-br",description:"Portuguese (Brazilian) Female Luciana",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Felipe",Gender:"Male",language:"pt-br",description:"Portuguese (Brazilian) Male Felipe",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Joana",Gender:"Female",language:"pt-pt",description:"Portuguese Female Joana",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Catarina",Gender:"Female",language:"pt-pt",description:"Portuguese Female Catarina",glang:"pt",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Ioana",Gender:"Female",language:"ro-ro",description:"Romanian Female Ioana",glang:"ro",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Milena",Gender:"Female",language:"ru-ru",description:"Russian Female Milena",glang:"ru",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Yuri",Gender:"Male",language:"ru-ru",description:"Russian Male Yuri",glang:"ru",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Laura",Gender:"Female",language:"sk-sk",description:"Slovakian Female Laura",glang:"sk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Carlos",Gender:"Male",language:"es-co",description:"Spanish (Columbian) Male Carlos",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Soledad",Gender:"Female",language:"es-co",description:"Spanish (Columbian) Female Soledad",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Paulina",Gender:"Female",language:"es-mx",description:"Spanish (Mexican) Female Paulina",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Juan",Gender:"Male",language:"es-mx",description:"Spanish (Mexican) Male Juan",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Jorge",Gender:"Male",language:"es-es",description:"Spanish (Castilian) Male Jorge",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Monica",Gender:"Female",language:"es-es",description:"Spanish (Castilian) Female Monica",glang:"es",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Alva",Gender:"Female",language:"sv-se",description:"Swedish Female Alva",glang:"sv",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Oskar",Gender:"Male",language:"sv-se",description:"Swedish Male Oskar",glang:"sv",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Kanya",Gender:"Female",language:"th-th",description:"Thai Female Kanya",glang:"th",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Cem",Gender:"Male",language:"tr-tr",description:"Turkish Male Cem",glang:"tr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Yelda",Gender:"Female",language:"tr-tr",description:"Turkish Female Yelda",glang:"tr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Dariush",Gender:"Male",language:"fa-ir",glang:"fa",description:"Farsi Male Dariush",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Carmit",Gender:"Female",language:"he-il",glang:"he",description:"Hebrew Female Carmit",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lesya",Gender:"Female",language:"uk-ua",glang:"uk",description:"Ukrainian Female Lesya",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Jordi",Gender:"Male",language:"ca-es",glang:"ca",description:"Catalan Male Jordi",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Lana",Gender:"Female",language:"hr-hr",description:"Croatian Female Lana",glang:"hr-hr",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Sinji_Ml",Gender:"Female",language:"yue-hk",description:"Cantonese Female Sinji",glang:"yue-hk",vendor:"Nuance",SupportedEngines:["standard"]},{name:"Daria",Gender:"Female",language:"bg-bg",description:"Bulgarian Female Daria",glang:"bg-bg",vendor:"Nuance",SupportedEngines:["standard"]}],Oy=[{name:"Geraint",Gender:"Male",language:"en-gb-wls",description:"Welsh English Male Geraint",glang:"en",vendor:"Polly",SupportedEngines:["standard"]},{name:"Gwyneth",Gender:"Female",language:"cy-gb",description:"Welsh Female Gwyneth",glang:"cy",vendor:"Polly",SupportedEngines:["standard"]},{name:"Karl",Gender:"Male",language:"is-is",description:"Icelandic Male Karl",glang:"is",vendor:"Polly",SupportedEngines:["standard"]},{name:"Dora",Gender:"Female",language:"is-is",description:"Icelandic Female Dóra",glang:"is",vendor:"Polly",SupportedEngines:["standard"]}],Sy=[{name:"Ceitidh",Gender:"Female",language:"gd",glang:"gd",description:"Gaelic (Scottish) Female Ceitidh",vendor:"Cereproc",SupportedEngines:["standard"]},{name:"Peig",Gender:"Female",language:"ga",glang:"ga",description:"Irish Female Peig",vendor:"Cereproc",SupportedEngines:["standard"]},{name:"Heather",Gender:"Female",language:"en-sc",description:"English (Scottish) Female Heather",glang:"en",vendor:"Cereproc",SupportedEngines:["standard"]},{name:"Stuart",Gender:"Male",language:"en-sc",description:"English (Scottish) Male Stuart",glang:"en",vendor:"Cereproc",SupportedEngines:["standard"]},{name:"Andrew",Gender:"Male",language:"en-sc",description:"English (Scottish) Male Andrew",glang:"en",vendor:"Cereproc",SupportedEngines:["standard"]}],Ay=[{name:"Aine",Gender:"Female",language:"ga",glang:"ga",description:"Irish (Ulster) female Áine - beta",vendor:"Trinity College Dublin",SupportedEngines:["standard"]},{name:"t_Anna",Gender:"Female",language:"ga",glang:"ga",description:"Irish (Connemara) female Anna - beta",vendor:"Trinity College Dublin",SupportedEngines:["standard"]},{name:"Caitlin",Gender:"Female",language:"ga",glang:"ga",description:"Irish (Munster) female Caitlin - beta",vendor:"Trinity College Dublin",SupportedEngines:["standard"]},{name:"Macdara",Gender:"Male",language:"ga",glang:"ga",description:"Irish (Connemara) male Macdara - beta",vendor:"Trinity College Dublin",SupportedEngines:["standard"]}];class Ey{constructor(e,t,n){this.voiceByName={},this.voicesByGenderLang={Male:{},Female:{}},this.voicesByLang={},this.createVoiceMap(e,t,n)}createVoiceMap(e,t,n,r){let i=[...wy];e&&i.push(...Oy),t&&i.push(...Sy),n&&i.push(...Ay);for(let e=0;e<i.length;e++)this.voiceByName[i[e].name]=i[e],null!=this.voicesByGenderLang[i[e].Gender]&&void 0!==this.voicesByGenderLang[i[e].Gender]||(this.voicesByGenderLang[i[e].Gender]={}),null!=this.voicesByGenderLang[i[e].Gender][i[e].language]&&void 0!==this.voicesByGenderLang[i[e].Gender][i[e].language]||(this.voicesByGenderLang[i[e].Gender][i[e].language]=[]),this.voicesByGenderLang[i[e].Gender][i[e].language].push(i[e])}getVoiceByGenderAndLang(e,t){return this.voicesByGenderLang[e][t]}getVoiceByName(e){return this.voiceByName[e]}getVoices(e=!1,t=!1,n=!1){let r=[...wy];return e&&r.push(...Oy),t&&r.push(...Sy),n&&r.push(...Ay),r}}class Ty{constructor(e="Ava?",t="50"){this.AUDIOMAKERSETTINGS={USER:"rwforgdocs4",SERVICEURL:"https://texthelpspeech.speechstream.net",SERVICEPATH:"Mp3Maker"},Object.freeze(this.CHECKITSETTINGS),this._mp3Path,this._filename,this._speed=t;const n=(new Ey).getVoices(!0,!0,!0);if(this._voice=this._validateVoice(e),!(n.filter((t=>{if(t.name===e)return!0})).length>0)){let e=Yv.state.language.language.replace(/_/g,"-"),t=by[e];void 0===t&&(t=by["en-US"]),t.speechoptions.voice?this._voice=t.speechoptions.voice:this._voice="Ava?"}this._baseURL=this._calculatePath(this.AUDIOMAKERSETTINGS.SERVICEURL,this.AUDIOMAKERSETTINGS.SERVICEPATH)+"?userName="+this.AUDIOMAKERSETTINGS.USER+"&voiceName="+this._voice+"&speedValue="+t,this._events=new Mr,this._events.initialise(),this._source=null}async convert(e,t,n){var r=this;const i=this._baseURL;this._filename=e,this._source=n;let a=await this.requestMP3(i,e,t);const o=a.statusFileLocation;""!=o&&(this._mp3Path=a.mp3Location,setTimeout((async function(){try{await r._statusChecker(o)}catch(e){}}),1e3))}_validateVoice(e){return"%3F"==e.slice(e.length-3)?e=decodeURIComponent(e):decodeURIComponent(e)===e&&(e=encodeURIComponent(e)),"%3F"==e.slice(e.length-3)?e=decodeURIComponent(e):decodeURIComponent(e)===e&&(e=encodeURIComponent(e)),e}_getServerVoice(){}_calculatePath(e,t){try{"/"!=e.charAt(e.length-1)&&(e+="/"),"/"!=t.charAt(t.length-1)&&(t+="/")}catch(e){}return e+t}async requestMP3(e,t,n){let r=`filename=${t}&text=${n=encodeURIComponent(n)}`;try{let t=await fetch(e,{headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:r,method:"POST",mode:"cors",credentials:"include"});return await t.json()}catch(e){console.log(e)}}async _statusChecker(e){var t=this,n=await this._requestStatusFile(e);try{100==n?this._events.dispatchStorageEvent("th-gotaudiofile",xr,{type:"th-gotaudiofile",file:this._mp3Path},this._source.sessionId,this._source.frameId):setTimeout((async function(){try{await t._statusChecker(e)}catch(e){}}),1e3)}catch(e){}}async _requestStatusFile(e){try{const t=await fetch(e,{method:"GET",mode:"cors"}),n=await t.json();if(null==n);else{if(""==n.error||" "==n.error)return this._events.dispatchStorageEvent("th-audioprogress",xr,{type:"th-audioprogress",value:n.progress},this._source.sessionId,this._source.frameId),n.progress;console.log(n.error)}}catch(e){console.log(e)}}}class ky{static CallSimplifyService(e=!1,t,n,r,i,a,o){const s=chrome.runtime.getManifest().version.replace(/\./g,""),c=new Date;return new Promise((u=>{let l=`https://rw4gc-simplify.texthelp.com/?v=${s}`;e&&(l=`https://rw4gc-simplify.dev.texthelp.com/?v=${c.getMilliseconds()}`);const h=ky._userDataFromLicense(a);chrome.tabs.create({url:l,active:!0},(async function(e){const a=()=>{self.setTimeout((()=>{chrome.tabs.sendMessage(e.id,{type:"th-injectsimplify",text:n,url:r,lang:i,userInfo:h,title:t,feature:o},{frameId:0},(e=>{chrome.runtime.lastError,void 0===e||0!==e.indexOf("finished")?a():u()}))}),5e3)};a()}))}))}static _userDataFromLicense(e){try{if(void 0===e.user)throw new Error("Field: user");if(void 0===e.trial)throw new Error("Field: trial");if(void 0===e.unlimited&&(e.unlimited=!1),void 0===e.daysleft)throw new Error("Field: daysleft");let t=e.user.split("@")[0].replace("%",""),n=e.user.substring(t.length+1);return{user:e.user,emailDomain:n,trial:e.trial,unlimited:e.unlimited,daysleft:e.daysleft}}catch(e){throw new Error("Error getting the correct license fields: "+e.message)}}}var Cy=(e,t,n)=>{const r={html:e.text.replace(/(?:\f\n|\f|\n)/g,"<br>"),documentTitle:e.title,loginType:t.loginType,url:n},i=chrome.runtime.getManifest().version.replace(/\./g,"");chrome.tabs.create({url:`https://pra.texthelp.com/?v=${i}`},(e=>{const t={command:"th-practicereadingaloud",data:r},n=(r,i)=>{r===e.id&&"complete"===i.status&&(chrome.tabs.onUpdated.removeListener(n),chrome.tabs.sendMessage(r,t,(()=>{chrome.runtime.lastError})))};chrome.tabs.onUpdated.addListener(n),chrome.tabs.sendMessage(e.id,t,(()=>{chrome.runtime.lastError}))}))};const Iy=()=>new Promise((e=>{chrome.storage.local.get({ga_session:null},(t=>{const n=t.ga_session;e(n)}))})),Py=()=>Math.floor(Date.now()/1e3),Ry=async(e,t)=>{new Promise((e=>{chrome.storage.local.set({ga_last_event:Py()},(()=>{e()}))}));const n=(e=>1e3*e+18e5<1e3*Py())(t);e&&!n||await new Promise((e=>{chrome.storage.local.set({ga_session:Py()},(()=>{e()}))}));const r=await Iy();return{latestSessionID:r,sessionTime:Py()-r}},Ly=async(e,t,n,r=!1)=>{const i=await Iy(),a=await(async()=>new Promise(((e,t)=>{chrome.storage.local.get({ga_last_event:null},(n=>{if(chrome.runtime.lastError)t(new Error(chrome.runtime.lastError));else{const t=n.ga_last_event||Py();e(t)}}))})))(),{latestSessionID:o,sessionTime:s}=await Ry(i,a);e.events[0].params.ga_session_id=o,e.events[0].params.session_time=s;const c=((e=!1,t=null,n=null)=>`https://www.google-analytics.com/${e?"debug/":""}mp/collect?&measurement_id=${t}&api_secret=${n}`)(r,t,n);fetch(c,{method:"POST",body:JSON.stringify(e)})},Ny=async(e,t,n=!1)=>{Dy(),chrome.runtime.onMessage.addListener((async r=>{if(null==r||!r.eventData)return;const i=JSON.parse(r.eventData);await Ly(i,e,t,n)}))},Dy=()=>{chrome.windows.onRemoved.addListener((()=>{chrome.windows.getAll({populate:!1},(e=>{if(0===e.length){const e=["ga_session","ga_last_event"];chrome.storage.local.remove(e,(()=>{}))}}))}))},xy=Object.freeze({GDocsParser:"GDocsParser",HTMLParser:"HTMLParser",GSlidesParser:"GoogleSlidesParser",GoogleFormsParser:"GoogleFormsParser",MSWordOnlineParser:"MSWordOnlineParser",GoogleDocs:"Google Docs",GDocsPublished:"Google Doc Published",GSlides:"Google Slides",GoogleForms:"Google Forms",GoogleLockedForms:"Google Locked Forms",MicrosoftWordOnline:"Microsoft Word Online",MicrosoftOnenoteOnline:"Microsoft Onenote Online",Web:"Web",FluencyTutor:"Fluency Tutor",Simplify:"Simplify",PRA:"Practice Reading Aloud",EPubreader:"ePub reader"});Object.freeze({"https://docs.google.com/document/*":{name:xy.GoogleDocs},"https://assignments.google.com*":{name:xy.GoogleDocs},"https://docs.google.com/document/*edit":{name:xy.GoogleDocs},"https://docs.google.com/document/*preview*":{name:xy.GoogleDocs},"https://docs.google.com/document/*pub":{name:xy.GDocsPublished},"https://docs.google.com/document/*classroom.google.com":{name:xy.GoogleDocs},"https://docs.google.com/presentation/*edit":{name:xy.GSlides},"https://docs.google.com/forms/*edit":{name:xy.GoogleForms},"https://docs.google.com/forms/*startquiz":{name:xy.GoogleLockedForms},"https://docs.google.com/forms/*viewform":{name:xy.GoogleForms},"https://docs.google.com/forms/*formresponse":{name:xy.GoogleLockedForms,requireElemSelector:".freebirdCommonViewSecurequizSecureQuizBanner"},"https://docs.google.com/forms/*":{name:xy.GoogleForms},"https://*word-edit.officeapps.live.com/*":{name:xy.MicrosoftWordOnline},"https://*.sharepoint.com/*personal*":{name:xy.MicrosoftWordOnline},"https://*word-edit.officeapps.live.com":{name:xy.MicrosoftWordOnline},"https://onedrive.live.com/*":{name:xy.MicrosoftWordOnline},"https://onedrive.live.com/redir?*":{name:xy.MicrosoftWordOnline},"https://onedrive.live.com/edit?*":{name:xy.MicrosoftWordOnline},"https://onedrive.live.com/edit.aspx?":{name:xy.MicrosoftWordOnline},"https://*onenote.officeapps.live.com/o/onenoteframe.aspx":{name:xy.MicrosoftOnenoteOnline},"https://reading.texthelp.com/readrrite":{name:xy.FluencyTutor},"https://fluency.texthelp.com/readrrite":{name:xy.FluencyTutor},"https://newsela.com/":{name:xy.Web},"https://www.dogonews.com":{name:xy.Web},"https://rw4gc-simplify.texthelp.com/":{name:xy.Simplify},"https://rw4gc-simplify-qa.texthelp.com/":{name:xy.Simplify},"https://rw4gc-simplify.dev.texthelp.com/":{name:xy.Simplify},"https://pra.texthelp.com/":{name:xy.PRA},"https://pra.dev.texthelp.com/":{name:xy.PRA},"https://epub.texthelp.com/":{name:xy.EPubreader},"https://rw4gc-epub-qa.texthelp.com/":{name:xy.EPubreader},"https://epub.dev.texthelp.com":{name:xy.EPubreader},"https://*.instructure.com":{name:xy.Web},"https://*.awinfosys.com":{name:xy.Web}});const jy=[];for(let e=0;e<256;++e)jy.push((e+256).toString(16).slice(1));"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Uy="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},My={exports:{}};!function(e,t){!function(n,r){var i="function",a="undefined",o="object",s="string",c="major",u="model",l="name",h="type",d="vendor",p="version",f="architecture",g="console",v="mobile",m="tablet",_="smarttv",y="wearable",b="embedded",w="Amazon",O="Apple",S="ASUS",A="BlackBerry",E="Browser",T="Chrome",k="Firefox",C="Google",I="Huawei",P="LG",R="Microsoft",L="Motorola",N="Opera",D="Samsung",x="Sharp",j="Sony",U="Xiaomi",M="Zebra",B="Facebook",V="Chromium OS",G="Mac OS",F=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},Y=function(e,t){return typeof e===s&&-1!==K(t).indexOf(K(e))},K=function(e){return e.toLowerCase()},z=function(e,t){if(typeof e===s)return e=e.replace(/^\s\s*/,""),typeof t===a?e:e.substring(0,500)},W=function(e,t){for(var n,a,s,c,u,l,h=0;h<t.length&&!u;){var d=t[h],p=t[h+1];for(n=a=0;n<d.length&&!u&&d[n];)if(u=d[n++].exec(e))for(s=0;s<p.length;s++)l=u[++a],typeof(c=p[s])===o&&c.length>0?2===c.length?typeof c[1]==i?this[c[0]]=c[1].call(this,l):this[c[0]]=c[1]:3===c.length?typeof c[1]!==i||c[1].exec&&c[1].test?this[c[0]]=l?l.replace(c[1],c[2]):r:this[c[0]]=l?c[1].call(this,l,c[2]):r:4===c.length&&(this[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):r):this[c]=l||r;h+=2}},H=function(e,t){for(var n in t)if(typeof t[n]===o&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(Y(t[n][i],e))return"?"===n?r:n}else if(Y(t[n],e))return"?"===n?r:n;return e},q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},J={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[l,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[l,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[l,p],[/opios[\/ ]+([\w\.]+)/i],[p,[l,N+" Mini"]],[/\bopr\/([\w\.]+)/i],[p,[l,N]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[p,[l,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[l,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[l,"UC"+E]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[p,[l,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[l,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[l,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[p,[l,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[p,[l,"Smart Lenovo "+E]],[/(avast|avg)\/([\w\.]+)/i],[[l,/(.+)/,"$1 Secure "+E],p],[/\bfocus\/([\w\.]+)/i],[p,[l,k+" Focus"]],[/\bopt\/([\w\.]+)/i],[p,[l,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[l,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[l,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[l,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[l,"MIUI "+E]],[/fxios\/([-\w\.]+)/i],[p,[l,k]],[/\bqihu|(qi?ho?o?|360)browser/i],[[l,"360 "+E]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[l,/(.+)/,"$1 "+E],p],[/samsungbrowser\/([\w\.]+)/i],[p,[l,D+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],p],[/metasr[\/ ]?([\d\.]+)/i],[p,[l,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[l,"Sogou Mobile"],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[l,p],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[l],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[l,B],p],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[l,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[l,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[p,[l,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[l,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[l,T+" WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[l,"Android "+E]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[l,p],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[p,[l,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[p,l],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[l,[p,H,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[l,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[l,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[l,k+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[l,p],[/(cobalt)\/([\w\.]+)/i],[l,[p,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,K]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows (ce|mobile); ppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[f,/ower/,"",K]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,K]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[d,D],[h,m]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[d,D],[h,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[u,[d,O],[h,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[d,O],[h,m]],[/(macintosh);/i],[u,[d,O]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[d,x],[h,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[d,I],[h,m]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[u,[d,I],[h,v]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[d,U],[h,v]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[d,U],[h,m]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[d,"OPPO"],[h,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[d,"Vivo"],[h,v]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[u,[d,"Realme"],[h,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[d,L],[h,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[d,L],[h,m]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[d,P],[h,m]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[d,P],[h,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[d,"Lenovo"],[h,m]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[d,"Nokia"],[h,v]],[/(pixel c)\b/i],[u,[d,C],[h,m]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[d,C],[h,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[d,j],[h,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[d,j],[h,m]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[d,"OnePlus"],[h,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[d,w],[h,m]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[d,w],[h,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,d,[h,m]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[d,A],[h,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[d,S],[h,m]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[d,S],[h,v]],[/(nexus 9)/i],[u,[d,"HTC"],[h,m]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[d,[u,/_/g," "],[h,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[d,"Acer"],[h,m]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[d,"Meizu"],[h,v]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[u,[d,"Ulefone"],[h,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[d,u,[h,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[d,u,[h,m]],[/(surface duo)/i],[u,[d,R],[h,m]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[d,"Fairphone"],[h,v]],[/(u304aa)/i],[u,[d,"AT&T"],[h,v]],[/\bsie-(\w*)/i],[u,[d,"Siemens"],[h,v]],[/\b(rct\w+) b/i],[u,[d,"RCA"],[h,m]],[/\b(venue[\d ]{2,7}) b/i],[u,[d,"Dell"],[h,m]],[/\b(q(?:mv|ta)\w+) b/i],[u,[d,"Verizon"],[h,m]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[d,"Barnes & Noble"],[h,m]],[/\b(tm\d{3}\w+) b/i],[u,[d,"NuVision"],[h,m]],[/\b(k88) b/i],[u,[d,"ZTE"],[h,m]],[/\b(nx\d{3}j) b/i],[u,[d,"ZTE"],[h,v]],[/\b(gen\d{3}) b.+49h/i],[u,[d,"Swiss"],[h,v]],[/\b(zur\d{3}) b/i],[u,[d,"Swiss"],[h,m]],[/\b((zeki)?tb.*\b) b/i],[u,[d,"Zeki"],[h,m]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[d,"Dragon Touch"],u,[h,m]],[/\b(ns-?\w{0,9}) b/i],[u,[d,"Insignia"],[h,m]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[d,"NextBook"],[h,m]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[d,"Voice"],u,[h,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[d,"LvTel"],u,[h,v]],[/\b(ph-1) /i],[u,[d,"Essential"],[h,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[d,"Envizen"],[h,m]],[/\b(trio[-\w\. ]+) b/i],[u,[d,"MachSpeed"],[h,m]],[/\btu_(1491) b/i],[u,[d,"Rotor"],[h,m]],[/(shield[\w ]+) b/i],[u,[d,"Nvidia"],[h,m]],[/(sprint) (\w+)/i],[d,u,[h,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[d,R],[h,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[d,M],[h,m]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[d,M],[h,v]],[/smart-tv.+(samsung)/i],[d,[h,_]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[d,D],[h,_]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[d,P],[h,_]],[/(apple) ?tv/i],[d,[u,O+" TV"],[h,_]],[/crkey/i],[[u,T+"cast"],[d,C],[h,_]],[/droid.+aft(\w+)( bui|\))/i],[u,[d,w],[h,_]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[u,[d,x],[h,_]],[/(bravia[\w ]+)( bui|\))/i],[u,[d,j],[h,_]],[/(mitv-\w{5}) bui/i],[u,[d,U],[h,_]],[/Hbbtv.*(technisat) (.*);/i],[d,u,[h,_]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[d,z],[u,z],[h,_]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,_]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[d,u,[h,g]],[/droid.+; (shield) bui/i],[u,[d,"Nvidia"],[h,g]],[/(playstation [345portablevi]+)/i],[u,[d,j],[h,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[d,R],[h,g]],[/((pebble))app/i],[d,u,[h,y]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[u,[d,O],[h,y]],[/droid.+; (glass) \d/i],[u,[d,C],[h,y]],[/droid.+; (wt63?0{2,3})\)/i],[u,[d,M],[h,y]],[/(quest( 2| pro)?)/i],[u,[d,B],[h,y]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[d,[h,b]],[/(aeobc)\b/i],[u,[d,w],[h,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[u,[h,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[h,m]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,m]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[d,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[l,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[l,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[l,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,l]],os:[[/microsoft (windows) (vista|xp)/i],[l,p],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[l,[p,H,q]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,H,q],[l,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[l,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[l,G],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[p,l],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[l,p],[/\(bb(10);/i],[p,[l,A]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[l,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[l,k+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[l,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[p,[l,"watchOS"]],[/crkey\/([\d\.]+)/i],[p,[l,T+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[l,V],p],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[l,p],[/(sunos) ?([\w\.\d]*)/i],[[l,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[l,p]]},$=function e(t,g){if(typeof t===o&&(g=t,t=r),!(this instanceof e))return new e(t,g).getResult();var _=typeof n!==a&&n.navigator?n.navigator:r,y=t||(_&&_.userAgent?_.userAgent:""),b=_&&_.userAgentData?_.userAgentData:r,w=g?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(J,g):J,O=_&&_.userAgent==y;return this.getBrowser=function(){var e={};return e[l]=r,e[p]=r,W.call(e,y,w.browser),e[c]=function(e){return typeof e===s?e.replace(/[^\d\.]/g,"").split(".")[0]:r}(e[p]),O&&_&&_.brave&&typeof _.brave.isBrave==i&&(e[l]="Brave"),e},this.getCPU=function(){var e={};return e[f]=r,W.call(e,y,w.cpu),e},this.getDevice=function(){var e={};return e[d]=r,e[u]=r,e[h]=r,W.call(e,y,w.device),O&&!e[h]&&b&&b.mobile&&(e[h]=v),O&&"Macintosh"==e[u]&&_&&typeof _.standalone!==a&&_.maxTouchPoints&&_.maxTouchPoints>2&&(e[u]="iPad",e[h]=m),e},this.getEngine=function(){var e={};return e[l]=r,e[p]=r,W.call(e,y,w.engine),e},this.getOS=function(){var e={};return e[l]=r,e[p]=r,W.call(e,y,w.os),O&&!e[l]&&b&&"Unknown"!=b.platform&&(e[l]=b.platform.replace(/chrome os/i,V).replace(/macos/i,G)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return y},this.setUA=function(e){return y=typeof e===s&&e.length>500?z(e,500):e,this},this.setUA(y),this};$.VERSION="1.0.37",$.BROWSER=F([l,p,c]),$.CPU=F([f]),$.DEVICE=F([u,d,h,g,v,_,m,y,b]),$.ENGINE=$.OS=F([l,p]),e.exports&&(t=e.exports=$),t.UAParser=$;var X=typeof n!==a&&(n.jQuery||n.Zepto);if(X&&!X.ua){var Q=new $;X.ua=Q.getResult(),X.ua.get=function(){return Q.getUA()},X.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var n in t)X.ua[n]=t[n]}}}("object"==typeof window?window:Uy)}(My,My.exports);class By{constructor(){this.onAnalyticsViewEvent=e=>{try{let t=e.detail.parserName,n=Zr.stateJSON,r={screenName:this.setScreenName(t.toLowerCase()),userId:n.license.user.toLowerCase()};this._analytics.sendAppView(r)}catch(e){}},this.onAnalyticsEvent=e=>{try{let t=[],n=Zr.stateJSON,r=this._analytics.hashEmail(n.license.meta.user.toLowerCase()),i="",a=e.detail.parameters.customParams;if(void 0!==a){if(void 0!==a.docId){let e=this._analytics.hash({stringToHash:a.docId});t.push({t:"d",i:"1",value:e})}t.push({t:"d",i:"2",value:n.license.licensetype}),t.push({t:"d",i:"3",value:n.license.licensesubscription}),t.push({t:"d",i:"16",value:n.license.guid}),void 0!==a.voice&&t.push({t:"d",i:"4",value:a.voice}),void 0!==a.onLine&&t.push({t:"d",i:"5",value:a.onLine}),void 0!==a.hostName&&(i=a.hostName,t.push({t:"d",i:"6",value:i})),void 0!==a.language&&t.push({t:"d",i:"7",value:a.language}),void 0!==a.ruleId&&t.push({t:"d",i:"8",value:a.ruleId}),void 0!==a.toReplace&&t.push({t:"d",i:"9",value:a.toReplace}),void 0!==a.replacedWith&&t.push({t:"d",i:"10",value:a.replacedWith}),void 0!==a.suggestions&&Array.isArray(a.suggestions)&&t.push({t:"d",i:"11",value:a.suggestions.join(", ")}),void 0!==a.textLength&&t.push({t:"m",i:"1",value:a.textLength}),void 0!==a.responseTime&&t.push({t:"m",i:"2",value:a.responseTime}),void 0!==a.speed&&t.push({t:"m",i:"3",value:parseInt(a.speed)}),void 0!==a.numWords&&t.push({t:"m",i:"4",value:a.numWords});let e=parseInt(this._analytics._getVersion().replace(/\./g,""));t.push({t:"m",i:"5",value:e}),t.push({t:"d",i:"12",value:this._analytics.getUTCTimeStamp().toString()})}let o={eventCategory:e.detail.parameters.eventCategory,eventAction:r.deIdentifiedEmail,eventLabel:r.emailDomain,eventValue:-1,userId:r.deIdentifiedEmail,screenName:this.setScreenName(e.detail.parameters.customParams.screenName.toLowerCase()),hostName:i,customAttributes:t};this._analytics.sendEvent(o)}catch(e){}},this.applicationName="RW4GC",this.analyticsTrackingCode="UA-83720712-1",this._analytics=new c({applicationName:this.applicationName,analyticsTrackingCode:this.analyticsTrackingCode})}setScreenName(e){switch(e){case"gdocsparser":case"gdocsonlyparser":return"google docs";case"htmlparser":return"web";case"googleslidesparser":return"google slides";case"googleformsparser":return"google forms";case"mswordonlineparser":case"mswordonlineonlyparser":return"microsoft word online";default:return e.toLowerCase()}}}let Vy=-1;const Gy=()=>{chrome.runtime.onMessage.addListener((async(e,t)=>{if(t.id===chrome.runtime.id&&e.command)switch(e.command.toLowerCase()){case"thswmslogoutactive":Vy=parseInt(e.active);break;case"thswclosemslogout":Fy({url:["https://thzbf.texthelp.com/*"]}).then((e=>{e.length>0&&chrome.tabs.remove(e[0].id)})),-1===Vy||isNaN(Vy)||chrome.tabs.update(Vy,{active:!0})}}))},Fy=e=>new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}));function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yy.apply(this,arguments)}class Ky{upload(e,t,n,r,i,a){throw Error("missing function upload")}}var zy=async(e,t,n="GET",r={},i={})=>await fetch(e,Yy({method:n,headers:new Headers(Yy({"Content-Type":"application/json",Authorization:`Bearer ${t}`},i))},r)),Wy=async(e,t)=>{const n=await fetch(`https://www.googleapis.com/drive/v3/files/${t}?fields=trashed`,{method:"GET",headers:{Authorization:`Bearer ${e}`}}),{trashed:r}=await n.json();if(!0===r)return!1;if(n.ok)return!0;if(404===n.status)return!1;throw new Error(`Failed to check if file exists. Status code: ${n.status}`)};const Hy="uploadFileConfig.json",qy=async e=>{const t=`https://content.googleapis.com/drive/v3/files?${encodeURI(`q=name='${Hy}'&spaces=appDataFolder&fields=files/id,files/description,files/trashed`)}`,n=await fetch(t,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});return await n.json()};var Jy=async e=>{const t={name:Hy,parents:["appDataFolder"]},n=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)}),r=(await n.json()).id,i=await fetch(`https://www.googleapis.com/upload/drive/v3/files/${r}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({})});return await i.json()},$y=qy,Xy=async(e,t)=>{const n=`https://www.googleapis.com/drive/v3/files/${t}?alt=media`,r=await zy(n,e),i=await r.text();return""===i?{}:JSON.parse(i)},Qy=async(e,t,n)=>{const r=await fetch(`https://www.googleapis.com/drive/v3/files/${t}`,{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),i=await r.json(),{etag:a}=i,o=await fetch(`https://www.googleapis.com/upload/drive/v3/files/${t}?uploadType=media`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json","If-Match":a},body:JSON.stringify(n)});return await o.json()};var Zy=async(e,t,n)=>{const r={name:t,mimeType:"application/vnd.google-apps.folder"};n&&(r.parents=[n]);const i=await fetch("https://www.googleapis.com/drive/v3/files",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(r)});return(await i.json()).id};var eb=async(e,t,n,r)=>{const i={name:t,parents:[r]},a=new FormData;a.append("metadata",new Blob([JSON.stringify(i)],{type:"application/json"})),a.append("file",e,t);const o={method:"POST",headers:{Authorization:`Bearer ${n}`},body:a},s=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",o),c=await s.json();return s.ok?{fileId:c.id}:{fileId:null,error:c}},tb=async(e,t)=>{const n=`https://content.googleapis.com/drive/v3/files/${t}?fields=appProperties`,r=await fetch(n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});if(!r.ok)throw new Error(r.statusText);if(404===r.status)return null;return await r.json()},nb=async(e,t,n)=>{const r=`https://content.googleapis.com/drive/v3/files/${t}`,i=await fetch(r,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(n)});if(!i.ok)throw new Error(i.statusText);return await i.json()},rb=async(e,t)=>{const n=`https://www.googleapis.com/drive/v3/files/${t}?fields=name`,r=await fetch(n,{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(!r.ok)throw new Error(r.statusText);return(await r.json()).name},ib=async(e,t,n)=>{const r=`https://content.googleapis.com/drive/v3/files/${t}/permissions?fields=*&alt=json`,i=await fetch(r,Yy({method:"POST",headers:{Authorization:`Bearer ${n}`}},e));if(!i.ok){const e=await i.json();throw new Error(e)}};class ab extends Ky{async getConfigData(e){const t=await $y(e);let n;if(t.files.length<1){n=(await Jy(e)).id}else n=t.files[0].id;return{configJson:await Xy(e,n),configId:n}}async createFolderStructure(e,t,n,r=null){const{configJson:i,configId:a}=await this.getConfigData(n);let o;i[e]&&i[e].rootId&&(o=i[e].rootId);let s,c=!1;if(o){await Wy(n,o)||(o=await Zy(n,e),i[e].rootId=o,c=!0)}else o=await Zy(n,e),i[e]={rootId:o},c=!0;if(s=i[e][t],s){await Wy(n,s)||(s=await Zy(n,t,o),i[e][t]=s,c=!0)}else s=await Zy(n,t,o),i[e][t]=s,c=!0;if(c&&await Qy(n,a,i),r){let e=!1;const i=await tb(n,r),a=await rb(n,r);if(i&&void 0===i.appProperties){const r=await Zy(n,a,s);i.appProperties={},i.appProperties[t]=r,e=!0}else if(i&&i.appProperties&&i.appProperties[t]){if(!await Wy(n,i.appProperties[t])){const r=await Zy(n,a,s);i.appProperties[t]=r,e=!0}s=i.appProperties[t]}else if(i&&i.appProperties&&!i.appProperties[t]){const r=await Zy(n,a,s);i.appProperties[t]=r,e=!0}e&&await nb(n,r,i),s=i.appProperties[t]}return s}async upload(e,t,n,r,i,a=null,o=null,s=null){const c=await this.createFolderStructure(n,r,i,a),u=await eb(e,t,i,c);if(null!==o)try{await ib(o,u.fileId,i)}catch(e){try{await ib(s,u.fileId,i)}catch(e){}}return u}}var ob=async(e,t)=>{const n={exists:null,id:null},r=await fetch(`https://graph.microsoft.com/v1.0/me/drive/root:${e}`,{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(r.ok){const e=await r.json();n.exists=!0,n.id=e.id}else{if(404!==r.status)throw new Error(`Error checking for folder. status: ${r.status}, statusText: ${r.statusText}`);n.exists=!1}return n},sb=async(e,t,n,r="root")=>{const i=await fetch(`https://graph.microsoft.com/v1.0/drives/${t}/items/${r}/children`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({name:n,folder:{}})});if(i.ok){return(await i.json()).id}return null};var cb=async e=>{const t=await fetch("https://graph.microsoft.com/v1.0/me/drive",{method:"GET",headers:{Authorization:`Bearer ${e}`}});if(t.ok){return(await t.json()).id}return null},ub=async(e,t,n,r,i)=>{const a=i.type,o=(new Date).toLocaleString("en-US",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).replace(/:/g,"-").replace(/\//g,"-").replace(", ","-"),s=`${r.slice(0,30)}${o.replace(" PM","").replace(" AM","")}.ogg`,c=await fetch(`https://graph.microsoft.com/v1.0/drives/${t}/items/${n}:/${s}:/content`,{method:"PUT",headers:{Authorization:`Bearer ${e}`,"Content-Type":a},body:i}),u=await c.json();return c.ok?{fileId:u.id}:{fileId:null,error:u}};class lb extends Ky{async upload(e,t,n,r,i,a=null){const o=await cb(i);if(null===o)throw new Error("Can't get driveid");const s=await this.createFolderStructure(n,r,i,o);return Yy({},await ub(i,o,s,encodeURI(t),e),{driveId:o})}async createFolderStructure(e,t,n,r=null){let i,a;if(null===r){if(i=await cb(n),null===i)throw new Error("Can't get driveid")}else i=r;const o=await ob(`/${e}`,n);if(a=o.exists?o.id:await sb(n,i,e),null===a)throw new Error("Error while creating the root folder");let s;const c=await ob(`/${e}/${t}`,n);if(s=c.exists?c.id:await sb(n,i,t,a),null===s)throw new Error("Error while creating the feature folder");return s}}var hb=e=>{let t=null;switch(e){case"googledrive":t=new ab;break;case"msonedrive":t=new lb}return t};var db=async(e,t,n,r,i,a=null,o="googledrive",s=null,c=null)=>{try{const u=hb(o);return await u.upload(e,t,n,r,i,a,s,c)}catch(e){return{fileId:null,error:e}}};function pb(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}var fb=function(){var e,t=(e=function*(e,t,n,r,i){var a=new Blob([(e=>{var t,n,r,i,a,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=.75*e.length,c=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var l=new ArrayBuffer(s),h=new Uint8Array(l);for(t=0;t<c;t+=4)n=o.indexOf(e[t]),r=o.indexOf(e[t+1]),i=o.indexOf(e[t+2]),a=o.indexOf(e[t+3]),h[u++]=n<<2|r>>4,h[u++]=(15&r)<<4|i>>2,h[u++]=(3&i)<<6|63&a;return l})(e)],{type:"audio/ogg; codecs=opus"}),o={body:JSON.stringify({role:"writer",type:"anyone",allowFileDiscovery:!1})},s={body:JSON.stringify({role:"writer",type:"domain",domain:i,allowFileDiscovery:!1})};return yield db(a,"".concat(t,".ogg"),"Texthelp","Voicenote",r,null,"googledrive",o,s)},function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){pb(a,r,i,o,s,"next",e)}function s(e){pb(a,r,i,o,s,"throw",e)}o(void 0)}))});return function(e,n,r,i,a){return t.apply(this,arguments)}}(),gb=Object.freeze(["https://www.googleapis.com/auth/drive.appdata","https://www.googleapis.com/auth/drive.appfolder","https://www.googleapis.com/auth/drive.file"]);const vb=e=>{const t=new Mr;t.initialise(),t.dispatchStorageEvent("th-market-choice",Dr,{market:e})},mb=async(e,t)=>{try{if("admin"===e){let e=await(async()=>new Promise((e=>{chrome.storage.managed.get("market",(t=>{let n="education";Object.keys(t).length>0?n=t.market:Zr.state.license&&Zr.state.license.market&&(n=Zr.state.license.market.toLowerCase()),e(n)}))})))();return void vb(e)}yb(t)}catch(e){}};let _b;const yb=e=>{try{if(void 0!==_b)return void chrome.windows.update(_b,{focused:!0});let e=navigator.platform.toUpperCase().indexOf("MAC")>=0,t={url:"onboarding/onboarding.html",type:"popup",focused:!0,state:"maximized"};e&&(t={url:"onboarding/onboarding.html",type:"popup",focused:!0}),chrome.windows.create(t,(e=>{_b=e.id;let t=chrome.windows.onRemoved.addListener((async n=>{n===e.id&&(_b=void 0,chrome.windows.onRemoved.removeListener(t))}),{WindowType:"popup"})}))}catch(e){}};!async function(){new Qv;const e=new Nm,a=new Mr,o=new Date;self.addEventListener("fetch",(async e=>{"GET"===e.request.method&&e.respondWith((async()=>{const t=await fetch(e.request),n=await t.blob(),r=new Headers(t.headers);r.set("content-security-policy","script-src 'self' 'wasm-unsafe-eval';  object-src 'none'"),r.set("X-Version",`2022-05-05.01 / ${o.toISOString()}`);return new Response(n,{status:t.status,statusText:t.statusText,headers:r})})())})),chrome.runtime.onMessage.addListener((async(e,t,n)=>{if(t.id===chrome.runtime.id)return e.thtype&&"mathjax"===e.thtype?new Promise(((n,r)=>{try{let r=e.url,i={target:{tabId:t.tab.id,frameIds:[t.frameId]},files:[r.replace(`chrome-extension://${chrome.runtime.id}/`,"")]};chrome.scripting.executeScript(i,(e=>{chrome.runtime.lastError,n()}))}catch(e){}})):void 0})),a.initialise();const s=new By;H_?Ny("G-KSR2EMG4F4","zr5gC7qDSYiiZmSLJEyV-g"):Ny("G-WZZKXN1XZB","lR6Hs_HkQ9aXa8Ht1mfunw"),await Promise.all([Zr.initialise(),ei.initialise(),ti.initialise(),ni.initialise(),Yv.initialise(),hc.initialise()]);const c=e=>new Promise((t=>{chrome.storage.sync.get(e,(e=>{t(e)}))})),u=e=>new Promise((t=>{chrome.tabs.query(e,(e=>{t(e)}))}));chrome.runtime.onStartup.addListener((async()=>{chrome.storage.local.set({thSSG:crypto.randomUUID()},(()=>{}))})),chrome.action.onClicked.addListener((async e=>{const t=void 0===Zr.state.license.user;let n=await u({active:!0,currentWindow:!0});py(e,t,a);const i=await r();!1===i&&ti.setOnBoardingFinished(!0);const o=await new Promise((e=>{chrome.storage.sync.get(["1540g45e-aea9-45de-12o9-a3rrdgthshr3"],(t=>{null==t["1540g45e-aea9-45de-12o9-a3rrdgthshr3"]&&e(!1),null!=t["1540g45e-aea9-45de-12o9-a3rrdgthshr3"]&&null!=t["1540g45e-aea9-45de-12o9-a3rrdgthshr3"].a3rrdgthshr3&&1==t["1540g45e-aea9-45de-12o9-a3rrdgthshr3"].a3rrdgthshr3?e(!0):e(!1)}))}));!0===i&&!0===o&&a.dispatchStorageEvent("doOnBoarding",Dr,{}),chrome.tabs.sendMessage(n[0].id,{command:"settoolbarVisible",visible:!0},(()=>{chrome.runtime.lastError}))})),chrome.runtime.onMessageExternal.addListener(((e,t,n)=>{if("enfolipbjmnmleonhhebhalojdpcpdoo"===t.id&&void 0!==e.command&&"GETSPEECHSETTINGS"===e.command){return n({voice:decodeURIComponent(Yv.stateJSON.speech.voice),speed:Yv.stateJSON.speech.speed}),!0}})),a.addEventListener("addVoiceNote",(async t=>{const n=await e.swGetAndValidateAccessToken(gb,i.GOOGLE);let r="";try{r=Zr.stateJSON.license.meta.user.split("@")[1]}catch(e){r=""}const o=`https://drive.google.com/uc?id=${(await fb(t.detail.audioblob,t.detail.title,t.detail.fileId,n,r)).fileId}`;a.dispatchStorageEvent("onVoiceNoteAdded",Ur,{type:"th-onVoiceNoteAdded",linkToVoiceNote:o},t.detail.source.sessionId,t.detail.source.frameId)})),chrome.gcm.onMessage.addListener((e=>{try{if(void 0!==Zr.stateJSON){((e,t,n)=>{let r=cy(e,t,!1);r&&r.processMessage(n)})(Zr.stateJSON.license.licence_type,Zr.stateJSON.user,e)}}catch(e){console.log(e)}})),chrome.alarms.onAlarm.addListener((e=>{if("MessageExpired"===e.name)a.dispatchStorageEvent("th-datadesk-reset",jr,{type:"th-datadesk-reset"})})),chrome.tabs.onActivated.addListener((e=>{try{chrome.tabs.sendMessage(e.tabId,{command:"setFrameActive"},(()=>{chrome.runtime.lastError}))}catch(e){}}));a.addEventListener("getLicense",(async t=>{if(!J_.licenseCheck||!J_.licenseCheck._license)try{let o=await ey();const s=await X_(o,t.detail.productCode),c=s.license;await dy(c),ni.setLicenseType(c.meta.loginType),ni.setLoginType(c.meta.loginType.toLowerCase()),ti.state.driveInstall||"google"==s.authType&&(e.swAuthorizeForDriveInstall(i.GOOGLE),ti.setDriveInstall(!0)),cy(c.licence_type,c.user,!0),t&&t.detail&&t.detail.returnevent&&a.dispatchStorageEvent(t.detail.returnevent,Ur,{type:t.detail.returnevent},t.detail.source.sessionId,t.detail.source.frameId);const u=await r();await(n=!0,new Promise((e=>{chrome.storage.sync.set({"1540g45e-aea9-45de-12o9-a3rrdgthshr3":{a3rrdgthshr3:n}},(()=>{e(n)}))}))),!0===u&&a.dispatchStorageEvent("doOnBoarding",Dr,{})}catch(e){}var n})),a.addEventListener("th-generateaudio",(async e=>{const t=Yv.state.speech.voice,n=Yv.state.speech.speed;new Ty(t,n).convert("AudioMaker",e.detail.text,e.detail.source)})),a.addEventListener("th-datadesk-message",(async e=>{ei.features=e.detail.message})),a.addEventListener("th-datadesk-reset",(async e=>{ei.resetFeatures()})),a.addEventListener("th-screenshotreader-worker",(async e=>{((e,t)=>{let n={};const r="enfolipbjmnmleonhhebhalojdpcpdoo";chrome.management.get(r,(i=>{chrome.runtime.lastError?chrome.tabs.create({url:"https://chrome.google.com/webstore/detail/screenshot-reader/enfolipbjmnmleonhhebhalojdpcpdoo",active:!0}):(n.command="stopScreenShotReader",chrome.runtime.sendMessage(r,n),n.command="startScreenShotReader",n.voice=`${e}?`,n.speed=t,n.speechServerURL="https://rwforg.speechstream.net/SpeechServices/index.html",n.user="rwforgdocs6",chrome.runtime.sendMessage(r,n))}))})(e.detail.voice,e.detail.speed)})),a.addEventListener("th-practicereadingaloudtab",(async e=>{Cy(e.detail.text,e.detail.options,e.detail.url)})),a.addEventListener("analyticsViewEvent",(async e=>{s.onAnalyticsViewEvent(e)})),a.addEventListener("analyticsEvent",(async e=>{s.onAnalyticsEvent(e)})),a.addEventListener("changeAccount",(async e=>{chrome.identity.getProfileUserInfo((async t=>{await new Promise((e=>{setTimeout(e,300)}));const n=navigator.userAgent.includes("Edg");let r=!1;t.email.length>0&&(r=!0);let o=Z_(ni.state.licenseType),s=Z_(e.detail.loginType);const c=!!e.detail.signout,u=n?i.MICROSOFT:i.GOOGLE;if(await new Promise((e=>{setTimeout(e,300)})),!r&&c)return await Q_(o),Zr.resetLicense(),ni.setLicenseType(i.DEFAULT),ni.setLoginType(i.DEFAULT),a.dispatchStorageEvent("hideSettings",Dr,{visible:!1}),a.dispatchStorageEvent("settoolbarVisible",Dr,{visible:!1}),void a.dispatchStorageEvent("account-changed",Dr,{login:i.DEFAULT,user:""});if(r&&c)try{const e=await X_(u,null,!1,c);await dy(e.license),ni.setLicenseType(u),ni.setLoginType(ni.state.licenseType.toLowerCase()),a.dispatchStorageEvent("account-changed",Dr,{login:u,user:e.license.meta.user}),n||(uy(),cy(e.license.licence_type,e.license.meta.user,!0))}catch(e){a.dispatchStorageEvent("hideSettings",Dr,{visible:!1}),a.dispatchStorageEvent("settoolbarVisible",Dr,{visible:!1}),n||uy()}finally{await Q_(o)}else if(r||c||o!==i.DEFAULT)try{const e=await X_(s,null,!1,c);s!==i.MICROSOFT&&s!==i.GOOGLE||await Q_(o),await dy(e.license),ni.setLicenseType(s),ni.setLoginType(ni.state.licenseType.toLowerCase()),a.dispatchStorageEvent("account-changed",Dr,{login:s,user:e.license.meta.user}),n||(uy(),cy(e.license.licence_type,e.license.meta.user,!0))}catch(e){}}))})),a.addEventListener("microsoftLogout",(async()=>{a.dispatchStorageEvent("settoolbarVisible",Dr,{visible:!1});try{await Q_(ni.state.licenseType),ni.setLicenseType(i.DEFAULT),Zr.resetLicense(),a.dispatchStorageEvent("hideSettings",Dr,{visible:!1}),a.dispatchStorageEvent("settoolbarVisible",Dr,{visible:!1}),a.dispatchStorageEvent("account-changed",Dr,{login:"",user:""})}catch(e){Zr.resetLicense(),ni.setLicenseType(i.DEFAULT)}})),a.addEventListener("th-opensimplifttab",(async e=>{const t=Yv.state.language.language,n=Yv.state.language.features;await ky.CallSimplifyService(!1,e.detail.title,e.detail.text,e.detail.url,t,e.detail.license,n)})),a.addEventListener("th-websearch",(async e=>{if(chrome.search)return void chrome.search.query({disposition:"NEW_TAB",text:e.detail.text});let t=e.detail.text.split(" ");t.length<1||(t.length>100&&(t.length=100),chrome.tabs.create({url:"http://google.com/search?q="+encodeURIComponent(t.join(" "))}))})),a.addEventListener("th-doOnBoarding",(async e=>{const t=await new Promise(((e,t)=>{chrome.management.getSelf((async t=>{e(t.installType)}))}));mb(t,e.detail.windowPosData)})),Gy(),chrome.runtime.onMessage.addListener((async(e,t,n)=>{try{if(t.id!==chrome.runtime.id)return;if(void 0===e.command)return;if("th-inject"===e.command)return void(async(e=null)=>{(e||(e=await fy()))&&yy(e.id,e.url)})(t.tab);if("th-inject-frame"===e.command){if(t.tab.url.startsWith("chrome://")||""===t.tab.url)return;return void await(async(e,t,n)=>{await ny(e,"mathjax/getIfMathjaxNeeded.js"),await my(e,t),gy(e),_y(e,0,n)})(t.tab.id,t.tab.url,t.frameId)}if("RW4GC_ACTION_CLICK"===e.command){const e=await fy();return void py(e)}if("th-getWindowId"===e.command)return void n(t.tab.id);if("th-isEdge"===e.command)return void n(H_);if("th-updateTabsFocus"===e.command)return void chrome.tabs.sendMessage(t.tab.id,{command:"setFrameActive"},(()=>{chrome.runtime.lastError}));if("thswsetaccounttype"===e.command){let t="google";switch(e.accountType){case"G":default:t="google";break;case"MS":t="microsoft";break;case"NYC":t="nyc"}return void a.dispatchStorageEvent("changeAccount",jr,{loginType:t})}if("th-setMarket"===e.command)return ti.setMarket(e.market),vb(e.market),void a.dispatchStorageEvent("settoolbarVisible",Dr,{visible:!0})}catch(e){}})),chrome.commands.onCommand.addListener((async e=>{let t=await u({active:!0,currentWindow:!0});chrome.tabs.sendMessage(t[0].id,{command:"shortcutHandler",action:e},(()=>{chrome.runtime.lastError}))}));const l=async()=>{chrome.identity.getProfileUserInfo((async e=>{if(e.email.length>0){let t=await ey();t?t===i.DEFAULT&&(t=i.GOOGLE):t=i.GOOGLE;const n=await(async(e,t,n)=>{let r=$_(t,!1);return await r.getLicenseForAccount(e,t,n)})(e.email,t,!1);Zr.license=n}}))};t&&l(),n&&ni.setExtensionUpdate(n),chrome.runtime.onInstalled.addListener((async e=>{if(l(),"update"===e.reason){let e={},t=[],n={},r=await c("thRWFGSettings");r.thRWFGSettings&&(e=JSON.parse(r.thRWFGSettings)),r=await c("texthelpdictionaryItems"),r.texthelpdictionaryItems&&(t=r.texthelpdictionaryItems),r=await c("texthelpbar"),r.texthelpbar&&(n=r.texthelpbar.left.buttons),Yv.importV1Settings(e,t,n)}}))}()}));
